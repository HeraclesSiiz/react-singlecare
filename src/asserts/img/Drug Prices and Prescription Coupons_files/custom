/* Minification failed. Returning unminified contents.
(8021,8-9): run-time error JS1010: Expected identifier: .
(8021,8-9): run-time error JS1195: Expected expression: .
(8022,8-9): run-time error JS1010: Expected identifier: .
(8022,8-9): run-time error JS1195: Expected expression: .
(122,209-216): run-time error JS1019: Can't have 'break' outside of loop: break t
 */
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){function s(s){var e=!1;return t('[data-notify="container"]').each(function(i,n){var a=t(n),o=a.find('[data-notify="title"]').text().trim(),r=a.find('[data-notify="message"]').html().trim(),l=o===t("<div>"+s.settings.content.title+"</div>").html().trim(),d=r===t("<div>"+s.settings.content.message+"</div>").html().trim(),g=a.hasClass("alert-"+s.settings.type);return l&&d&&g&&(e=!0),!e}),e}function e(e,n,a){var o={content:{message:"object"==typeof n?n.message:n,title:n.title?n.title:"",icon:n.icon?n.icon:"",url:n.url?n.url:"#",target:n.target?n.target:"-"}};a=t.extend(!0,{},o,a),this.settings=t.extend(!0,{},i,a),this._defaults=i,"-"===this.settings.content.target&&(this.settings.content.target=this.settings.url_target),this.animations={start:"webkitAnimationStart oanimationstart MSAnimationStart animationstart",end:"webkitAnimationEnd oanimationend MSAnimationEnd animationend"},"number"==typeof this.settings.offset&&(this.settings.offset={x:this.settings.offset,y:this.settings.offset}),(this.settings.allow_duplicates||!this.settings.allow_duplicates&&!s(this))&&this.init()}var i={element:"body",position:null,type:"info",allow_dismiss:!0,allow_duplicates:!0,newest_on_top:!1,showProgressbar:!1,placement:{from:"top",align:"right"},offset:20,spacing:10,z_index:1031,delay:5e3,timer:1e3,url_target:"_blank",mouse_over:null,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},onShow:null,onShown:null,onClose:null,onClosed:null,icon_type:"class",template:'<div data-notify="container" class="col-xs-11 col-sm-4 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">&times;</button><span data-notify="icon"></span> <span data-notify="title">{1}</span> <span data-notify="message">{2}</span><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a></div>'};String.format=function(){for(var t=arguments[0],s=1;s<arguments.length;s++)t=t.replace(RegExp("\\{"+(s-1)+"\\}","gm"),arguments[s]);return t},t.extend(e.prototype,{init:function(){var t=this;this.buildNotify(),this.settings.content.icon&&this.setIcon(),"#"!=this.settings.content.url&&this.styleURL(),this.styleDismiss(),this.placement(),this.bind(),this.notify={$ele:this.$ele,update:function(s,e){var i={};"string"==typeof s?i[s]=e:i=s;for(var n in i)switch(n){case"type":this.$ele.removeClass("alert-"+t.settings.type),this.$ele.find('[data-notify="progressbar"] > .progress-bar').removeClass("progress-bar-"+t.settings.type),t.settings.type=i[n],this.$ele.addClass("alert-"+i[n]).find('[data-notify="progressbar"] > .progress-bar').addClass("progress-bar-"+i[n]);break;case"icon":var a=this.$ele.find('[data-notify="icon"]');"class"===t.settings.icon_type.toLowerCase()?a.removeClass(t.settings.content.icon).addClass(i[n]):(a.is("img")||a.find("img"),a.attr("src",i[n]));break;case"progress":var o=t.settings.delay-t.settings.delay*(i[n]/100);this.$ele.data("notify-delay",o),this.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",i[n]).css("width",i[n]+"%");break;case"url":this.$ele.find('[data-notify="url"]').attr("href",i[n]);break;case"target":this.$ele.find('[data-notify="url"]').attr("target",i[n]);break;default:this.$ele.find('[data-notify="'+n+'"]').html(i[n])}var r=this.$ele.outerHeight()+parseInt(t.settings.spacing)+parseInt(t.settings.offset.y);t.reposition(r)},close:function(){t.close()}}},buildNotify:function(){var s=this.settings.content;this.$ele=t(String.format(this.settings.template,this.settings.type,s.title,s.message,s.url,s.target)),this.$ele.attr("data-notify-position",this.settings.placement.from+"-"+this.settings.placement.align),this.settings.allow_dismiss||this.$ele.find('[data-notify="dismiss"]').css("display","none"),(this.settings.delay<=0&&!this.settings.showProgressbar||!this.settings.showProgressbar)&&this.$ele.find('[data-notify="progressbar"]').remove()},setIcon:function(){"class"===this.settings.icon_type.toLowerCase()?this.$ele.find('[data-notify="icon"]').addClass(this.settings.content.icon):this.$ele.find('[data-notify="icon"]').is("img")?this.$ele.find('[data-notify="icon"]').attr("src",this.settings.content.icon):this.$ele.find('[data-notify="icon"]').append('<img src="'+this.settings.content.icon+'" alt="Notify Icon" />')},styleDismiss:function(){this.$ele.find('[data-notify="dismiss"]').css({position:"absolute",right:"10px",top:"5px",zIndex:this.settings.z_index+2})},styleURL:function(){this.$ele.find('[data-notify="url"]').css({backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)",height:"100%",left:0,position:"absolute",top:0,width:"100%",zIndex:this.settings.z_index+1})},placement:function(){var s=this,e=this.settings.offset.y,i={display:"inline-block",margin:"0px auto",position:this.settings.position?this.settings.position:"body"===this.settings.element?"fixed":"absolute",transition:"all .5s ease-in-out",zIndex:this.settings.z_index},n=!1,a=this.settings;switch(t('[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])').each(function(){e=Math.max(e,parseInt(t(this).css(a.placement.from))+parseInt(t(this).outerHeight())+parseInt(a.spacing))}),this.settings.newest_on_top===!0&&(e=this.settings.offset.y),i[this.settings.placement.from]=e+"px",this.settings.placement.align){case"left":case"right":i[this.settings.placement.align]=this.settings.offset.x+"px";break;case"center":i.left=0,i.right=0}this.$ele.css(i).addClass(this.settings.animate.enter),t.each(Array("webkit-","moz-","o-","ms-",""),function(t,e){s.$ele[0].style[e+"AnimationIterationCount"]=1}),t(this.settings.element).append(this.$ele),this.settings.newest_on_top===!0&&(e=parseInt(e)+parseInt(this.settings.spacing)+this.$ele.outerHeight(),this.reposition(e)),t.isFunction(s.settings.onShow)&&s.settings.onShow.call(this.$ele),this.$ele.one(this.animations.start,function(){n=!0}).one(this.animations.end,function(){s.$ele.removeClass(s.settings.animate.enter),t.isFunction(s.settings.onShown)&&s.settings.onShown.call(this)}),setTimeout(function(){n||t.isFunction(s.settings.onShown)&&s.settings.onShown.call(this)},600)},bind:function(){var s=this;if(this.$ele.find('[data-notify="dismiss"]').on("click",function(){s.close()}),this.$ele.mouseover(function(){t(this).data("data-hover","true")}).mouseout(function(){t(this).data("data-hover","false")}),this.$ele.data("data-hover","false"),this.settings.delay>0){s.$ele.data("notify-delay",s.settings.delay);var e=setInterval(function(){var t=parseInt(s.$ele.data("notify-delay"))-s.settings.timer;if("false"===s.$ele.data("data-hover")&&"pause"===s.settings.mouse_over||"pause"!=s.settings.mouse_over){var i=(s.settings.delay-t)/s.settings.delay*100;s.$ele.data("notify-delay",t),s.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",i).css("width",i+"%")}t<=-s.settings.timer&&(clearInterval(e),s.close())},s.settings.timer)}},close:function(){var s=this,e=parseInt(this.$ele.css(this.settings.placement.from)),i=!1;this.$ele.attr("data-closing","true").addClass(this.settings.animate.exit),s.reposition(e),t.isFunction(s.settings.onClose)&&s.settings.onClose.call(this.$ele),this.$ele.one(this.animations.start,function(){i=!0}).one(this.animations.end,function(){t(this).remove(),t.isFunction(s.settings.onClosed)&&s.settings.onClosed.call(this)}),setTimeout(function(){i||(s.$ele.remove(),s.settings.onClosed&&s.settings.onClosed(s.$ele))},600)},reposition:function(s){var e=this,i='[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])',n=this.$ele.nextAll(i);this.settings.newest_on_top===!0&&(n=this.$ele.prevAll(i)),n.each(function(){t(this).css(e.settings.placement.from,s),s=parseInt(s)+parseInt(e.settings.spacing)+t(this).outerHeight()})}}),t.notify=function(t,s){var i=new e(this,t,s);return i.notify},t.notifyDefaults=function(s){return i=t.extend(!0,{},i,s)},t.notifyClose=function(s){"warning"===s&&(s="danger"),"undefined"==typeof s||"all"===s?t("[data-notify]").find('[data-notify="dismiss"]').trigger("click"):"success"===s||"info"===s||"warning"===s||"danger"===s?t(".alert-"+s+"[data-notify]").find('[data-notify="dismiss"]').trigger("click"):s?t(s+"[data-notify]").find('[data-notify="dismiss"]').trigger("click"):t('[data-notify-position="'+s+'"]').find('[data-notify="dismiss"]').trigger("click")},t.notifyCloseExcept=function(s){"warning"===s&&(s="danger"),"success"===s||"info"===s||"warning"===s||"danger"===s?t("[data-notify]").not(".alert-"+s).find('[data-notify="dismiss"]').trigger("click"):t("[data-notify]").not(s).find('[data-notify="dismiss"]').trigger("click")}});;
/**
 * Notifications
 * 
 * Uses notify http://bootstrap-notify.remabledesigns.com/
 */

( function( window) {
    'use strict';
    /*
    *  General notifications
    *
    *  type:
    *  success, warning, danger
    *
    *  Use:
    *  SCNotify.page("The success message","success");
    *  SCNotify.page("The warning message with <a href="#">link</a>","warning");
    *
    *
    *  Dashboard notifications
    *
    *  Use:
    *  SCNotify.dashboard("The title", "The content", "Add now", "/billing/address");
    */

    var SCNotify = {
        TYPES: {
            ERROR: 'danger',
            WARNING: 'warning',
            SUCCESS: 'success'
        },
        // General notification at the top of the page
        page: function (message, type) {
            $.notify({ message: message }, {delay:4000, type:type});
        },
        // User notification for dashboard only
        dashboard: function (title, content, btnTxt, btnUrl) {
            var url;
            if (typeof btnUrl === 'string' && btnUrl.length > 0) {
                // redirect if there is a link
                url = "location.href = '"+btnUrl+"'";
            } else {
                // close if there is no link
                url = 'this.parentNode.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode.parentNode);';
            }

            // Html for dashboard notification
            var n = '<div class="sc-components-notification">\
                       <p class="content">\
                         <span class="title">'+title+'</span><br>\
                         <span class="text" style="display: block;margin-bottom: 15px;">'+content+'</span>\
                         <span class="action">\
                           <a href="javascript:void(0);" onclick="' + url + '" class="sc-outline-btn--cool-gray small-btn">' + btnTxt + '</a>\
                          </span>\
                       </p>\
                     </div>';
            $('.notification-container.sc-container').append(n);
        }
    }

    /**
	 * Add to global namespace
	 */
    window.SCNotify = SCNotify;
} )( window );;
/**
 * @license
 * lodash lodash.com/license | Underscore.js 1.8.3 underscorejs.org/LICENSE
 */
; (function () {
    function t(t, n) { return t.set(n[0], n[1]), t } function n(t, n) { return t.add(n), t } function r(t, n, r) { switch (r.length) { case 0: return t.call(n); case 1: return t.call(n, r[0]); case 2: return t.call(n, r[0], r[1]); case 3: return t.call(n, r[0], r[1], r[2]) } return t.apply(n, r) } function e(t, n, r, e) { for (var u = -1, o = t ? t.length : 0; ++u < o;) { var i = t[u]; n(e, i, r(i), t) } return e } function u(t, n) { for (var r = -1, e = t ? t.length : 0; ++r < e && false !== n(t[r], r, t) ;); return t } function o(t, n) {
        for (var r = t ? t.length : 0; r-- && false !== n(t[r], r, t) ;);
        return t
    } function i(t, n) { for (var r = -1, e = t ? t.length : 0; ++r < e;) if (!n(t[r], r, t)) return false; return true } function f(t, n) { for (var r = -1, e = t ? t.length : 0, u = 0, o = []; ++r < e;) { var i = t[r]; n(i, r, t) && (o[u++] = i) } return o } function c(t, n) { return !(!t || !t.length) && -1 < d(t, n, 0) } function a(t, n, r) { for (var e = -1, u = t ? t.length : 0; ++e < u;) if (r(n, t[e])) return true; return false } function l(t, n) { for (var r = -1, e = t ? t.length : 0, u = Array(e) ; ++r < e;) u[r] = n(t[r], r, t); return u } function s(t, n) { for (var r = -1, e = n.length, u = t.length; ++r < e;) t[u + r] = n[r]; return t } function h(t, n, r, e) {
        var u = -1, o = t ? t.length : 0; for (e && o && (r = t[++u]) ; ++u < o;) r = n(r, t[u], u, t); return r
    } function p(t, n, r, e) { var u = t ? t.length : 0; for (e && u && (r = t[--u]) ; u--;) r = n(r, t[u], u, t); return r } function _(t, n) { for (var r = -1, e = t ? t.length : 0; ++r < e;) if (n(t[r], r, t)) return true; return false } function v(t, n, r) { var e; return r(t, function (t, r, u) { return n(t, r, u) ? (e = r, false) : void 0 }), e } function g(t, n, r, e) { var u = t.length; for (r += e ? 1 : -1; e ? r-- : ++r < u;) if (n(t[r], r, t)) return r; return -1 } function d(t, n, r) {
        if (n !== n) return M(t, r); --r; for (var e = t.length; ++r < e;) if (t[r] === n) return r;
        return -1
    } function y(t, n, r, e) { --r; for (var u = t.length; ++r < u;) if (e(t[r], n)) return r; return -1 } function b(t, n) { var r = t ? t.length : 0; return r ? w(t, n) / r : V } function x(t, n, r, e, u) { return u(t, function (t, u, o) { r = e ? (e = false, t) : n(r, t, u, o) }), r } function j(t, n) { var r = t.length; for (t.sort(n) ; r--;) t[r] = t[r].c; return t } function w(t, n) { for (var r, e = -1, u = t.length; ++e < u;) { var o = n(t[e]); o !== T && (r = r === T ? o : r + o) } return r } function m(t, n) { for (var r = -1, e = Array(t) ; ++r < t;) e[r] = n(r); return e } function A(t, n) {
        return l(n, function (n) {
            return [n, t[n]];
        })
    } function O(t) { return function (n) { return t(n) } } function k(t, n) { return l(n, function (n) { return t[n] }) } function E(t, n) { return t.has(n) } function S(t, n) { for (var r = -1, e = t.length; ++r < e && -1 < d(n, t[r], 0) ;); return r } function I(t, n) { for (var r = t.length; r-- && -1 < d(n, t[r], 0) ;); return r } function R(t) { return t && t.Object === Object ? t : null } function W(t) { return zt[t] } function B(t) { return Ut[t] } function L(t) { return "\\" + Dt[t] } function M(t, n, r) {
        var e = t.length; for (n += r ? 1 : -1; r ? n-- : ++n < e;) { var u = t[n]; if (u !== u) return n } return -1;
    } function C(t) { var n = false; if (null != t && typeof t.toString != "function") try { n = !!(t + "") } catch (r) { } return n } function z(t) { for (var n, r = []; !(n = t.next()).done;) r.push(n.value); return r } function U(t) { var n = -1, r = Array(t.size); return t.forEach(function (t, e) { r[++n] = [e, t] }), r } function $(t, n) { for (var r = -1, e = t.length, u = 0, o = []; ++r < e;) { var i = t[r]; i !== n && "__lodash_placeholder__" !== i || (t[r] = "__lodash_placeholder__", o[u++] = r) } return o } function D(t) { var n = -1, r = Array(t.size); return t.forEach(function (t) { r[++n] = t }), r } function F(t) {
        var n = -1, r = Array(t.size); return t.forEach(function (t) { r[++n] = [t, t] }), r
    } function N(t) { if (!t || !Wt.test(t)) return t.length; for (var n = It.lastIndex = 0; It.test(t) ;) n++; return n } function P(t) { return $t[t] } function Z(R) {
        function At(t, n) { return R.setTimeout.call(Kt, t, n) } function Ot(t) { if (Te(t) && !yi(t) && !(t instanceof Ut)) { if (t instanceof zt) return t; if (Wu.call(t, "__wrapped__")) return ae(t) } return new zt(t) } function kt() { } function zt(t, n) {
            this.__wrapped__ = t, this.__actions__ = [], this.__chain__ = !!n, this.__index__ = 0,
            this.__values__ = T
        } function Ut(t) { this.__wrapped__ = t, this.__actions__ = [], this.__dir__ = 1, this.__filtered__ = false, this.__iteratees__ = [], this.__takeCount__ = 4294967295, this.__views__ = [] } function $t(t) { var n = -1, r = t ? t.length : 0; for (this.clear() ; ++n < r;) { var e = t[n]; this.set(e[0], e[1]) } } function Dt(t) { var n = -1, r = t ? t.length : 0; for (this.clear() ; ++n < r;) { var e = t[n]; this.set(e[0], e[1]) } } function Pt(t) { var n = -1, r = t ? t.length : 0; for (this.clear() ; ++n < r;) { var e = t[n]; this.set(e[0], e[1]) } } function Zt(t) {
            var n = -1, r = t ? t.length : 0;
            for (this.__data__ = new Pt; ++n < r;) this.add(t[n])
        } function qt(t) { this.__data__ = new Dt(t) } function Vt(t, n, r, e) { return t === T || Ce(t, ku[r]) && !Wu.call(e, r) ? n : t } function Jt(t, n, r) { (r === T || Ce(t[n], r)) && (typeof n != "number" || r !== T || n in t) || (t[n] = r) } function Yt(t, n, r) { var e = t[n]; Wu.call(t, n) && Ce(e, r) && (r !== T || n in t) || (t[n] = r) } function Ht(t, n) { for (var r = t.length; r--;) if (Ce(t[r][0], n)) return r; return -1 } function Qt(t, n, r, e) { return Ao(t, function (t, u, o) { n(e, t, r(t), o) }), e } function Xt(t, n) { return t && sr(n, iu(n), t) }
        function tn(t, n) { for (var r = -1, e = null == t, u = n.length, o = Array(u) ; ++r < u;) o[r] = e ? T : uu(t, n[r]); return o } function nn(t, n, r) { return t === t && (r !== T && (t = r >= t ? t : r), n !== T && (t = t >= n ? t : n)), t } function rn(t, n, r, e, o, i, f) {
            var c; if (e && (c = i ? e(t, o, i, f) : e(t)), c !== T) return c; if (!Ze(t)) return t; if (o = yi(t)) { if (c = Kr(t), !n) return lr(t, c) } else {
                var a = qr(t), l = "[object Function]" == a || "[object GeneratorFunction]" == a; if (bi(t)) return or(t, n); if ("[object Object]" == a || "[object Arguments]" == a || l && !i) {
                    if (C(t)) return i ? t : {}; if (c = Gr(l ? {} : t),
                    !n) return hr(t, Xt(c, t))
                } else { if (!Ct[a]) return i ? t : {}; c = Jr(t, a, rn, n) }
            } if (f || (f = new qt), i = f.get(t)) return i; if (f.set(t, c), !o) var s = r ? gn(t, iu, Tr) : iu(t); return u(s || t, function (u, o) { s && (o = u, u = t[o]), Yt(c, o, rn(u, n, r, e, o, t, f)) }), c
        } function en(t) { var n = iu(t), r = n.length; return function (e) { if (null == e) return !r; for (var u = r; u--;) { var o = n[u], i = t[o], f = e[o]; if (f === T && !(o in Object(e)) || !i(f)) return false } return true } } function un(t) { return Ze(t) ? Tu(t) : {} } function on(t, n, r) {
            if (typeof t != "function") throw new Au("Expected a function");
            return At(function () { t.apply(T, r) }, n)
        } function fn(t, n, r, e) { var u = -1, o = c, i = true, f = t.length, s = [], h = n.length; if (!f) return s; r && (n = l(n, O(r))), e ? (o = a, i = false) : n.length >= 200 && (o = E, i = false, n = new Zt(n)); t: for (; ++u < f;) { var p = t[u], _ = r ? r(p) : p, p = e || 0 !== p ? p : 0; if (i && _ === _) { for (var v = h; v--;) if (n[v] === _) continue t; s.push(p) } else o(n, _, e) || s.push(p) } return s } function cn(t, n) { var r = true; return Ao(t, function (t, e, u) { return r = !!n(t, e, u) }), r } function an(t, n, r) {
            for (var e = -1, u = t.length; ++e < u;) {
                var o = t[e], i = n(o); if (null != i && (f === T ? i === i && !Je(i) : r(i, f))) var f = i, c = o;
            } return c
        } function ln(t, n) { var r = []; return Ao(t, function (t, e, u) { n(t, e, u) && r.push(t) }), r } function sn(t, n, r, e, u) { var o = -1, i = t.length; for (r || (r = Hr), u || (u = []) ; ++o < i;) { var f = t[o]; n > 0 && r(f) ? n > 1 ? sn(f, n - 1, r, e, u) : s(u, f) : e || (u[u.length] = f) } return u } function hn(t, n) { return t && ko(t, n, iu) } function pn(t, n) { return t && Eo(t, n, iu) } function _n(t, n) { return f(n, function (n) { return Fe(t[n]) }) } function vn(t, n) { n = ne(n, t) ? [n] : er(n); for (var r = 0, e = n.length; null != t && e > r;) t = t[fe(n[r++])]; return r && r == e ? t : T } function gn(t, n, r) {
            return n = n(t), yi(t) ? n : s(n, r(t))
        } function dn(t, n) { return t > n } function yn(t, n) { return null != t && (Wu.call(t, n) || typeof t == "object" && n in t && null === Ju(Object(t))) } function bn(t, n) { return null != t && n in Object(t) } function xn(t, n, r) {
            for (var e = r ? a : c, u = t[0].length, o = t.length, i = o, f = Array(o), s = 1 / 0, h = []; i--;) { var p = t[i]; i && n && (p = l(p, O(n))), s = to(p.length, s), f[i] = !r && (n || u >= 120 && p.length >= 120) ? new Zt(i && p) : T } var p = t[0], _ = -1, v = f[0]; t: for (; ++_ < u && s > h.length;) {
                var g = p[_], d = n ? n(g) : g, g = r || 0 !== g ? g : 0; if (v ? !E(v, d) : !e(h, d, r)) {
                    for (i = o; --i;) { var y = f[i]; if (y ? !E(y, d) : !e(t[i], d, r)) continue t } v && v.push(d), h.push(g)
                }
            } return h
        } function jn(t, n, r) { var e = {}; return hn(t, function (t, u, o) { n(e, r(t), u, o) }), e } function wn(t, n, e) { return ne(n, t) || (n = er(n), t = ie(t, n), n = ve(n)), n = null == t ? t : t[fe(n)], null == n ? T : r(n, t, e) } function mn(t, n, r, e, u) {
            if (t === n) n = true; else if (null == t || null == n || !Ze(t) && !Te(n)) n = t !== t && n !== n; else t: {
                var o = yi(t), i = yi(n), f = "[object Array]", c = "[object Array]"; o || (f = qr(t), f = "[object Arguments]" == f ? "[object Object]" : f), i || (c = qr(n),
                c = "[object Arguments]" == c ? "[object Object]" : c); var a = "[object Object]" == f && !C(t), i = "[object Object]" == c && !C(n); if ((c = f == c) && !a) u || (u = new qt), n = o || Ye(t) ? zr(t, n, mn, r, e, u) : Ur(t, n, f, mn, r, e, u); else {
                    if (!(2 & e) && (o = a && Wu.call(t, "__wrapped__"), f = i && Wu.call(n, "__wrapped__"), o || f)) { t = o ? t.value() : t, n = f ? n.value() : n, u || (u = new qt), n = mn(t, n, r, e, u); break t } if (c) n: if (u || (u = new qt), o = 2 & e, f = iu(t), i = f.length, c = iu(n).length, i == c || o) {
                        for (a = i; a--;) { var l = f[a]; if (!(o ? l in n : yn(n, l))) { n = false; break n } } if (c = u.get(t)) n = c == n; else {
                            c = true, u.set(t, n); for (var s = o; ++a < i;) { var l = f[a], h = t[l], p = n[l]; if (r) var _ = o ? r(p, h, l, n, t, u) : r(h, p, l, t, n, u); if (_ === T ? h !== p && !mn(h, p, r, e, u) : !_) { c = false; break } s || (s = "constructor" == l) } c && !s && (r = t.constructor, e = n.constructor, r != e && "constructor" in t && "constructor" in n && !(typeof r == "function" && r instanceof r && typeof e == "function" && e instanceof e) && (c = false)), u["delete"](t), n = c
                        }
                    } else n = false; else n = false
                }
            } return n
        } function An(t, n, r, e) {
            var u = r.length, o = u, i = !e; if (null == t) return !o; for (t = Object(t) ; u--;) {
                var f = r[u]; if (i && f[2] ? f[1] !== t[f[0]] : !(f[0] in t)) return false;
            } for (; ++u < o;) { var f = r[u], c = f[0], a = t[c], l = f[1]; if (i && f[2]) { if (a === T && !(c in t)) return false } else { if (f = new qt, e) var s = e(a, l, c, t, n, f); if (s === T ? !mn(l, a, e, 3, f) : !s) return false } } return true
        } function On(t) { return !Ze(t) || Iu && Iu in t ? false : (Fe(t) || C(t) ? zu : yt).test(ce(t)) } function kn(t) { return typeof t == "function" ? t : null == t ? pu : typeof t == "object" ? yi(t) ? Wn(t[0], t[1]) : Rn(t) : du(t) } function En(t) { t = null == t ? t : Object(t); var n, r = []; for (n in t) r.push(n); return r } function Sn(t, n) { return n > t } function In(t, n) {
            var r = -1, e = Ue(t) ? Array(t.length) : [];
            return Ao(t, function (t, u, o) { e[++r] = n(t, u, o) }), e
        } function Rn(t) { var n = Pr(t); return 1 == n.length && n[0][2] ? ue(n[0][0], n[0][1]) : function (r) { return r === t || An(r, t, n) } } function Wn(t, n) { return ne(t) && n === n && !Ze(n) ? ue(fe(t), n) : function (r) { var e = uu(r, t); return e === T && e === n ? ou(r, t) : mn(n, e, T, 3) } } function Bn(t, n, r, e, o) {
            if (t !== n) {
                if (!yi(n) && !Ye(n)) var i = fu(n); u(i || n, function (u, f) {
                    if (i && (f = u, u = n[f]), Ze(u)) {
                        o || (o = new qt); var c = f, a = o, l = t[c], s = n[c], h = a.get(s); if (h) Jt(t, c, h); else {
                            var h = e ? e(l, s, c + "", t, n, a) : T, p = h === T; p && (h = s,
                            yi(s) || Ye(s) ? yi(l) ? h = l : $e(l) ? h = lr(l) : (p = false, h = rn(s, true)) : Ve(s) || ze(s) ? ze(l) ? h = ru(l) : !Ze(l) || r && Fe(l) ? (p = false, h = rn(s, true)) : h = l : p = false), a.set(s, h), p && Bn(h, s, r, e, a), a["delete"](s), Jt(t, c, h)
                        }
                    } else c = e ? e(t[f], u, f + "", t, n, o) : T, c === T && (c = u), Jt(t, f, c)
                })
            }
        } function Ln(t, n) { var r = t.length; return r ? (n += 0 > n ? r : 0, Xr(n, r) ? t[n] : T) : void 0 } function Mn(t, n, r) {
            var e = -1; return n = l(n.length ? n : [pu], O(Fr())), t = In(t, function (t) { return { a: l(n, function (n) { return n(t) }), b: ++e, c: t } }), j(t, function (t, n) {
                var e; t: {
                    e = -1; for (var u = t.a, o = n.a, i = u.length, f = r.length; ++e < i;) {
                        var c = fr(u[e], o[e]); if (c) { e = e >= f ? c : c * ("desc" == r[e] ? -1 : 1); break t }
                    } e = t.b - n.b
                } return e
            })
        } function Cn(t, n) { return t = Object(t), h(n, function (n, r) { return r in t && (n[r] = t[r]), n }, {}) } function zn(t, n) { for (var r = -1, e = gn(t, fu, Bo), u = e.length, o = {}; ++r < u;) { var i = e[r], f = t[i]; n(f, i) && (o[i] = f) } return o } function Un(t) { return function (n) { return null == n ? T : n[t] } } function $n(t) { return function (n) { return vn(n, t) } } function Dn(t, n, r, e) {
            var u = e ? y : d, o = -1, i = n.length, f = t; for (t === n && (n = lr(n)), r && (f = l(t, O(r))) ; ++o < i;) for (var c = 0, a = n[o], a = r ? r(a) : a; -1 < (c = u(f, a, c, e)) ;) f !== t && Vu.call(f, c, 1),
            Vu.call(t, c, 1); return t
        } function Fn(t, n) { for (var r = t ? n.length : 0, e = r - 1; r--;) { var u = n[r]; if (r == e || u !== o) { var o = u; if (Xr(u)) Vu.call(t, u, 1); else if (ne(u, t)) delete t[fe(u)]; else { var u = er(u), i = ie(t, u); null != i && delete i[fe(ve(u))] } } } } function Nn(t, n) { return t + Gu(ro() * (n - t + 1)) } function Pn(t, n) { var r = ""; if (!t || 1 > n || n > 9007199254740991) return r; do n % 2 && (r += t), (n = Gu(n / 2)) && (t += t); while (n); return r } function Zn(t, n, r, e) {
            n = ne(n, t) ? [n] : er(n); for (var u = -1, o = n.length, i = o - 1, f = t; null != f && ++u < o;) {
                var c = fe(n[u]); if (Ze(f)) {
                    var a = r; if (u != i) { var l = f[c], a = e ? e(l, c, f) : T; a === T && (a = null == l ? Xr(n[u + 1]) ? [] : {} : l) } Yt(f, c, a)
                } f = f[c]
            } return t
        } function Tn(t, n, r) { var e = -1, u = t.length; for (0 > n && (n = -n > u ? 0 : u + n), r = r > u ? u : r, 0 > r && (r += u), u = n > r ? 0 : r - n >>> 0, n >>>= 0, r = Array(u) ; ++e < u;) r[e] = t[e + n]; return r } function qn(t, n) { var r; return Ao(t, function (t, e, u) { return r = n(t, e, u), !r }), !!r } function Vn(t, n, r) {
            var e = 0, u = t ? t.length : e; if (typeof n == "number" && n === n && 2147483647 >= u) { for (; u > e;) { var o = e + u >>> 1, i = t[o]; null !== i && !Je(i) && (r ? n >= i : n > i) ? e = o + 1 : u = o } return u }
            return Kn(t, n, pu, r)
        } function Kn(t, n, r, e) { n = r(n); for (var u = 0, o = t ? t.length : 0, i = n !== n, f = null === n, c = Je(n), a = n === T; o > u;) { var l = Gu((u + o) / 2), s = r(t[l]), h = s !== T, p = null === s, _ = s === s, v = Je(s); (i ? e || _ : a ? _ && (e || h) : f ? _ && h && (e || !p) : c ? _ && h && !p && (e || !v) : p || v ? 0 : e ? n >= s : n > s) ? u = l + 1 : o = l } return to(o, 4294967294) } function Gn(t, n) { for (var r = -1, e = t.length, u = 0, o = []; ++r < e;) { var i = t[r], f = n ? n(i) : i; if (!r || !Ce(f, c)) { var c = f; o[u++] = 0 === i ? 0 : i } } return o } function Jn(t) { return typeof t == "number" ? t : Je(t) ? V : +t } function Yn(t) {
            if (typeof t == "string") return t;
            if (Je(t)) return mo ? mo.call(t) : ""; var n = t + ""; return "0" == n && 1 / t == -q ? "-0" : n
        } function Hn(t, n, r) { var e = -1, u = c, o = t.length, i = true, f = [], l = f; if (r) i = false, u = a; else if (o >= 200) { if (u = n ? null : Io(t)) return D(u); i = false, u = E, l = new Zt } else l = n ? [] : f; t: for (; ++e < o;) { var s = t[e], h = n ? n(s) : s, s = r || 0 !== s ? s : 0; if (i && h === h) { for (var p = l.length; p--;) if (l[p] === h) continue t; n && l.push(h), f.push(s) } else u(l, h, r) || (l !== f && l.push(h), f.push(s)) } return f } function Qn(t, n, r, e) {
            for (var u = t.length, o = e ? u : -1; (e ? o-- : ++o < u) && n(t[o], o, t) ;); return r ? Tn(t, e ? 0 : o, e ? o + 1 : u) : Tn(t, e ? o + 1 : 0, e ? u : o);
        } function Xn(t, n) { var r = t; return r instanceof Ut && (r = r.value()), h(n, function (t, n) { return n.func.apply(n.thisArg, s([t], n.args)) }, r) } function tr(t, n, r) { for (var e = -1, u = t.length; ++e < u;) var o = o ? s(fn(o, t[e], n, r), fn(t[e], o, n, r)) : t[e]; return o && o.length ? Hn(o, n, r) : [] } function nr(t, n, r) { for (var e = -1, u = t.length, o = n.length, i = {}; ++e < u;) r(i, t[e], o > e ? n[e] : T); return i } function rr(t) { return $e(t) ? t : [] } function er(t) { return yi(t) ? t : Co(t) } function ur(t, n, r) { var e = t.length; return r = r === T ? e : r, !n && r >= e ? t : Tn(t, n, r) } function or(t, n) {
            if (n) return t.slice(); var r = new t.constructor(t.length); return t.copy(r), r
        } function ir(t) { var n = new t.constructor(t.byteLength); return new Fu(n).set(new Fu(t)), n } function fr(t, n) { if (t !== n) { var r = t !== T, e = null === t, u = t === t, o = Je(t), i = n !== T, f = null === n, c = n === n, a = Je(n); if (!f && !a && !o && t > n || o && i && c && !f && !a || e && i && c || !r && c || !u) return 1; if (!e && !o && !a && n > t || a && r && u && !e && !o || f && r && u || !i && u || !c) return -1 } return 0 } function cr(t, n, r, e) {
            var u = -1, o = t.length, i = r.length, f = -1, c = n.length, a = Xu(o - i, 0), l = Array(c + a); for (e = !e; ++f < c;) l[f] = n[f];
            for (; ++u < i;) (e || o > u) && (l[r[u]] = t[u]); for (; a--;) l[f++] = t[u++]; return l
        } function ar(t, n, r, e) { var u = -1, o = t.length, i = -1, f = r.length, c = -1, a = n.length, l = Xu(o - f, 0), s = Array(l + a); for (e = !e; ++u < l;) s[u] = t[u]; for (l = u; ++c < a;) s[l + c] = n[c]; for (; ++i < f;) (e || o > u) && (s[l + r[i]] = t[u++]); return s } function lr(t, n) { var r = -1, e = t.length; for (n || (n = Array(e)) ; ++r < e;) n[r] = t[r]; return n } function sr(t, n, r, e) { r || (r = {}); for (var u = -1, o = n.length; ++u < o;) { var i = n[u], f = e ? e(r[i], t[i], i, r, t) : t[i]; Yt(r, i, f) } return r } function hr(t, n) {
            return sr(t, Tr(t), n);
        } function pr(t, n) { return function (r, u) { var o = yi(r) ? e : Qt, i = n ? n() : {}; return o(r, t, Fr(u), i) } } function _r(t) { return Me(function (n, r) { var e = -1, u = r.length, o = u > 1 ? r[u - 1] : T, i = u > 2 ? r[2] : T, o = t.length > 3 && typeof o == "function" ? (u--, o) : T; for (i && te(r[0], r[1], i) && (o = 3 > u ? T : o, u = 1), n = Object(n) ; ++e < u;) (i = r[e]) && t(n, i, e, o); return n }) } function vr(t, n) { return function (r, e) { if (null == r) return r; if (!Ue(r)) return t(r, e); for (var u = r.length, o = n ? u : -1, i = Object(r) ; (n ? o-- : ++o < u) && false !== e(i[o], o, i) ;); return r } } function gr(t) {
            return function (n, r, e) {
                var u = -1, o = Object(n); e = e(n); for (var i = e.length; i--;) { var f = e[t ? i : ++u]; if (false === r(o[f], f, o)) break } return n
            }
        } function dr(t, n, r) { function e() { return (this && this !== Kt && this instanceof e ? o : t).apply(u ? r : this, arguments) } var u = 1 & n, o = xr(t); return e } function yr(t) { return function (n) { n = eu(n); var r = Wt.test(n) ? n.match(It) : T, e = r ? r[0] : n.charAt(0); return n = r ? ur(r, 1).join("") : n.slice(1), e[t]() + n } } function br(t) { return function (n) { return h(su(lu(n).replace(Et, "")), t, "") } } function xr(t) {
            return function () {
                var n = arguments;
                switch (n.length) { case 0: return new t; case 1: return new t(n[0]); case 2: return new t(n[0], n[1]); case 3: return new t(n[0], n[1], n[2]); case 4: return new t(n[0], n[1], n[2], n[3]); case 5: return new t(n[0], n[1], n[2], n[3], n[4]); case 6: return new t(n[0], n[1], n[2], n[3], n[4], n[5]); case 7: return new t(n[0], n[1], n[2], n[3], n[4], n[5], n[6]) } var r = un(t.prototype), n = t.apply(r, n); return Ze(n) ? n : r
            }
        } function jr(t, n, e) {
            function u() {
                for (var i = arguments.length, f = Array(i), c = i, a = Dr(u) ; c--;) f[c] = arguments[c]; return c = 3 > i && f[0] !== a && f[i - 1] !== a ? [] : $(f, a),
                i -= c.length, e > i ? Br(t, n, Ar, u.placeholder, T, f, c, T, T, e - i) : r(this && this !== Kt && this instanceof u ? o : t, this, f)
            } var o = xr(t); return u
        } function wr(t) { return function (n, r, e) { var u = Object(n); if (r = Fr(r, 3), !Ue(n)) var o = iu(n); return e = t(o || n, function (t, n) { return o && (n = t, t = u[n]), r(t, n, u) }, e), e > -1 ? n[o ? o[e] : e] : T } } function mr(t) {
            return Me(function (n) {
                n = sn(n, 1); var r = n.length, e = r, u = zt.prototype.thru; for (t && n.reverse() ; e--;) {
                    var o = n[e]; if (typeof o != "function") throw new Au("Expected a function"); if (u && !i && "wrapper" == $r(o)) var i = new zt([], true);
                } for (e = i ? e : r; ++e < r;) var o = n[e], u = $r(o), f = "wrapper" == u ? Ro(o) : T, i = f && re(f[0]) && 424 == f[1] && !f[4].length && 1 == f[9] ? i[$r(f[0])].apply(i, f[3]) : 1 == o.length && re(o) ? i[u]() : i.thru(o); return function () { var t = arguments, e = t[0]; if (i && 1 == t.length && yi(e) && e.length >= 200) return i.plant(e).value(); for (var u = 0, t = r ? n[u].apply(this, t) : e; ++u < r;) t = n[u].call(this, t); return t }
            })
        } function Ar(t, n, r, e, u, o, i, f, c, a) {
            function l() {
                for (var d = arguments.length, y = Array(d), b = d; b--;) y[b] = arguments[b]; if (_) {
                    var x, j = Dr(l), b = y.length; for (x = 0; b--;) y[b] === j && x++;
                } if (e && (y = cr(y, e, u, _)), o && (y = ar(y, o, i, _)), d -= x, _ && a > d) return j = $(y, j), Br(t, n, Ar, l.placeholder, r, y, j, f, c, a - d); if (j = h ? r : this, b = p ? j[t] : t, d = y.length, f) { x = y.length; for (var w = to(f.length, x), m = lr(y) ; w--;) { var A = f[w]; y[w] = Xr(A, x) ? m[A] : T } } else v && d > 1 && y.reverse(); return s && d > c && (y.length = c), this && this !== Kt && this instanceof l && (b = g || xr(b)), b.apply(j, y)
            } var s = 128 & n, h = 1 & n, p = 2 & n, _ = 24 & n, v = 512 & n, g = p ? T : xr(t); return l
        } function Or(t, n) { return function (r, e) { return jn(r, t, n(e)) } } function kr(t) {
            return function (n, r) {
                var e;
                if (n === T && r === T) return 0; if (n !== T && (e = n), r !== T) { if (e === T) return r; typeof n == "string" || typeof r == "string" ? (n = Yn(n), r = Yn(r)) : (n = Jn(n), r = Jn(r)), e = t(n, r) } return e
            }
        } function Er(t) { return Me(function (n) { return n = 1 == n.length && yi(n[0]) ? l(n[0], O(Fr())) : l(sn(n, 1, Qr), O(Fr())), Me(function (e) { var u = this; return t(n, function (t) { return r(t, u, e) }) }) }) } function Sr(t, n) { n = n === T ? " " : Yn(n); var r = n.length; return 2 > r ? r ? Pn(n, t) : n : (r = Pn(n, Ku(t / N(n))), Wt.test(n) ? ur(r.match(It), 0, t).join("") : r.slice(0, t)) } function Ir(t, n, e, u) {
            function o() { for (var n = -1, c = arguments.length, a = -1, l = u.length, s = Array(l + c), h = this && this !== Kt && this instanceof o ? f : t; ++a < l;) s[a] = u[a]; for (; c--;) s[a++] = arguments[++n]; return r(h, i ? e : this, s) } var i = 1 & n, f = xr(t); return o
        } function Rr(t) { return function (n, r, e) { e && typeof e != "number" && te(n, r, e) && (r = e = T), n = nu(n), n = n === n ? n : 0, r === T ? (r = n, n = 0) : r = nu(r) || 0, e = e === T ? r > n ? 1 : -1 : nu(e) || 0; var u = -1; r = Xu(Ku((r - n) / (e || 1)), 0); for (var o = Array(r) ; r--;) o[t ? r : ++u] = n, n += e; return o } } function Wr(t) {
            return function (n, r) {
                return typeof n == "string" && typeof r == "string" || (n = nu(n),
                r = nu(r)), t(n, r)
            }
        } function Br(t, n, r, e, u, o, i, f, c, a) { var l = 8 & n, s = l ? i : T; i = l ? T : i; var h = l ? o : T; return o = l ? T : o, n = (n | (l ? 32 : 64)) & ~(l ? 64 : 32), 4 & n || (n &= -4), n = [t, n, u, h, s, o, i, f, c, a], r = r.apply(T, n), re(t) && Mo(r, n), r.placeholder = e, r } function Lr(t) { var n = wu[t]; return function (t, r) { if (t = nu(t), r = to(Xe(r), 292)) { var e = (eu(t) + "e").split("e"), e = n(e[0] + "e" + (+e[1] + r)), e = (eu(e) + "e").split("e"); return +(e[0] + "e" + (+e[1] - r)) } return n(t) } } function Mr(t) {
            return function (n) {
                var r = qr(n); return "[object Map]" == r ? U(n) : "[object Set]" == r ? F(n) : A(n, t(n));
            }
        } function Cr(t, n, r, e, u, o, i, f) {
            var c = 2 & n; if (!c && typeof t != "function") throw new Au("Expected a function"); var a = e ? e.length : 0; if (a || (n &= -97, e = u = T), i = i === T ? i : Xu(Xe(i), 0), f = f === T ? f : Xe(f), a -= u ? u.length : 0, 64 & n) { var l = e, s = u; e = u = T } var h = c ? T : Ro(t); return o = [t, n, r, e, u, l, s, o, i, f], h && (r = o[1], t = h[1], n = r | t, e = 128 == t && 8 == r || 128 == t && 256 == r && h[8] >= o[7].length || 384 == t && h[8] >= h[7].length && 8 == r, 131 > n || e) && (1 & t && (o[2] = h[2], n |= 1 & r ? 0 : 4), (r = h[3]) && (e = o[3], o[3] = e ? cr(e, r, h[4]) : r, o[4] = e ? $(o[3], "__lodash_placeholder__") : h[4]),
            (r = h[5]) && (e = o[5], o[5] = e ? ar(e, r, h[6]) : r, o[6] = e ? $(o[5], "__lodash_placeholder__") : h[6]), (r = h[7]) && (o[7] = r), 128 & t && (o[8] = null == o[8] ? h[8] : to(o[8], h[8])), null == o[9] && (o[9] = h[9]), o[0] = h[0], o[1] = n), t = o[0], n = o[1], r = o[2], e = o[3], u = o[4], f = o[9] = null == o[9] ? c ? 0 : t.length : Xu(o[9] - a, 0), !f && 24 & n && (n &= -25), (h ? So : Mo)(n && 1 != n ? 8 == n || 16 == n ? jr(t, n, f) : 32 != n && 33 != n || u.length ? Ar.apply(T, o) : Ir(t, n, r, e) : dr(t, n, r), o)
        } function zr(t, n, r, e, u, o) {
            var i = 2 & u, f = t.length, c = n.length; if (f != c && !(i && c > f)) return false; if (c = o.get(t)) return c == n;
            var c = -1, a = true, l = 1 & u ? new Zt : T; for (o.set(t, n) ; ++c < f;) { var s = t[c], h = n[c]; if (e) var p = i ? e(h, s, c, n, t, o) : e(s, h, c, t, n, o); if (p !== T) { if (p) continue; a = false; break } if (l) { if (!_(n, function (t, n) { return l.has(n) || s !== t && !r(s, t, e, u, o) ? void 0 : l.add(n) })) { a = false; break } } else if (s !== h && !r(s, h, e, u, o)) { a = false; break } } return o["delete"](t), a
        } function Ur(t, n, r, e, u, o, i) {
            switch (r) {
                case "[object DataView]": if (t.byteLength != n.byteLength || t.byteOffset != n.byteOffset) break; t = t.buffer, n = n.buffer; case "[object ArrayBuffer]": if (t.byteLength != n.byteLength || !e(new Fu(t), new Fu(n))) break;
                    return true; case "[object Boolean]": case "[object Date]": return +t == +n; case "[object Error]": return t.name == n.name && t.message == n.message; case "[object Number]": return t != +t ? n != +n : t == +n; case "[object RegExp]": case "[object String]": return t == n + ""; case "[object Map]": var f = U; case "[object Set]": if (f || (f = D), t.size != n.size && !(2 & o)) break; return (r = i.get(t)) ? r == n : (o |= 1, i.set(t, n), zr(f(t), f(n), e, u, o, i)); case "[object Symbol]": if (wo) return wo.call(t) == wo.call(n)
            } return false
        } function $r(t) {
            for (var n = t.name + "", r = _o[n], e = Wu.call(_o, n) ? r.length : 0; e--;) {
                var u = r[e], o = u.func; if (null == o || o == t) return u.name
            } return n
        } function Dr(t) { return (Wu.call(Ot, "placeholder") ? Ot : t).placeholder } function Fr() { var t = Ot.iteratee || _u, t = t === _u ? kn : t; return arguments.length ? t(arguments[0], arguments[1]) : t } function Nr(t, n) { var r = t.__data__, e = typeof n; return ("string" == e || "number" == e || "symbol" == e || "boolean" == e ? "__proto__" !== n : null === n) ? r[typeof n == "string" ? "string" : "hash"] : r.map } function Pr(t) {
            for (var n = iu(t), r = n.length; r--;) { var e = n[r], u = t[e]; n[r] = [e, u, u === u && !Ze(u)] } return n;
        } function Zr(t, n) { var r = null == t ? T : t[n]; return On(r) ? r : T } function Tr(t) { return Pu(Object(t)) } function qr(t) { return Mu.call(t) } function Vr(t, n, r) { n = ne(n, t) ? [n] : er(n); for (var e, u = -1, o = n.length; ++u < o;) { var i = fe(n[u]); if (!(e = null != t && r(t, i))) break; t = t[i] } return e ? e : (o = t ? t.length : 0, !!o && Pe(o) && Xr(i, o) && (yi(t) || Ge(t) || ze(t))) } function Kr(t) { var n = t.length, r = t.constructor(n); return n && "string" == typeof t[0] && Wu.call(t, "index") && (r.index = t.index, r.input = t.input), r } function Gr(t) {
            return typeof t.constructor != "function" || ee(t) ? {} : un(Ju(Object(t)));
        } function Jr(r, e, u, o) {
            var i = r.constructor; switch (e) {
                case "[object ArrayBuffer]": return ir(r); case "[object Boolean]": case "[object Date]": return new i(+r); case "[object DataView]": return e = o ? ir(r.buffer) : r.buffer, new r.constructor(e, r.byteOffset, r.byteLength); case "[object Float32Array]": case "[object Float64Array]": case "[object Int8Array]": case "[object Int16Array]": case "[object Int32Array]": case "[object Uint8Array]": case "[object Uint8ClampedArray]": case "[object Uint16Array]": case "[object Uint32Array]":
                    return e = o ? ir(r.buffer) : r.buffer, new r.constructor(e, r.byteOffset, r.length); case "[object Map]": return e = o ? u(U(r), true) : U(r), h(e, t, new r.constructor); case "[object Number]": case "[object String]": return new i(r); case "[object RegExp]": return e = new r.constructor(r.source, _t.exec(r)), e.lastIndex = r.lastIndex, e; case "[object Set]": return e = o ? u(D(r), true) : D(r), h(e, n, new r.constructor); case "[object Symbol]": return wo ? Object(wo.call(r)) : {}
            }
        } function Yr(t) {
            var n = t ? t.length : T; return Pe(n) && (yi(t) || Ge(t) || ze(t)) ? m(n, String) : null;
        } function Hr(t) { return yi(t) || ze(t) } function Qr(t) { return yi(t) && !(2 == t.length && !Fe(t[0])) } function Xr(t, n) { return n = null == n ? 9007199254740991 : n, !!n && (typeof t == "number" || xt.test(t)) && t > -1 && 0 == t % 1 && n > t } function te(t, n, r) { if (!Ze(r)) return false; var e = typeof n; return ("number" == e ? Ue(r) && Xr(n, r.length) : "string" == e && n in r) ? Ce(r[n], t) : false } function ne(t, n) { if (yi(t)) return false; var r = typeof t; return "number" == r || "symbol" == r || "boolean" == r || null == t || Je(t) ? true : ut.test(t) || !et.test(t) || null != n && t in Object(n) } function re(t) {
            var n = $r(t), r = Ot[n]; return typeof r == "function" && n in Ut.prototype ? t === r ? true : (n = Ro(r), !!n && t === n[0]) : false
        } function ee(t) { var n = t && t.constructor; return t === (typeof n == "function" && n.prototype || ku) } function ue(t, n) { return function (r) { return null == r ? false : r[t] === n && (n !== T || t in Object(r)) } } function oe(t, n, r, e, u, o) { return Ze(t) && Ze(n) && Bn(t, n, T, oe, o.set(n, t)), t } function ie(t, n) { return 1 == n.length ? t : vn(t, Tn(n, 0, -1)) } function fe(t) { if (typeof t == "string" || Je(t)) return t; var n = t + ""; return "0" == n && 1 / t == -q ? "-0" : n } function ce(t) {
            if (null != t) { try { return Ru.call(t) } catch (n) { } return t + "" } return ""
        } function ae(t) { if (t instanceof Ut) return t.clone(); var n = new zt(t.__wrapped__, t.__chain__); return n.__actions__ = lr(t.__actions__), n.__index__ = t.__index__, n.__values__ = t.__values__, n } function le(t, n, r) { var e = t ? t.length : 0; return e ? (n = r || n === T ? 1 : Xe(n), Tn(t, 0 > n ? 0 : n, e)) : [] } function se(t, n, r) { var e = t ? t.length : 0; return e ? (n = r || n === T ? 1 : Xe(n), n = e - n, Tn(t, 0, 0 > n ? 0 : n)) : [] } function he(t, n, r) {
            var e = t ? t.length : 0; return e ? (r = null == r ? 0 : Xe(r), 0 > r && (r = Xu(e + r, 0)),
            g(t, Fr(n, 3), r)) : -1
        } function pe(t, n, r) { var e = t ? t.length : 0; if (!e) return -1; var u = e - 1; return r !== T && (u = Xe(r), u = 0 > r ? Xu(e + u, 0) : to(u, e - 1)), g(t, Fr(n, 3), u, true) } function _e(t) { return t && t.length ? t[0] : T } function ve(t) { var n = t ? t.length : 0; return n ? t[n - 1] : T } function ge(t, n) { return t && t.length && n && n.length ? Dn(t, n) : t } function de(t) { return t ? uo.call(t) : t } function ye(t) { if (!t || !t.length) return []; var n = 0; return t = f(t, function (t) { return $e(t) ? (n = Xu(t.length, n), true) : void 0 }), m(n, function (n) { return l(t, Un(n)) }) } function be(t, n) {
            if (!t || !t.length) return []; var e = ye(t); return null == n ? e : l(e, function (t) { return r(n, T, t) })
        } function xe(t) { return t = Ot(t), t.__chain__ = true, t } function je(t, n) { return n(t) } function we() { return this } function me(t, n) { return (yi(t) ? u : Ao)(t, Fr(n, 3)) } function Ae(t, n) { return (yi(t) ? o : Oo)(t, Fr(n, 3)) } function Oe(t, n) { return (yi(t) ? l : In)(t, Fr(n, 3)) } function ke(t, n, r) { var e = -1, u = He(t), o = u.length, i = o - 1; for (n = (r ? te(t, n, r) : n === T) ? 1 : nn(Xe(n), 0, o) ; ++e < n;) t = Nn(e, i), r = u[t], u[t] = u[e], u[e] = r; return u.length = n, u } function Ee() {
            return xu.now()
        } function Se(t, n, r) { return n = r ? T : n, n = t && null == n ? t.length : n, Cr(t, 128, T, T, T, T, n) } function Ie(t, n) { var r; if (typeof n != "function") throw new Au("Expected a function"); return t = Xe(t), function () { return 0 < --t && (r = n.apply(this, arguments)), 1 >= t && (n = T), r } } function Re(t, n, r) { return n = r ? T : n, t = Cr(t, 8, T, T, T, T, T, n), t.placeholder = Re.placeholder, t } function We(t, n, r) { return n = r ? T : n, t = Cr(t, 16, T, T, T, T, T, n), t.placeholder = We.placeholder, t } function Be(t, n, r) {
            function e(n) {
                var r = c, e = a; return c = a = T, _ = n, s = t.apply(e, r);
            } function u(t) { var r = t - p; return t -= _, p === T || r >= n || 0 > r || g && t >= l } function o() { var t = Ee(); if (u(t)) return i(t); var r; r = t - _, t = n - (t - p), r = g ? to(t, l - r) : t, h = At(o, r) } function i(t) { return h = T, d && c ? e(t) : (c = a = T, s) } function f() { var t = Ee(), r = u(t); if (c = arguments, a = this, p = t, r) { if (h === T) return _ = t = p, h = At(o, n), v ? e(t) : s; if (g) return h = At(o, n), e(p) } return h === T && (h = At(o, n)), s } var c, a, l, s, h, p, _ = 0, v = false, g = false, d = true; if (typeof t != "function") throw new Au("Expected a function"); return n = nu(n) || 0, Ze(r) && (v = !!r.leading, l = (g = "maxWait" in r) ? Xu(nu(r.maxWait) || 0, n) : l,
            d = "trailing" in r ? !!r.trailing : d), f.cancel = function () { _ = 0, c = p = a = h = T }, f.flush = function () { return h === T ? s : i(Ee()) }, f
        } function Le(t, n) { function r() { var e = arguments, u = n ? n.apply(this, e) : e[0], o = r.cache; return o.has(u) ? o.get(u) : (e = t.apply(this, e), r.cache = o.set(u, e), e) } if (typeof t != "function" || n && typeof n != "function") throw new Au("Expected a function"); return r.cache = new (Le.Cache || Pt), r } function Me(t, n) {
            if (typeof t != "function") throw new Au("Expected a function"); return n = Xu(n === T ? t.length - 1 : Xe(n), 0), function () {
                for (var e = arguments, u = -1, o = Xu(e.length - n, 0), i = Array(o) ; ++u < o;) i[u] = e[n + u]; switch (n) { case 0: return t.call(this, i); case 1: return t.call(this, e[0], i); case 2: return t.call(this, e[0], e[1], i) } for (o = Array(n + 1), u = -1; ++u < n;) o[u] = e[u]; return o[n] = i, r(t, this, o)
            }
        } function Ce(t, n) { return t === n || t !== t && n !== n } function ze(t) { return $e(t) && Wu.call(t, "callee") && (!qu.call(t, "callee") || "[object Arguments]" == Mu.call(t)) } function Ue(t) { return null != t && Pe(Wo(t)) && !Fe(t) } function $e(t) { return Te(t) && Ue(t) } function De(t) {
            return Te(t) ? "[object Error]" == Mu.call(t) || typeof t.message == "string" && typeof t.name == "string" : false
        } function Fe(t) { return t = Ze(t) ? Mu.call(t) : "", "[object Function]" == t || "[object GeneratorFunction]" == t } function Ne(t) { return typeof t == "number" && t == Xe(t) } function Pe(t) { return typeof t == "number" && t > -1 && 0 == t % 1 && 9007199254740991 >= t } function Ze(t) { var n = typeof t; return !!t && ("object" == n || "function" == n) } function Te(t) { return !!t && typeof t == "object" } function qe(t) {
            return typeof t == "number" || Te(t) && "[object Number]" == Mu.call(t);
        } function Ve(t) { return !Te(t) || "[object Object]" != Mu.call(t) || C(t) ? false : (t = Ju(Object(t)), null === t ? true : (t = Wu.call(t, "constructor") && t.constructor, typeof t == "function" && t instanceof t && Ru.call(t) == Lu)) } function Ke(t) { return Ze(t) && "[object RegExp]" == Mu.call(t) } function Ge(t) { return typeof t == "string" || !yi(t) && Te(t) && "[object String]" == Mu.call(t) } function Je(t) { return typeof t == "symbol" || Te(t) && "[object Symbol]" == Mu.call(t) } function Ye(t) { return Te(t) && Pe(t.length) && !!Mt[Mu.call(t)] } function He(t) {
            if (!t) return [];
            if (Ue(t)) return Ge(t) ? t.match(It) : lr(t); if (Zu && t[Zu]) return z(t[Zu]()); var n = qr(t); return ("[object Map]" == n ? U : "[object Set]" == n ? D : cu)(t)
        } function Qe(t) { return t ? (t = nu(t), t === q || t === -q ? 1.7976931348623157e308 * (0 > t ? -1 : 1) : t === t ? t : 0) : 0 === t ? t : 0 } function Xe(t) { t = Qe(t); var n = t % 1; return t === t ? n ? t - n : t : 0 } function tu(t) { return t ? nn(Xe(t), 0, 4294967295) : 0 } function nu(t) {
            if (typeof t == "number") return t; if (Je(t)) return V; if (Ze(t) && (t = Fe(t.valueOf) ? t.valueOf() : t, t = Ze(t) ? t + "" : t), typeof t != "string") return 0 === t ? t : +t;
            t = t.replace(ct, ""); var n = dt.test(t); return n || bt.test(t) ? Nt(t.slice(2), n ? 2 : 8) : gt.test(t) ? V : +t
        } function ru(t) { return sr(t, fu(t)) } function eu(t) { return null == t ? "" : Yn(t) } function uu(t, n, r) { return t = null == t ? T : vn(t, n), t === T ? r : t } function ou(t, n) { return null != t && Vr(t, n, bn) } function iu(t) { var n = ee(t); if (!n && !Ue(t)) return Qu(Object(t)); var r, e = Yr(t), u = !!e, e = e || [], o = e.length; for (r in t) !yn(t, r) || u && ("length" == r || Xr(r, o)) || n && "constructor" == r || e.push(r); return e } function fu(t) {
            for (var n = -1, r = ee(t), e = En(t), u = e.length, o = Yr(t), i = !!o, o = o || [], f = o.length; ++n < u;) {
                var c = e[n]; i && ("length" == c || Xr(c, f)) || "constructor" == c && (r || !Wu.call(t, c)) || o.push(c)
            } return o
        } function cu(t) { return t ? k(t, iu(t)) : [] } function au(t) { return qi(eu(t).toLowerCase()) } function lu(t) { return (t = eu(t)) && t.replace(jt, W).replace(St, "") } function su(t, n, r) { return t = eu(t), n = r ? T : n, n === T && (n = Bt.test(t) ? Rt : st), t.match(n) || [] } function hu(t) { return function () { return t } } function pu(t) { return t } function _u(t) { return kn(typeof t == "function" ? t : rn(t, true)) } function vu(t, n, r) {
            var e = iu(n), o = _n(n, e); null != r || Ze(n) && (o.length || !e.length) || (r = n,
            n = t, t = this, o = _n(n, iu(n))); var i = !(Ze(r) && "chain" in r && !r.chain), f = Fe(t); return u(o, function (r) { var e = n[r]; t[r] = e, f && (t.prototype[r] = function () { var n = this.__chain__; if (i || n) { var r = t(this.__wrapped__); return (r.__actions__ = lr(this.__actions__)).push({ func: e, args: arguments, thisArg: t }), r.__chain__ = n, r } return e.apply(t, s([this.value()], arguments)) }) }), t
        } function gu() { } function du(t) { return ne(t) ? Un(fe(t)) : $n(t) } function yu() { return [] } function bu() { return false } R = R ? Gt.defaults({}, R, Gt.pick(Kt, Lt)) : Kt; var xu = R.Date, ju = R.Error, wu = R.Math, mu = R.RegExp, Au = R.TypeError, Ou = R.Array.prototype, ku = R.Object.prototype, Eu = R.String.prototype, Su = R["__core-js_shared__"], Iu = function () {
            var t = /[^.]+$/.exec(Su && Su.keys && Su.keys.IE_PROTO || ""); return t ? "Symbol(src)_1." + t : ""
        }(), Ru = R.Function.prototype.toString, Wu = ku.hasOwnProperty, Bu = 0, Lu = Ru.call(Object), Mu = ku.toString, Cu = Kt._, zu = mu("^" + Ru.call(Wu).replace(it, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"), Uu = Tt ? R.Buffer : T, $u = R.Reflect, Du = R.Symbol, Fu = R.Uint8Array, Nu = $u ? $u.f : T, Pu = Object.getOwnPropertySymbols, Zu = typeof (Zu = Du && Du.iterator) == "symbol" ? Zu : T, Tu = Object.create, qu = ku.propertyIsEnumerable, Vu = Ou.splice, Ku = wu.ceil, Gu = wu.floor, Ju = Object.getPrototypeOf, Yu = R.isFinite, Hu = Ou.join, Qu = Object.keys, Xu = wu.max, to = wu.min, no = R.parseInt, ro = wu.random, eo = Eu.replace, uo = Ou.reverse, oo = Eu.split, io = Zr(R, "DataView"), fo = Zr(R, "Map"), co = Zr(R, "Promise"), ao = Zr(R, "Set"), lo = Zr(R, "WeakMap"), so = Zr(Object, "create"), ho = lo && new lo, po = !qu.call({
            valueOf: 1
        }, "valueOf"), _o = {}, vo = ce(io), go = ce(fo), yo = ce(co), bo = ce(ao), xo = ce(lo), jo = Du ? Du.prototype : T, wo = jo ? jo.valueOf : T, mo = jo ? jo.toString : T; Ot.templateSettings = { escape: tt, evaluate: nt, interpolate: rt, variable: "", imports: { _: Ot } }, Ot.prototype = kt.prototype, Ot.prototype.constructor = Ot, zt.prototype = un(kt.prototype), zt.prototype.constructor = zt, Ut.prototype = un(kt.prototype), Ut.prototype.constructor = Ut, $t.prototype.clear = function () { this.__data__ = so ? so(null) : {} }, $t.prototype["delete"] = function (t) {
            return this.has(t) && delete this.__data__[t];
        }, $t.prototype.get = function (t) { var n = this.__data__; return so ? (t = n[t], "__lodash_hash_undefined__" === t ? T : t) : Wu.call(n, t) ? n[t] : T }, $t.prototype.has = function (t) { var n = this.__data__; return so ? n[t] !== T : Wu.call(n, t) }, $t.prototype.set = function (t, n) { return this.__data__[t] = so && n === T ? "__lodash_hash_undefined__" : n, this }, Dt.prototype.clear = function () { this.__data__ = [] }, Dt.prototype["delete"] = function (t) { var n = this.__data__; return t = Ht(n, t), 0 > t ? false : (t == n.length - 1 ? n.pop() : Vu.call(n, t, 1), true) }, Dt.prototype.get = function (t) {
            var n = this.__data__; return t = Ht(n, t), 0 > t ? T : n[t][1]
        }, Dt.prototype.has = function (t) { return -1 < Ht(this.__data__, t) }, Dt.prototype.set = function (t, n) { var r = this.__data__, e = Ht(r, t); return 0 > e ? r.push([t, n]) : r[e][1] = n, this }, Pt.prototype.clear = function () { this.__data__ = { hash: new $t, map: new (fo || Dt), string: new $t } }, Pt.prototype["delete"] = function (t) { return Nr(this, t)["delete"](t) }, Pt.prototype.get = function (t) { return Nr(this, t).get(t) }, Pt.prototype.has = function (t) { return Nr(this, t).has(t) }, Pt.prototype.set = function (t, n) {
            return Nr(this, t).set(t, n), this
        }, Zt.prototype.add = Zt.prototype.push = function (t) { return this.__data__.set(t, "__lodash_hash_undefined__"), this }, Zt.prototype.has = function (t) { return this.__data__.has(t) }, qt.prototype.clear = function () { this.__data__ = new Dt }, qt.prototype["delete"] = function (t) { return this.__data__["delete"](t) }, qt.prototype.get = function (t) { return this.__data__.get(t) }, qt.prototype.has = function (t) { return this.__data__.has(t) }, qt.prototype.set = function (t, n) {
            var r = this.__data__; return r instanceof Dt && 200 == r.__data__.length && (r = this.__data__ = new Pt(r.__data__)),
            r.set(t, n), this
        }; var Ao = vr(hn), Oo = vr(pn, true), ko = gr(), Eo = gr(true); Nu && !qu.call({ valueOf: 1 }, "valueOf") && (En = function (t) { return z(Nu(t)) }); var So = ho ? function (t, n) { return ho.set(t, n), t } : pu, Io = ao && 1 / D(new ao([, -0]))[1] == q ? function (t) { return new ao(t) } : gu, Ro = ho ? function (t) { return ho.get(t) } : gu, Wo = Un("length"); Pu || (Tr = yu); var Bo = Pu ? function (t) { for (var n = []; t;) s(n, Tr(t)), t = Ju(Object(t)); return n } : Tr; (io && "[object DataView]" != qr(new io(new ArrayBuffer(1))) || fo && "[object Map]" != qr(new fo) || co && "[object Promise]" != qr(co.resolve()) || ao && "[object Set]" != qr(new ao) || lo && "[object WeakMap]" != qr(new lo)) && (qr = function (t) {
            var n = Mu.call(t); if (t = (t = "[object Object]" == n ? t.constructor : T) ? ce(t) : T) switch (t) { case vo: return "[object DataView]"; case go: return "[object Map]"; case yo: return "[object Promise]"; case bo: return "[object Set]"; case xo: return "[object WeakMap]" } return n
        }); var Lo = Su ? Fe : bu, Mo = function () { var t = 0, n = 0; return function (r, e) { var u = Ee(), o = 16 - (u - n); if (n = u, o > 0) { if (150 <= ++t) return r } else t = 0; return So(r, e) } }(), Co = Le(function (t) {
            var n = []; return eu(t).replace(ot, function (t, r, e, u) { n.push(e ? u.replace(ht, "$1") : r || t) }),
            n
        }), zo = Me(function (t, n) { return $e(t) ? fn(t, sn(n, 1, $e, true)) : [] }), Uo = Me(function (t, n) { var r = ve(n); return $e(r) && (r = T), $e(t) ? fn(t, sn(n, 1, $e, true), Fr(r)) : [] }), $o = Me(function (t, n) { var r = ve(n); return $e(r) && (r = T), $e(t) ? fn(t, sn(n, 1, $e, true), T, r) : [] }), Do = Me(function (t) { var n = l(t, rr); return n.length && n[0] === t[0] ? xn(n) : [] }), Fo = Me(function (t) { var n = ve(t), r = l(t, rr); return n === ve(r) ? n = T : r.pop(), r.length && r[0] === t[0] ? xn(r, Fr(n)) : [] }), No = Me(function (t) {
            var n = ve(t), r = l(t, rr); return n === ve(r) ? n = T : r.pop(), r.length && r[0] === t[0] ? xn(r, T, n) : [];
        }), Po = Me(ge), Zo = Me(function (t, n) { n = sn(n, 1); var r = t ? t.length : 0, e = tn(t, n); return Fn(t, l(n, function (t) { return Xr(t, r) ? +t : t }).sort(fr)), e }), To = Me(function (t) { return Hn(sn(t, 1, $e, true)) }), qo = Me(function (t) { var n = ve(t); return $e(n) && (n = T), Hn(sn(t, 1, $e, true), Fr(n)) }), Vo = Me(function (t) { var n = ve(t); return $e(n) && (n = T), Hn(sn(t, 1, $e, true), T, n) }), Ko = Me(function (t, n) { return $e(t) ? fn(t, n) : [] }), Go = Me(function (t) { return tr(f(t, $e)) }), Jo = Me(function (t) { var n = ve(t); return $e(n) && (n = T), tr(f(t, $e), Fr(n)) }), Yo = Me(function (t) {
            var n = ve(t); return $e(n) && (n = T), tr(f(t, $e), T, n)
        }), Ho = Me(ye), Qo = Me(function (t) { var n = t.length, n = n > 1 ? t[n - 1] : T, n = typeof n == "function" ? (t.pop(), n) : T; return be(t, n) }), Xo = Me(function (t) { function n(n) { return tn(n, t) } t = sn(t, 1); var r = t.length, e = r ? t[0] : 0, u = this.__wrapped__; return !(r > 1 || this.__actions__.length) && u instanceof Ut && Xr(e) ? (u = u.slice(e, +e + (r ? 1 : 0)), u.__actions__.push({ func: je, args: [n], thisArg: T }), new zt(u, this.__chain__).thru(function (t) { return r && !t.length && t.push(T), t })) : this.thru(n) }), ti = pr(function (t, n, r) {
            Wu.call(t, r) ? ++t[r] : t[r] = 1
        }), ni = wr(he), ri = wr(pe), ei = pr(function (t, n, r) { Wu.call(t, r) ? t[r].push(n) : t[r] = [n] }), ui = Me(function (t, n, e) { var u = -1, o = typeof n == "function", i = ne(n), f = Ue(t) ? Array(t.length) : []; return Ao(t, function (t) { var c = o ? n : i && null != t ? t[n] : T; f[++u] = c ? r(c, t, e) : wn(t, n, e) }), f }), oi = pr(function (t, n, r) { t[r] = n }), ii = pr(function (t, n, r) { t[r ? 0 : 1].push(n) }, function () { return [[], []] }), fi = Me(function (t, n) {
            if (null == t) return []; var r = n.length; return r > 1 && te(t, n[0], n[1]) ? n = [] : r > 2 && te(n[0], n[1], n[2]) && (n = [n[0]]),
            n = 1 == n.length && yi(n[0]) ? n[0] : sn(n, 1, Qr), Mn(t, n, [])
        }), ci = Me(function (t, n, r) { var e = 1; if (r.length) var u = $(r, Dr(ci)), e = 32 | e; return Cr(t, e, n, r, u) }), ai = Me(function (t, n, r) { var e = 3; if (r.length) var u = $(r, Dr(ai)), e = 32 | e; return Cr(n, e, t, r, u) }), li = Me(function (t, n) { return on(t, 1, n) }), si = Me(function (t, n, r) { return on(t, nu(n) || 0, r) }); Le.Cache = Pt; var hi = Me(function (t, n) {
            n = 1 == n.length && yi(n[0]) ? l(n[0], O(Fr())) : l(sn(n, 1, Qr), O(Fr())); var e = n.length; return Me(function (u) {
                for (var o = -1, i = to(u.length, e) ; ++o < i;) u[o] = n[o].call(this, u[o]);
                return r(t, this, u)
            })
        }), pi = Me(function (t, n) { var r = $(n, Dr(pi)); return Cr(t, 32, T, n, r) }), _i = Me(function (t, n) { var r = $(n, Dr(_i)); return Cr(t, 64, T, n, r) }), vi = Me(function (t, n) { return Cr(t, 256, T, T, T, sn(n, 1)) }), gi = Wr(dn), di = Wr(function (t, n) { return t >= n }), yi = Array.isArray, bi = Uu ? function (t) { return t instanceof Uu } : bu, xi = Wr(Sn), ji = Wr(function (t, n) { return n >= t }), wi = _r(function (t, n) { if (po || ee(n) || Ue(n)) sr(n, iu(n), t); else for (var r in n) Wu.call(n, r) && Yt(t, r, n[r]) }), mi = _r(function (t, n) {
            if (po || ee(n) || Ue(n)) sr(n, fu(n), t); else for (var r in n) Yt(t, r, n[r]);
        }), Ai = _r(function (t, n, r, e) { sr(n, fu(n), t, e) }), Oi = _r(function (t, n, r, e) { sr(n, iu(n), t, e) }), ki = Me(function (t, n) { return tn(t, sn(n, 1)) }), Ei = Me(function (t) { return t.push(T, Vt), r(Ai, T, t) }), Si = Me(function (t) { return t.push(T, oe), r(Li, T, t) }), Ii = Or(function (t, n, r) { t[n] = r }, hu(pu)), Ri = Or(function (t, n, r) { Wu.call(t, n) ? t[n].push(r) : t[n] = [r] }, Fr), Wi = Me(wn), Bi = _r(function (t, n, r) { Bn(t, n, r) }), Li = _r(function (t, n, r, e) { Bn(t, n, r, e) }), Mi = Me(function (t, n) { return null == t ? {} : (n = l(sn(n, 1), fe), Cn(t, fn(gn(t, fu, Bo), n))) }), Ci = Me(function (t, n) {
            return null == t ? {} : Cn(t, l(sn(n, 1), fe))
        }), zi = Mr(iu), Ui = Mr(fu), $i = br(function (t, n, r) { return n = n.toLowerCase(), t + (r ? au(n) : n) }), Di = br(function (t, n, r) { return t + (r ? "-" : "") + n.toLowerCase() }), Fi = br(function (t, n, r) { return t + (r ? " " : "") + n.toLowerCase() }), Ni = yr("toLowerCase"), Pi = br(function (t, n, r) { return t + (r ? "_" : "") + n.toLowerCase() }), Zi = br(function (t, n, r) { return t + (r ? " " : "") + qi(n) }), Ti = br(function (t, n, r) { return t + (r ? " " : "") + n.toUpperCase() }), qi = yr("toUpperCase"), Vi = Me(function (t, n) {
            try { return r(t, T, n) } catch (e) {
                return De(e) ? e : new ju(e)
            }
        }), Ki = Me(function (t, n) { return u(sn(n, 1), function (n) { n = fe(n), t[n] = ci(t[n], t) }), t }), Gi = mr(), Ji = mr(true), Yi = Me(function (t, n) { return function (r) { return wn(r, t, n) } }), Hi = Me(function (t, n) { return function (r) { return wn(t, r, n) } }), Qi = Er(l), Xi = Er(i), tf = Er(_), nf = Rr(), rf = Rr(true), ef = kr(function (t, n) { return t + n }), uf = Lr("ceil"), of = kr(function (t, n) { return t / n }), ff = Lr("floor"), cf = kr(function (t, n) { return t * n }), af = Lr("round"), lf = kr(function (t, n) { return t - n }); return Ot.after = function (t, n) {
            if (typeof n != "function") throw new Au("Expected a function");
            return t = Xe(t), function () { return 1 > --t ? n.apply(this, arguments) : void 0 }
        }, Ot.ary = Se, Ot.assign = wi, Ot.assignIn = mi, Ot.assignInWith = Ai, Ot.assignWith = Oi, Ot.at = ki, Ot.before = Ie, Ot.bind = ci, Ot.bindAll = Ki, Ot.bindKey = ai, Ot.castArray = function () { if (!arguments.length) return []; var t = arguments[0]; return yi(t) ? t : [t] }, Ot.chain = xe, Ot.chunk = function (t, n, r) { if (n = (r ? te(t, n, r) : n === T) ? 1 : Xu(Xe(n), 0), r = t ? t.length : 0, !r || 1 > n) return []; for (var e = 0, u = 0, o = Array(Ku(r / n)) ; r > e;) o[u++] = Tn(t, e, e += n); return o }, Ot.compact = function (t) {
            for (var n = -1, r = t ? t.length : 0, e = 0, u = []; ++n < r;) {
                var o = t[n]; o && (u[e++] = o)
            } return u
        }, Ot.concat = function () { for (var t = arguments.length, n = Array(t ? t - 1 : 0), r = arguments[0], e = t; e--;) n[e - 1] = arguments[e]; return t ? s(yi(r) ? lr(r) : [r], sn(n, 1)) : [] }, Ot.cond = function (t) { var n = t ? t.length : 0, e = Fr(); return t = n ? l(t, function (t) { if ("function" != typeof t[1]) throw new Au("Expected a function"); return [e(t[0]), t[1]] }) : [], Me(function (e) { for (var u = -1; ++u < n;) { var o = t[u]; if (r(o[0], this, e)) return r(o[1], this, e) } }) }, Ot.conforms = function (t) { return en(rn(t, true)) }, Ot.constant = hu, Ot.countBy = ti,
        Ot.create = function (t, n) { var r = un(t); return n ? Xt(r, n) : r }, Ot.curry = Re, Ot.curryRight = We, Ot.debounce = Be, Ot.defaults = Ei, Ot.defaultsDeep = Si, Ot.defer = li, Ot.delay = si, Ot.difference = zo, Ot.differenceBy = Uo, Ot.differenceWith = $o, Ot.drop = le, Ot.dropRight = se, Ot.dropRightWhile = function (t, n) { return t && t.length ? Qn(t, Fr(n, 3), true, true) : [] }, Ot.dropWhile = function (t, n) { return t && t.length ? Qn(t, Fr(n, 3), true) : [] }, Ot.fill = function (t, n, r, e) {
            var u = t ? t.length : 0; if (!u) return []; for (r && typeof r != "number" && te(t, n, r) && (r = 0, e = u), u = t.length,
            r = Xe(r), 0 > r && (r = -r > u ? 0 : u + r), e = e === T || e > u ? u : Xe(e), 0 > e && (e += u), e = r > e ? 0 : tu(e) ; e > r;) t[r++] = n; return t
        }, Ot.filter = function (t, n) { return (yi(t) ? f : ln)(t, Fr(n, 3)) }, Ot.flatMap = function (t, n) { return sn(Oe(t, n), 1) }, Ot.flatMapDeep = function (t, n) { return sn(Oe(t, n), q) }, Ot.flatMapDepth = function (t, n, r) { return r = r === T ? 1 : Xe(r), sn(Oe(t, n), r) }, Ot.flatten = function (t) { return t && t.length ? sn(t, 1) : [] }, Ot.flattenDeep = function (t) { return t && t.length ? sn(t, q) : [] }, Ot.flattenDepth = function (t, n) {
            return t && t.length ? (n = n === T ? 1 : Xe(n), sn(t, n)) : [];
        }, Ot.flip = function (t) { return Cr(t, 512) }, Ot.flow = Gi, Ot.flowRight = Ji, Ot.fromPairs = function (t) { for (var n = -1, r = t ? t.length : 0, e = {}; ++n < r;) { var u = t[n]; e[u[0]] = u[1] } return e }, Ot.functions = function (t) { return null == t ? [] : _n(t, iu(t)) }, Ot.functionsIn = function (t) { return null == t ? [] : _n(t, fu(t)) }, Ot.groupBy = ei, Ot.initial = function (t) { return se(t, 1) }, Ot.intersection = Do, Ot.intersectionBy = Fo, Ot.intersectionWith = No, Ot.invert = Ii, Ot.invertBy = Ri, Ot.invokeMap = ui, Ot.iteratee = _u, Ot.keyBy = oi, Ot.keys = iu, Ot.keysIn = fu, Ot.map = Oe,
        Ot.mapKeys = function (t, n) { var r = {}; return n = Fr(n, 3), hn(t, function (t, e, u) { r[n(t, e, u)] = t }), r }, Ot.mapValues = function (t, n) { var r = {}; return n = Fr(n, 3), hn(t, function (t, e, u) { r[e] = n(t, e, u) }), r }, Ot.matches = function (t) { return Rn(rn(t, true)) }, Ot.matchesProperty = function (t, n) { return Wn(t, rn(n, true)) }, Ot.memoize = Le, Ot.merge = Bi, Ot.mergeWith = Li, Ot.method = Yi, Ot.methodOf = Hi, Ot.mixin = vu, Ot.negate = function (t) { if (typeof t != "function") throw new Au("Expected a function"); return function () { return !t.apply(this, arguments) } }, Ot.nthArg = function (t) {
            return t = Xe(t), Me(function (n) { return Ln(n, t) })
        }, Ot.omit = Mi, Ot.omitBy = function (t, n) { return n = Fr(n), zn(t, function (t, r) { return !n(t, r) }) }, Ot.once = function (t) { return Ie(2, t) }, Ot.orderBy = function (t, n, r, e) { return null == t ? [] : (yi(n) || (n = null == n ? [] : [n]), r = e ? T : r, yi(r) || (r = null == r ? [] : [r]), Mn(t, n, r)) }, Ot.over = Qi, Ot.overArgs = hi, Ot.overEvery = Xi, Ot.overSome = tf, Ot.partial = pi, Ot.partialRight = _i, Ot.partition = ii, Ot.pick = Ci, Ot.pickBy = function (t, n) { return null == t ? {} : zn(t, Fr(n)) }, Ot.property = du, Ot.propertyOf = function (t) {
            return function (n) { return null == t ? T : vn(t, n) }
        }, Ot.pull = Po, Ot.pullAll = ge, Ot.pullAllBy = function (t, n, r) { return t && t.length && n && n.length ? Dn(t, n, Fr(r)) : t }, Ot.pullAllWith = function (t, n, r) { return t && t.length && n && n.length ? Dn(t, n, T, r) : t }, Ot.pullAt = Zo, Ot.range = nf, Ot.rangeRight = rf, Ot.rearg = vi, Ot.reject = function (t, n) { var r = yi(t) ? f : ln; return n = Fr(n, 3), r(t, function (t, r, e) { return !n(t, r, e) }) }, Ot.remove = function (t, n) {
            var r = []; if (!t || !t.length) return r; var e = -1, u = [], o = t.length; for (n = Fr(n, 3) ; ++e < o;) {
                var i = t[e]; n(i, e, t) && (r.push(i),
                u.push(e))
            } return Fn(t, u), r
        }, Ot.rest = Me, Ot.reverse = de, Ot.sampleSize = ke, Ot.set = function (t, n, r) { return null == t ? t : Zn(t, n, r) }, Ot.setWith = function (t, n, r, e) { return e = typeof e == "function" ? e : T, null == t ? t : Zn(t, n, r, e) }, Ot.shuffle = function (t) { return ke(t, 4294967295) }, Ot.slice = function (t, n, r) { var e = t ? t.length : 0; return e ? (r && typeof r != "number" && te(t, n, r) ? (n = 0, r = e) : (n = null == n ? 0 : Xe(n), r = r === T ? e : Xe(r)), Tn(t, n, r)) : [] }, Ot.sortBy = fi, Ot.sortedUniq = function (t) { return t && t.length ? Gn(t) : [] }, Ot.sortedUniqBy = function (t, n) {
            return t && t.length ? Gn(t, Fr(n)) : []
        }, Ot.split = function (t, n, r) { return r && typeof r != "number" && te(t, n, r) && (n = r = T), r = r === T ? 4294967295 : r >>> 0, r ? (t = eu(t)) && (typeof n == "string" || null != n && !Ke(n)) && (n = Yn(n), "" == n && Wt.test(t)) ? ur(t.match(It), 0, r) : oo.call(t, n, r) : [] }, Ot.spread = function (t, n) { if (typeof t != "function") throw new Au("Expected a function"); return n = n === T ? 0 : Xu(Xe(n), 0), Me(function (e) { var u = e[n]; return e = ur(e, 0, n), u && s(e, u), r(t, this, e) }) }, Ot.tail = function (t) { return le(t, 1) }, Ot.take = function (t, n, r) {
            return t && t.length ? (n = r || n === T ? 1 : Xe(n),
            Tn(t, 0, 0 > n ? 0 : n)) : []
        }, Ot.takeRight = function (t, n, r) { var e = t ? t.length : 0; return e ? (n = r || n === T ? 1 : Xe(n), n = e - n, Tn(t, 0 > n ? 0 : n, e)) : [] }, Ot.takeRightWhile = function (t, n) { return t && t.length ? Qn(t, Fr(n, 3), false, true) : [] }, Ot.takeWhile = function (t, n) { return t && t.length ? Qn(t, Fr(n, 3)) : [] }, Ot.tap = function (t, n) { return n(t), t }, Ot.throttle = function (t, n, r) {
            var e = true, u = true; if (typeof t != "function") throw new Au("Expected a function"); return Ze(r) && (e = "leading" in r ? !!r.leading : e, u = "trailing" in r ? !!r.trailing : u), Be(t, n, {
                leading: e, maxWait: n,
                trailing: u
            })
        }, Ot.thru = je, Ot.toArray = He, Ot.toPairs = zi, Ot.toPairsIn = Ui, Ot.toPath = function (t) { return yi(t) ? l(t, fe) : Je(t) ? [t] : lr(Co(t)) }, Ot.toPlainObject = ru, Ot.transform = function (t, n, r) { var e = yi(t) || Ye(t); if (n = Fr(n, 4), null == r) if (e || Ze(t)) { var o = t.constructor; r = e ? yi(t) ? new o : [] : Fe(o) ? un(Ju(Object(t))) : {} } else r = {}; return (e ? u : hn)(t, function (t, e, u) { return n(r, t, e, u) }), r }, Ot.unary = function (t) { return Se(t, 1) }, Ot.union = To, Ot.unionBy = qo, Ot.unionWith = Vo, Ot.uniq = function (t) { return t && t.length ? Hn(t) : [] }, Ot.uniqBy = function (t, n) {
            return t && t.length ? Hn(t, Fr(n)) : []
        }, Ot.uniqWith = function (t, n) { return t && t.length ? Hn(t, T, n) : [] }, Ot.unset = function (t, n) { var r; if (null == t) r = true; else { r = t; var e = n, e = ne(e, r) ? [e] : er(e); r = ie(r, e), e = fe(ve(e)), r = !(null != r && yn(r, e)) || delete r[e] } return r }, Ot.unzip = ye, Ot.unzipWith = be, Ot.update = function (t, n, r) { return null == t ? t : Zn(t, n, (typeof r == "function" ? r : pu)(vn(t, n)), void 0) }, Ot.updateWith = function (t, n, r, e) { return e = typeof e == "function" ? e : T, null != t && (t = Zn(t, n, (typeof r == "function" ? r : pu)(vn(t, n)), e)), t }, Ot.values = cu,
        Ot.valuesIn = function (t) { return null == t ? [] : k(t, fu(t)) }, Ot.without = Ko, Ot.words = su, Ot.wrap = function (t, n) { return n = null == n ? pu : n, pi(n, t) }, Ot.xor = Go, Ot.xorBy = Jo, Ot.xorWith = Yo, Ot.zip = Ho, Ot.zipObject = function (t, n) { return nr(t || [], n || [], Yt) }, Ot.zipObjectDeep = function (t, n) { return nr(t || [], n || [], Zn) }, Ot.zipWith = Qo, Ot.entries = zi, Ot.entriesIn = Ui, Ot.extend = mi, Ot.extendWith = Ai, vu(Ot, Ot), Ot.add = ef, Ot.attempt = Vi, Ot.camelCase = $i, Ot.capitalize = au, Ot.ceil = uf, Ot.clamp = function (t, n, r) {
            return r === T && (r = n, n = T), r !== T && (r = nu(r),
            r = r === r ? r : 0), n !== T && (n = nu(n), n = n === n ? n : 0), nn(nu(t), n, r)
        }, Ot.clone = function (t) { return rn(t, false, true) }, Ot.cloneDeep = function (t) { return rn(t, true, true) }, Ot.cloneDeepWith = function (t, n) { return rn(t, true, true, n) }, Ot.cloneWith = function (t, n) { return rn(t, false, true, n) }, Ot.deburr = lu, Ot.divide = of, Ot.endsWith = function (t, n, r) { t = eu(t), n = Yn(n); var e = t.length; return r = r === T ? e : nn(Xe(r), 0, e), r -= n.length, r >= 0 && t.indexOf(n, r) == r }, Ot.eq = Ce, Ot.escape = function (t) { return (t = eu(t)) && X.test(t) ? t.replace(H, B) : t }, Ot.escapeRegExp = function (t) {
            return (t = eu(t)) && ft.test(t) ? t.replace(it, "\\$&") : t
        }, Ot.every = function (t, n, r) { var e = yi(t) ? i : cn; return r && te(t, n, r) && (n = T), e(t, Fr(n, 3)) }, Ot.find = ni, Ot.findIndex = he, Ot.findKey = function (t, n) { return v(t, Fr(n, 3), hn) }, Ot.findLast = ri, Ot.findLastIndex = pe, Ot.findLastKey = function (t, n) { return v(t, Fr(n, 3), pn) }, Ot.floor = ff, Ot.forEach = me, Ot.forEachRight = Ae, Ot.forIn = function (t, n) { return null == t ? t : ko(t, Fr(n, 3), fu) }, Ot.forInRight = function (t, n) { return null == t ? t : Eo(t, Fr(n, 3), fu) }, Ot.forOwn = function (t, n) {
            return t && hn(t, Fr(n, 3));
        }, Ot.forOwnRight = function (t, n) { return t && pn(t, Fr(n, 3)) }, Ot.get = uu, Ot.gt = gi, Ot.gte = di, Ot.has = function (t, n) { return null != t && Vr(t, n, yn) }, Ot.hasIn = ou, Ot.head = _e, Ot.identity = pu, Ot.includes = function (t, n, r, e) { return t = Ue(t) ? t : cu(t), r = r && !e ? Xe(r) : 0, e = t.length, 0 > r && (r = Xu(e + r, 0)), Ge(t) ? e >= r && -1 < t.indexOf(n, r) : !!e && -1 < d(t, n, r) }, Ot.indexOf = function (t, n, r) { var e = t ? t.length : 0; return e ? (r = null == r ? 0 : Xe(r), 0 > r && (r = Xu(e + r, 0)), d(t, n, r)) : -1 }, Ot.inRange = function (t, n, r) {
            return n = nu(n) || 0, r === T ? (r = n, n = 0) : r = nu(r) || 0, t = nu(t),
            t >= to(n, r) && t < Xu(n, r)
        }, Ot.invoke = Wi, Ot.isArguments = ze, Ot.isArray = yi, Ot.isArrayBuffer = function (t) { return Te(t) && "[object ArrayBuffer]" == Mu.call(t) }, Ot.isArrayLike = Ue, Ot.isArrayLikeObject = $e, Ot.isBoolean = function (t) { return true === t || false === t || Te(t) && "[object Boolean]" == Mu.call(t) }, Ot.isBuffer = bi, Ot.isDate = function (t) { return Te(t) && "[object Date]" == Mu.call(t) }, Ot.isElement = function (t) { return !!t && 1 === t.nodeType && Te(t) && !Ve(t) }, Ot.isEmpty = function (t) {
            if (Ue(t) && (yi(t) || Ge(t) || Fe(t.splice) || ze(t) || bi(t))) return !t.length;
            if (Te(t)) { var n = qr(t); if ("[object Map]" == n || "[object Set]" == n) return !t.size } for (var r in t) if (Wu.call(t, r)) return false; return !(po && iu(t).length)
        }, Ot.isEqual = function (t, n) { return mn(t, n) }, Ot.isEqualWith = function (t, n, r) { var e = (r = typeof r == "function" ? r : T) ? r(t, n) : T; return e === T ? mn(t, n, r) : !!e }, Ot.isError = De, Ot.isFinite = function (t) { return typeof t == "number" && Yu(t) }, Ot.isFunction = Fe, Ot.isInteger = Ne, Ot.isLength = Pe, Ot.isMap = function (t) { return Te(t) && "[object Map]" == qr(t) }, Ot.isMatch = function (t, n) {
            return t === n || An(t, n, Pr(n));
        }, Ot.isMatchWith = function (t, n, r) { return r = typeof r == "function" ? r : T, An(t, n, Pr(n), r) }, Ot.isNaN = function (t) { return qe(t) && t != +t }, Ot.isNative = function (t) { if (Lo(t)) throw new ju("This method is not supported with `core-js`. Try https://github.com/es-shims."); return On(t) }, Ot.isNil = function (t) { return null == t }, Ot.isNull = function (t) { return null === t }, Ot.isNumber = qe, Ot.isObject = Ze, Ot.isObjectLike = Te, Ot.isPlainObject = Ve, Ot.isRegExp = Ke, Ot.isSafeInteger = function (t) {
            return Ne(t) && t >= -9007199254740991 && 9007199254740991 >= t;
        }, Ot.isSet = function (t) { return Te(t) && "[object Set]" == qr(t) }, Ot.isString = Ge, Ot.isSymbol = Je, Ot.isTypedArray = Ye, Ot.isUndefined = function (t) { return t === T }, Ot.isWeakMap = function (t) { return Te(t) && "[object WeakMap]" == qr(t) }, Ot.isWeakSet = function (t) { return Te(t) && "[object WeakSet]" == Mu.call(t) }, Ot.join = function (t, n) { return t ? Hu.call(t, n) : "" }, Ot.kebabCase = Di, Ot.last = ve, Ot.lastIndexOf = function (t, n, r) {
            var e = t ? t.length : 0; if (!e) return -1; var u = e; if (r !== T && (u = Xe(r), u = (0 > u ? Xu(e + u, 0) : to(u, e - 1)) + 1), n !== n) return M(t, u - 1, true);
            for (; u--;) if (t[u] === n) return u; return -1
        }, Ot.lowerCase = Fi, Ot.lowerFirst = Ni, Ot.lt = xi, Ot.lte = ji, Ot.max = function (t) { return t && t.length ? an(t, pu, dn) : T }, Ot.maxBy = function (t, n) { return t && t.length ? an(t, Fr(n), dn) : T }, Ot.mean = function (t) { return b(t, pu) }, Ot.meanBy = function (t, n) { return b(t, Fr(n)) }, Ot.min = function (t) { return t && t.length ? an(t, pu, Sn) : T }, Ot.minBy = function (t, n) { return t && t.length ? an(t, Fr(n), Sn) : T }, Ot.stubArray = yu, Ot.stubFalse = bu, Ot.stubObject = function () { return {} }, Ot.stubString = function () { return "" }, Ot.stubTrue = function () {
            return true
        }, Ot.multiply = cf, Ot.nth = function (t, n) { return t && t.length ? Ln(t, Xe(n)) : T }, Ot.noConflict = function () { return Kt._ === this && (Kt._ = Cu), this }, Ot.noop = gu, Ot.now = Ee, Ot.pad = function (t, n, r) { t = eu(t); var e = (n = Xe(n)) ? N(t) : 0; return !n || e >= n ? t : (n = (n - e) / 2, Sr(Gu(n), r) + t + Sr(Ku(n), r)) }, Ot.padEnd = function (t, n, r) { t = eu(t); var e = (n = Xe(n)) ? N(t) : 0; return n && n > e ? t + Sr(n - e, r) : t }, Ot.padStart = function (t, n, r) { t = eu(t); var e = (n = Xe(n)) ? N(t) : 0; return n && n > e ? Sr(n - e, r) + t : t }, Ot.parseInt = function (t, n, r) {
            return r || null == n ? n = 0 : n && (n = +n),
            t = eu(t).replace(ct, ""), no(t, n || (vt.test(t) ? 16 : 10))
        }, Ot.random = function (t, n, r) { if (r && typeof r != "boolean" && te(t, n, r) && (n = r = T), r === T && (typeof n == "boolean" ? (r = n, n = T) : typeof t == "boolean" && (r = t, t = T)), t === T && n === T ? (t = 0, n = 1) : (t = nu(t) || 0, n === T ? (n = t, t = 0) : n = nu(n) || 0), t > n) { var e = t; t = n, n = e } return r || t % 1 || n % 1 ? (r = ro(), to(t + r * (n - t + Ft("1e-" + ((r + "").length - 1))), n)) : Nn(t, n) }, Ot.reduce = function (t, n, r) { var e = yi(t) ? h : x, u = 3 > arguments.length; return e(t, Fr(n, 4), r, u, Ao) }, Ot.reduceRight = function (t, n, r) {
            var e = yi(t) ? p : x, u = 3 > arguments.length;
            return e(t, Fr(n, 4), r, u, Oo)
        }, Ot.repeat = function (t, n, r) { return n = (r ? te(t, n, r) : n === T) ? 1 : Xe(n), Pn(eu(t), n) }, Ot.replace = function () { var t = arguments, n = eu(t[0]); return 3 > t.length ? n : eo.call(n, t[1], t[2]) }, Ot.result = function (t, n, r) { n = ne(n, t) ? [n] : er(n); var e = -1, u = n.length; for (u || (t = T, u = 1) ; ++e < u;) { var o = null == t ? T : t[fe(n[e])]; o === T && (e = u, o = r), t = Fe(o) ? o.call(t) : o } return t }, Ot.round = af, Ot.runInContext = Z, Ot.sample = function (t) { t = Ue(t) ? t : cu(t); var n = t.length; return n > 0 ? t[Nn(0, n - 1)] : T }, Ot.size = function (t) {
            if (null == t) return 0;
            if (Ue(t)) { var n = t.length; return n && Ge(t) ? N(t) : n } return Te(t) && (n = qr(t), "[object Map]" == n || "[object Set]" == n) ? t.size : iu(t).length
        }, Ot.snakeCase = Pi, Ot.some = function (t, n, r) { var e = yi(t) ? _ : qn; return r && te(t, n, r) && (n = T), e(t, Fr(n, 3)) }, Ot.sortedIndex = function (t, n) { return Vn(t, n) }, Ot.sortedIndexBy = function (t, n, r) { return Kn(t, n, Fr(r)) }, Ot.sortedIndexOf = function (t, n) { var r = t ? t.length : 0; if (r) { var e = Vn(t, n); if (r > e && Ce(t[e], n)) return e } return -1 }, Ot.sortedLastIndex = function (t, n) { return Vn(t, n, true) }, Ot.sortedLastIndexBy = function (t, n, r) {
            return Kn(t, n, Fr(r), true)
        }, Ot.sortedLastIndexOf = function (t, n) { if (t && t.length) { var r = Vn(t, n, true) - 1; if (Ce(t[r], n)) return r } return -1 }, Ot.startCase = Zi, Ot.startsWith = function (t, n, r) { return t = eu(t), r = nn(Xe(r), 0, t.length), t.lastIndexOf(Yn(n), r) == r }, Ot.subtract = lf, Ot.sum = function (t) { return t && t.length ? w(t, pu) : 0 }, Ot.sumBy = function (t, n) { return t && t.length ? w(t, Fr(n)) : 0 }, Ot.template = function (t, n, r) {
            var e = Ot.templateSettings; r && te(t, n, r) && (n = T), t = eu(t), n = Ai({}, n, e, Vt), r = Ai({}, n.imports, e.imports, Vt); var u, o, i = iu(r), f = k(r, i), c = 0;
            r = n.interpolate || wt; var a = "__p+='"; r = mu((n.escape || wt).source + "|" + r.source + "|" + (r === rt ? pt : wt).source + "|" + (n.evaluate || wt).source + "|$", "g"); var l = "sourceURL" in n ? "//# sourceURL=" + n.sourceURL + "\n" : ""; if (t.replace(r, function (n, r, e, i, f, l) { return e || (e = i), a += t.slice(c, l).replace(mt, L), r && (u = true, a += "'+__e(" + r + ")+'"), f && (o = true, a += "';" + f + ";\n__p+='"), e && (a += "'+((__t=(" + e + "))==null?'':__t)+'"), c = l + n.length, n }), a += "';", (n = n.variable) || (a = "with(obj){" + a + "}"), a = (o ? a.replace(K, "") : a).replace(G, "$1").replace(J, "$1;"),
            a = "function(" + (n || "obj") + "){" + (n ? "" : "obj||(obj={});") + "var __t,__p=''" + (u ? ",__e=_.escape" : "") + (o ? ",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}" : ";") + a + "return __p}", n = Vi(function () { return Function(i, l + "return " + a).apply(T, f) }), n.source = a, De(n)) throw n; return n
        }, Ot.times = function (t, n) { if (t = Xe(t), 1 > t || t > 9007199254740991) return []; var r = 4294967295, e = to(t, 4294967295); for (n = Fr(n), t -= 4294967295, e = m(e, n) ; ++r < t;) n(r); return e }, Ot.toFinite = Qe, Ot.toInteger = Xe, Ot.toLength = tu, Ot.toLower = function (t) {
            return eu(t).toLowerCase()
        }, Ot.toNumber = nu, Ot.toSafeInteger = function (t) { return nn(Xe(t), -9007199254740991, 9007199254740991) }, Ot.toString = eu, Ot.toUpper = function (t) { return eu(t).toUpperCase() }, Ot.trim = function (t, n, r) { return (t = eu(t)) && (r || n === T) ? t.replace(ct, "") : t && (n = Yn(n)) ? (t = t.match(It), n = n.match(It), ur(t, S(t, n), I(t, n) + 1).join("")) : t }, Ot.trimEnd = function (t, n, r) { return (t = eu(t)) && (r || n === T) ? t.replace(lt, "") : t && (n = Yn(n)) ? (t = t.match(It), n = I(t, n.match(It)) + 1, ur(t, 0, n).join("")) : t }, Ot.trimStart = function (t, n, r) {
            return (t = eu(t)) && (r || n === T) ? t.replace(at, "") : t && (n = Yn(n)) ? (t = t.match(It), n = S(t, n.match(It)), ur(t, n).join("")) : t
        }, Ot.truncate = function (t, n) {
            var r = 30, e = "..."; if (Ze(n)) var u = "separator" in n ? n.separator : u, r = "length" in n ? Xe(n.length) : r, e = "omission" in n ? Yn(n.omission) : e; t = eu(t); var o = t.length; if (Wt.test(t)) var i = t.match(It), o = i.length; if (r >= o) return t; if (o = r - N(e), 1 > o) return e; if (r = i ? ur(i, 0, o).join("") : t.slice(0, o), u === T) return r + e; if (i && (o += r.length - o), Ke(u)) {
                if (t.slice(o).search(u)) {
                    var f = r; for (u.global || (u = mu(u.source, eu(_t.exec(u)) + "g")),
                    u.lastIndex = 0; i = u.exec(f) ;) var c = i.index; r = r.slice(0, c === T ? o : c)
                }
            } else t.indexOf(Yn(u), o) != o && (u = r.lastIndexOf(u), u > -1 && (r = r.slice(0, u))); return r + e
        }, Ot.unescape = function (t) { return (t = eu(t)) && Q.test(t) ? t.replace(Y, P) : t }, Ot.uniqueId = function (t) { var n = ++Bu; return eu(t) + n }, Ot.upperCase = Ti, Ot.upperFirst = qi, Ot.each = me, Ot.eachRight = Ae, Ot.first = _e, vu(Ot, function () { var t = {}; return hn(Ot, function (n, r) { Wu.call(Ot.prototype, r) || (t[r] = n) }), t }(), { chain: false }), Ot.VERSION = "4.13.1", u("bind bindKey curry curryRight partial partialRight".split(" "), function (t) {
            Ot[t].placeholder = Ot
        }), u(["drop", "take"], function (t, n) { Ut.prototype[t] = function (r) { var e = this.__filtered__; if (e && !n) return new Ut(this); r = r === T ? 1 : Xu(Xe(r), 0); var u = this.clone(); return e ? u.__takeCount__ = to(r, u.__takeCount__) : u.__views__.push({ size: to(r, 4294967295), type: t + (0 > u.__dir__ ? "Right" : "") }), u }, Ut.prototype[t + "Right"] = function (n) { return this.reverse()[t](n).reverse() } }), u(["filter", "map", "takeWhile"], function (t, n) {
            var r = n + 1, e = 1 == r || 3 == r; Ut.prototype[t] = function (t) {
                var n = this.clone(); return n.__iteratees__.push({
                    iteratee: Fr(t, 3), type: r
                }), n.__filtered__ = n.__filtered__ || e, n
            }
        }), u(["head", "last"], function (t, n) { var r = "take" + (n ? "Right" : ""); Ut.prototype[t] = function () { return this[r](1).value()[0] } }), u(["initial", "tail"], function (t, n) { var r = "drop" + (n ? "" : "Right"); Ut.prototype[t] = function () { return this.__filtered__ ? new Ut(this) : this[r](1) } }), Ut.prototype.compact = function () { return this.filter(pu) }, Ut.prototype.find = function (t) { return this.filter(t).head() }, Ut.prototype.findLast = function (t) {
            return this.reverse().find(t);
        }, Ut.prototype.invokeMap = Me(function (t, n) { return typeof t == "function" ? new Ut(this) : this.map(function (r) { return wn(r, t, n) }) }), Ut.prototype.reject = function (t) { return t = Fr(t, 3), this.filter(function (n) { return !t(n) }) }, Ut.prototype.slice = function (t, n) { t = Xe(t); var r = this; return r.__filtered__ && (t > 0 || 0 > n) ? new Ut(r) : (0 > t ? r = r.takeRight(-t) : t && (r = r.drop(t)), n !== T && (n = Xe(n), r = 0 > n ? r.dropRight(-n) : r.take(n - t)), r) }, Ut.prototype.takeRightWhile = function (t) { return this.reverse().takeWhile(t).reverse() }, Ut.prototype.toArray = function () {
            return this.take(4294967295)
        }, hn(Ut.prototype, function (t, n) {
            var r = /^(?:filter|find|map|reject)|While$/.test(n), e = /^(?:head|last)$/.test(n), u = Ot[e ? "take" + ("last" == n ? "Right" : "") : n], o = e || /^find/.test(n); u && (Ot.prototype[n] = function () {
                function n(t) { return t = u.apply(Ot, s([t], f)), e && h ? t[0] : t } var i = this.__wrapped__, f = e ? [1] : arguments, c = i instanceof Ut, a = f[0], l = c || yi(i); l && r && typeof a == "function" && 1 != a.length && (c = l = false); var h = this.__chain__, p = !!this.__actions__.length, a = o && !h, c = c && !p; return !o && l ? (i = c ? i : new Ut(this),
                i = t.apply(i, f), i.__actions__.push({ func: je, args: [n], thisArg: T }), new zt(i, h)) : a && c ? t.apply(this, f) : (i = this.thru(n), a ? e ? i.value()[0] : i.value() : i)
            })
        }), u("pop push shift sort splice unshift".split(" "), function (t) { var n = Ou[t], r = /^(?:push|sort|unshift)$/.test(t) ? "tap" : "thru", e = /^(?:pop|shift)$/.test(t); Ot.prototype[t] = function () { var t = arguments; if (e && !this.__chain__) { var u = this.value(); return n.apply(yi(u) ? u : [], t) } return this[r](function (r) { return n.apply(yi(r) ? r : [], t) }) } }), hn(Ut.prototype, function (t, n) {
            var r = Ot[n]; if (r) { var e = r.name + ""; (_o[e] || (_o[e] = [])).push({ name: n, func: r }) }
        }), _o[Ar(T, 2).name] = [{ name: "wrapper", func: T }], Ut.prototype.clone = function () { var t = new Ut(this.__wrapped__); return t.__actions__ = lr(this.__actions__), t.__dir__ = this.__dir__, t.__filtered__ = this.__filtered__, t.__iteratees__ = lr(this.__iteratees__), t.__takeCount__ = this.__takeCount__, t.__views__ = lr(this.__views__), t }, Ut.prototype.reverse = function () {
            if (this.__filtered__) { var t = new Ut(this); t.__dir__ = -1, t.__filtered__ = true } else t = this.clone(),
            t.__dir__ *= -1; return t
        }, Ut.prototype.value = function () {
            var t, n = this.__wrapped__.value(), r = this.__dir__, e = yi(n), u = 0 > r, o = e ? n.length : 0; t = o; for (var i = this.__views__, f = 0, c = -1, a = i.length; ++c < a;) { var l = i[c], s = l.size; switch (l.type) { case "drop": f += s; break; case "dropRight": t -= s; break; case "take": t = to(t, f + s); break; case "takeRight": f = Xu(f, t - s) } } if (t = { start: f, end: t }, i = t.start, f = t.end, t = f - i, u = u ? f : i - 1, i = this.__iteratees__, f = i.length, c = 0, a = to(t, this.__takeCount__), !e || 200 > o || o == t && a == t) return Xn(n, this.__actions__); e = [];
            t: for (; t-- && a > c;) { for (u += r, o = -1, l = n[u]; ++o < f;) { var h = i[o], s = h.type, h = (0, h.iteratee)(l); if (2 == s) l = h; else if (!h) { if (1 == s) continue t; break t } } e[c++] = l } return e
        }, Ot.prototype.at = Xo, Ot.prototype.chain = function () { return xe(this) }, Ot.prototype.commit = function () { return new zt(this.value(), this.__chain__) }, Ot.prototype.next = function () { this.__values__ === T && (this.__values__ = He(this.value())); var t = this.__index__ >= this.__values__.length, n = t ? T : this.__values__[this.__index__++]; return { done: t, value: n } }, Ot.prototype.plant = function (t) {
            for (var n, r = this; r instanceof kt;) { var e = ae(r); e.__index__ = 0, e.__values__ = T, n ? u.__wrapped__ = e : n = e; var u = e, r = r.__wrapped__ } return u.__wrapped__ = t, n
        }, Ot.prototype.reverse = function () { var t = this.__wrapped__; return t instanceof Ut ? (this.__actions__.length && (t = new Ut(this)), t = t.reverse(), t.__actions__.push({ func: je, args: [de], thisArg: T }), new zt(t, this.__chain__)) : this.thru(de) }, Ot.prototype.toJSON = Ot.prototype.valueOf = Ot.prototype.value = function () { return Xn(this.__wrapped__, this.__actions__) }, Zu && (Ot.prototype[Zu] = we),
        Ot
    } var T, q = 1 / 0, V = NaN, K = /\b__p\+='';/g, G = /\b(__p\+=)''\+/g, J = /(__e\(.*?\)|\b__t\))\+'';/g, Y = /&(?:amp|lt|gt|quot|#39|#96);/g, H = /[&<>"'`]/g, Q = RegExp(Y.source), X = RegExp(H.source), tt = /<%-([\s\S]+?)%>/g, nt = /<%([\s\S]+?)%>/g, rt = /<%=([\s\S]+?)%>/g, et = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, ut = /^\w*$/, ot = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(\.|\[\])(?:\4|$))/g, it = /[\\^$.*+?()[\]{}|]/g, ft = RegExp(it.source), ct = /^\s+|\s+$/g, at = /^\s+/, lt = /\s+$/, st = /[a-zA-Z0-9]+/g, ht = /\\(\\)?/g, pt = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g, _t = /\w*$/, vt = /^0x/i, gt = /^[-+]0x[0-9a-f]+$/i, dt = /^0b[01]+$/i, yt = /^\[object .+?Constructor\]$/, bt = /^0o[0-7]+$/i, xt = /^(?:0|[1-9]\d*)$/, jt = /[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g, wt = /($^)/, mt = /['\n\r\u2028\u2029\\]/g, At = "[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?)*", Ot = "(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])" + At, kt = "(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]?|[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])", Et = RegExp("['\u2019]", "g"), St = RegExp("[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]", "g"), It = RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|" + kt + At, "g"), Rt = RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['\u2019](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?|\\d+", Ot].join("|"), "g"), Wt = RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"), Bt = /[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/, Lt = "Array Buffer DataView Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Promise Reflect RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ isFinite parseInt setTimeout".split(" "), Mt = {};
    Mt["[object Float32Array]"] = Mt["[object Float64Array]"] = Mt["[object Int8Array]"] = Mt["[object Int16Array]"] = Mt["[object Int32Array]"] = Mt["[object Uint8Array]"] = Mt["[object Uint8ClampedArray]"] = Mt["[object Uint16Array]"] = Mt["[object Uint32Array]"] = true, Mt["[object Arguments]"] = Mt["[object Array]"] = Mt["[object ArrayBuffer]"] = Mt["[object Boolean]"] = Mt["[object DataView]"] = Mt["[object Date]"] = Mt["[object Error]"] = Mt["[object Function]"] = Mt["[object Map]"] = Mt["[object Number]"] = Mt["[object Object]"] = Mt["[object RegExp]"] = Mt["[object Set]"] = Mt["[object String]"] = Mt["[object WeakMap]"] = false;
    var Ct = {}; Ct["[object Arguments]"] = Ct["[object Array]"] = Ct["[object ArrayBuffer]"] = Ct["[object DataView]"] = Ct["[object Boolean]"] = Ct["[object Date]"] = Ct["[object Float32Array]"] = Ct["[object Float64Array]"] = Ct["[object Int8Array]"] = Ct["[object Int16Array]"] = Ct["[object Int32Array]"] = Ct["[object Map]"] = Ct["[object Number]"] = Ct["[object Object]"] = Ct["[object RegExp]"] = Ct["[object Set]"] = Ct["[object String]"] = Ct["[object Symbol]"] = Ct["[object Uint8Array]"] = Ct["[object Uint8ClampedArray]"] = Ct["[object Uint16Array]"] = Ct["[object Uint32Array]"] = true,
    Ct["[object Error]"] = Ct["[object Function]"] = Ct["[object WeakMap]"] = false; var zt = {
        "\xc0": "A", "\xc1": "A", "\xc2": "A", "\xc3": "A", "\xc4": "A", "\xc5": "A", "\xe0": "a", "\xe1": "a", "\xe2": "a", "\xe3": "a", "\xe4": "a", "\xe5": "a", "\xc7": "C", "\xe7": "c", "\xd0": "D", "\xf0": "d", "\xc8": "E", "\xc9": "E", "\xca": "E", "\xcb": "E", "\xe8": "e", "\xe9": "e", "\xea": "e", "\xeb": "e", "\xcc": "I", "\xcd": "I", "\xce": "I", "\xcf": "I", "\xec": "i", "\xed": "i", "\xee": "i", "\xef": "i", "\xd1": "N", "\xf1": "n", "\xd2": "O", "\xd3": "O", "\xd4": "O", "\xd5": "O", "\xd6": "O",
        "\xd8": "O", "\xf2": "o", "\xf3": "o", "\xf4": "o", "\xf5": "o", "\xf6": "o", "\xf8": "o", "\xd9": "U", "\xda": "U", "\xdb": "U", "\xdc": "U", "\xf9": "u", "\xfa": "u", "\xfb": "u", "\xfc": "u", "\xdd": "Y", "\xfd": "y", "\xff": "y", "\xc6": "Ae", "\xe6": "ae", "\xde": "Th", "\xfe": "th", "\xdf": "ss"
    }, Ut = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;", "`": "&#96;" }, $t = { "&amp;": "&", "&lt;": "<", "&gt;": ">", "&quot;": '"', "&#39;": "'", "&#96;": "`" }, Dt = { "\\": "\\", "'": "'", "\n": "n", "\r": "r", "\u2028": "u2028", "\u2029": "u2029" }, Ft = parseFloat, Nt = parseInt, Pt = typeof exports == "object" && exports, Zt = Pt && typeof module == "object" && module, Tt = Zt && Zt.exports === Pt, qt = R(typeof self == "object" && self), Vt = R(typeof this == "object" && this), Kt = R(typeof global == "object" && global) || qt || Vt || Function("return this")(), Gt = Z();
    (qt || {})._ = Gt, typeof define == "function" && typeof define.amd == "object" && define.amd ? define(function () { return Gt }) : Zt ? ((Zt.exports = Gt)._ = Gt, Pt._ = Gt) : Kt._ = Gt
}).call(this);;
/*!
 * Vue.js v2.1.10
 * (c) 2014-2017 Evan You
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Vue=t()}(this,function(){"use strict";function e(e){return null==e?"":"object"==typeof e?JSON.stringify(e,null,2):String(e)}function t(e){var t=parseFloat(e);return isNaN(t)?e:t}function n(e,t){for(var n=Object.create(null),r=e.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}function r(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}function i(e,t){return ii.call(e,t)}function o(e){return"string"==typeof e||"number"==typeof e}function a(e){var t=Object.create(null);return function(n){var r=t[n];return r||(t[n]=e(n))}}function s(e,t){function n(n){var r=arguments.length;return r?r>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n}function c(e,t){t=t||0;for(var n=e.length-t,r=new Array(n);n--;)r[n]=e[n+t];return r}function u(e,t){for(var n in t)e[n]=t[n];return e}function l(e){return null!==e&&"object"==typeof e}function f(e){return li.call(e)===fi}function p(e){for(var t={},n=0;n<e.length;n++)e[n]&&u(t,e[n]);return t}function d(){}function v(e){return e.reduce(function(e,t){return e.concat(t.staticKeys||[])},[]).join(",")}function h(e,t){var n=l(e),r=l(t);return n&&r?JSON.stringify(e)===JSON.stringify(t):!n&&!r&&String(e)===String(t)}function m(e,t){for(var n=0;n<e.length;n++)if(h(e[n],t))return n;return-1}function g(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function y(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}function _(e){if(!hi.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}function b(e){return/native code/.test(e.toString())}function $(e){Ei.target&&Ii.push(Ei.target),Ei.target=e}function w(){Ei.target=Ii.pop()}function C(e,t){e.__proto__=t}function x(e,t,n){for(var r=0,i=n.length;r<i;r++){var o=n[r];y(e,o,t[o])}}function k(e,t){if(l(e)){var n;return i(e,"__ob__")&&e.__ob__ instanceof Di?n=e.__ob__:Mi.shouldConvert&&!xi()&&(Array.isArray(e)||f(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new Di(e)),t&&n&&n.vmCount++,n}}function A(e,t,n,r){var i=new Ei,o=Object.getOwnPropertyDescriptor(e,t);if(!o||o.configurable!==!1){var a=o&&o.get,s=o&&o.set,c=k(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=a?a.call(e):n;return Ei.target&&(i.depend(),c&&c.dep.depend(),Array.isArray(t)&&T(t)),t},set:function(t){var r=a?a.call(e):n;t===r||t!==t&&r!==r||(s?s.call(e,t):n=t,c=k(t),i.notify())}})}}function O(e,t,n){if(Array.isArray(e))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(i(e,t))return void(e[t]=n);var r=e.__ob__;if(!(e._isVue||r&&r.vmCount))return r?(A(r.value,t,n),r.dep.notify(),n):void(e[t]=n)}function S(e,t){var n=e.__ob__;e._isVue||n&&n.vmCount||i(e,t)&&(delete e[t],n&&n.dep.notify())}function T(e){for(var t=void 0,n=0,r=e.length;n<r;n++)t=e[n],t&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&T(t)}function E(e,t){if(!t)return e;for(var n,r,o,a=Object.keys(t),s=0;s<a.length;s++)n=a[s],r=e[n],o=t[n],i(e,n)?f(r)&&f(o)&&E(r,o):O(e,n,o);return e}function I(e,t){return t?e?e.concat(t):Array.isArray(t)?t:[t]:e}function j(e,t){var n=Object.create(e||null);return t?u(n,t):n}function N(e){var t=e.props;if(t){var n,r,i,o={};if(Array.isArray(t))for(n=t.length;n--;)r=t[n],"string"==typeof r&&(i=ai(r),o[i]={type:null});else if(f(t))for(var a in t)r=t[a],i=ai(a),o[i]=f(r)?r:{type:r};e.props=o}}function L(e){var t=e.directives;if(t)for(var n in t){var r=t[n];"function"==typeof r&&(t[n]={bind:r,update:r})}}function M(e,t,n){function r(r){var i=Pi[r]||Ri;l[r]=i(e[r],t[r],n,r)}N(t),L(t);var o=t.extends;if(o&&(e="function"==typeof o?M(e,o.options,n):M(e,o,n)),t.mixins)for(var a=0,s=t.mixins.length;a<s;a++){var c=t.mixins[a];c.prototype instanceof Ue&&(c=c.options),e=M(e,c,n)}var u,l={};for(u in e)r(u);for(u in t)i(e,u)||r(u);return l}function D(e,t,n,r){if("string"==typeof n){var o=e[t];if(i(o,n))return o[n];var a=ai(n);if(i(o,a))return o[a];var s=si(a);if(i(o,s))return o[s];var c=o[n]||o[a]||o[s];return c}}function P(e,t,n,r){var o=t[e],a=!i(n,e),s=n[e];if(H(Boolean,o.type)&&(a&&!i(o,"default")?s=!1:H(String,o.type)||""!==s&&s!==ui(e)||(s=!0)),void 0===s){s=R(r,o,e);var c=Mi.shouldConvert;Mi.shouldConvert=!0,k(s),Mi.shouldConvert=c}return s}function R(e,t,n){if(i(t,"default")){var r=t.default;return l(r),e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e[n]?e[n]:"function"==typeof r&&t.type!==Function?r.call(e):r}}function F(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t&&t[1]}function H(e,t){if(!Array.isArray(t))return F(t)===F(e);for(var n=0,r=t.length;n<r;n++)if(F(t[n])===F(e))return!0;return!1}function U(e){return new Hi(void 0,void 0,void 0,String(e))}function B(e){var t=new Hi(e.tag,e.data,e.children,e.text,e.elm,e.context,e.componentOptions);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isCloned=!0,t}function z(e){for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=B(e[n]);return t}function V(e,t,n,r,i){if(e){var o=n.$options._base;if(l(e)&&(e=o.extend(e)),"function"==typeof e){if(!e.cid)if(e.resolved)e=e.resolved;else if(e=Y(e,o,function(){n.$forceUpdate()}),!e)return;He(e),t=t||{};var a=Q(t,e);if(e.options.functional)return J(e,a,t,n,r);var s=t.on;t.on=t.nativeOn,e.options.abstract&&(t={}),ee(t);var c=e.options.name||i,u=new Hi("vue-component-"+e.cid+(c?"-"+c:""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:a,listeners:s,tag:i,children:r});return u}}}function J(e,t,n,r,i){var o={},a=e.options.props;if(a)for(var s in a)o[s]=P(s,a,t);var c=Object.create(r),u=function(e,t,n,r){return ue(c,e,t,n,r,!0)},l=e.options.render.call(null,u,{props:o,data:n,parent:r,children:i,slots:function(){return ve(i,r)}});return l instanceof Hi&&(l.functionalContext=r,n.slot&&((l.data||(l.data={})).slot=n.slot)),l}function K(e,t,n,r){var i=e.componentOptions,o={_isComponent:!0,parent:t,propsData:i.propsData,_componentTag:i.tag,_parentVnode:e,_parentListeners:i.listeners,_renderChildren:i.children,_parentElm:n||null,_refElm:r||null},a=e.data.inlineTemplate;return a&&(o.render=a.render,o.staticRenderFns=a.staticRenderFns),new i.Ctor(o)}function q(e,t,n,r){if(!e.componentInstance||e.componentInstance._isDestroyed){var i=e.componentInstance=K(e,Zi,n,r);i.$mount(t?e.elm:void 0,t)}else if(e.data.keepAlive){var o=e;W(o,o)}}function W(e,t){var n=t.componentOptions,r=t.componentInstance=e.componentInstance;r._updateFromParent(n.propsData,n.listeners,t,n.children)}function Z(e){e.componentInstance._isMounted||(e.componentInstance._isMounted=!0,we(e.componentInstance,"mounted")),e.data.keepAlive&&(e.componentInstance._inactive=!1,we(e.componentInstance,"activated"))}function G(e){e.componentInstance._isDestroyed||(e.data.keepAlive?(e.componentInstance._inactive=!0,we(e.componentInstance,"deactivated")):e.componentInstance.$destroy())}function Y(e,t,n){if(!e.requested){e.requested=!0;var r=e.pendingCallbacks=[n],i=!0,o=function(n){if(l(n)&&(n=t.extend(n)),e.resolved=n,!i)for(var o=0,a=r.length;o<a;o++)r[o](n)},a=function(e){},s=e(o,a);return s&&"function"==typeof s.then&&!e.resolved&&s.then(o,a),i=!1,e.resolved}e.pendingCallbacks.push(n)}function Q(e,t){var n=t.options.props;if(n){var r={},i=e.attrs,o=e.props,a=e.domProps;if(i||o||a)for(var s in n){var c=ui(s);X(r,o,s,c,!0)||X(r,i,s,c)||X(r,a,s,c)}return r}}function X(e,t,n,r,o){if(t){if(i(t,n))return e[n]=t[n],o||delete t[n],!0;if(i(t,r))return e[n]=t[r],o||delete t[r],!0}return!1}function ee(e){e.hook||(e.hook={});for(var t=0;t<Ji.length;t++){var n=Ji[t],r=e.hook[n],i=Vi[n];e.hook[n]=r?te(i,r):i}}function te(e,t){return function(n,r,i,o){e(n,r,i,o),t(n,r,i,o)}}function ne(e,t,n,r){r+=t;var i=e.__injected||(e.__injected={});if(!i[r]){i[r]=!0;var o=e[t];o?e[t]=function(){o.apply(this,arguments),n.apply(this,arguments)}:e[t]=n}}function re(e){var t={fn:e,invoker:function(){var e=arguments,n=t.fn;if(Array.isArray(n))for(var r=0;r<n.length;r++)n[r].apply(null,e);else n.apply(null,arguments)}};return t}function ie(e,t,n,r,i){var o,a,s,c;for(o in e)a=e[o],s=t[o],c=Ki(o),a&&(s?a!==s&&(s.fn=a,e[o]=s):(a.invoker||(a=e[o]=re(a)),n(c.name,a.invoker,c.once,c.capture)));for(o in t)e[o]||(c=Ki(o),r(c.name,t[o].invoker,c.capture))}function oe(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}function ae(e){return o(e)?[U(e)]:Array.isArray(e)?se(e):void 0}function se(e,t){var n,r,i,a=[];for(n=0;n<e.length;n++)r=e[n],null!=r&&"boolean"!=typeof r&&(i=a[a.length-1],Array.isArray(r)?a.push.apply(a,se(r,(t||"")+"_"+n)):o(r)?i&&i.text?i.text+=String(r):""!==r&&a.push(U(r)):r.text&&i&&i.text?a[a.length-1]=U(i.text+r.text):(r.tag&&null==r.key&&null!=t&&(r.key="__vlist"+t+"_"+n+"__"),a.push(r)));return a}function ce(e){return e&&e.filter(function(e){return e&&e.componentOptions})[0]}function ue(e,t,n,r,i,a){return(Array.isArray(n)||o(n))&&(i=r,r=n,n=void 0),a&&(i=Wi),le(e,t,n,r,i)}function le(e,t,n,r,i){if(n&&n.__ob__)return zi();if(!t)return zi();Array.isArray(r)&&"function"==typeof r[0]&&(n=n||{},n.scopedSlots={default:r[0]},r.length=0),i===Wi?r=ae(r):i===qi&&(r=oe(r));var o,a;if("string"==typeof t){var s;a=vi.getTagNamespace(t),o=vi.isReservedTag(t)?new Hi(vi.parsePlatformTagName(t),n,r,void 0,void 0,e):(s=D(e.$options,"components",t))?V(s,n,e,r,t):new Hi(t,n,r,void 0,void 0,e)}else o=V(t,n,e,r);return o?(a&&fe(o,a),o):zi()}function fe(e,t){if(e.ns=t,"foreignObject"!==e.tag&&e.children)for(var n=0,r=e.children.length;n<r;n++){var i=e.children[n];i.tag&&!i.ns&&fe(i,t)}}function pe(e){e.$vnode=null,e._vnode=null,e._staticTrees=null;var t=e.$options._parentVnode,n=t&&t.context;e.$slots=ve(e.$options._renderChildren,n),e.$scopedSlots={},e._c=function(t,n,r,i){return ue(e,t,n,r,i,!1)},e.$createElement=function(t,n,r,i){return ue(e,t,n,r,i,!0)}}function de(n){function r(e,t,n){if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]&&"string"!=typeof e[r]&&i(e[r],t+"_"+r,n);else i(e,t,n)}function i(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}n.prototype.$nextTick=function(e){return Ai(e,this)},n.prototype._render=function(){var e=this,t=e.$options,n=t.render,r=t.staticRenderFns,i=t._parentVnode;if(e._isMounted)for(var o in e.$slots)e.$slots[o]=z(e.$slots[o]);i&&i.data.scopedSlots&&(e.$scopedSlots=i.data.scopedSlots),r&&!e._staticTrees&&(e._staticTrees=[]),e.$vnode=i;var a;try{a=n.call(e._renderProxy,e.$createElement)}catch(t){if(!vi.errorHandler)throw t;vi.errorHandler.call(null,t,e),a=e._vnode}return a instanceof Hi||(a=zi()),a.parent=i,a},n.prototype._s=e,n.prototype._v=U,n.prototype._n=t,n.prototype._e=zi,n.prototype._q=h,n.prototype._i=m,n.prototype._m=function(e,t){var n=this._staticTrees[e];return n&&!t?Array.isArray(n)?z(n):B(n):(n=this._staticTrees[e]=this.$options.staticRenderFns[e].call(this._renderProxy),r(n,"__static__"+e,!1),n)},n.prototype._o=function(e,t,n){return r(e,"__once__"+t+(n?"_"+n:""),!0),e},n.prototype._f=function(e){return D(this.$options,"filters",e,!0)||di},n.prototype._l=function(e,t){var n,r,i,o,a;if(Array.isArray(e)||"string"==typeof e)for(n=new Array(e.length),r=0,i=e.length;r<i;r++)n[r]=t(e[r],r);else if("number"==typeof e)for(n=new Array(e),r=0;r<e;r++)n[r]=t(r+1,r);else if(l(e))for(o=Object.keys(e),n=new Array(o.length),r=0,i=o.length;r<i;r++)a=o[r],n[r]=t(e[a],a,r);return n},n.prototype._t=function(e,t,n,r){var i=this.$scopedSlots[e];if(i)return n=n||{},r&&u(n,r),i(n)||t;var o=this.$slots[e];return o||t},n.prototype._b=function(e,t,n,r){if(n)if(l(n)){Array.isArray(n)&&(n=p(n));for(var i in n)if("class"===i||"style"===i)e[i]=n[i];else{var o=e.attrs&&e.attrs.type,a=r||vi.mustUseProp(t,o,i)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={});a[i]=n[i]}}else;return e},n.prototype._k=function(e,t,n){var r=vi.keyCodes[t]||n;return Array.isArray(r)?r.indexOf(e)===-1:r!==e}}function ve(e,t){var n={};if(!e)return n;for(var r,i,o=[],a=0,s=e.length;a<s;a++)if(i=e[a],(i.context===t||i.functionalContext===t)&&i.data&&(r=i.data.slot)){var c=n[r]||(n[r]=[]);"template"===i.tag?c.push.apply(c,i.children):c.push(i)}else o.push(i);return o.length&&(1!==o.length||" "!==o[0].text&&!o[0].isComment)&&(n.default=o),n}function he(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&ye(e,t)}function me(e,t,n){n?Bi.$once(e,t):Bi.$on(e,t)}function ge(e,t){Bi.$off(e,t)}function ye(e,t,n){Bi=e,ie(t,n||{},me,ge,e)}function _e(e){var t=/^hook:/;e.prototype.$on=function(e,n){var r=this;return(r._events[e]||(r._events[e]=[])).push(n),t.test(e)&&(r._hasHookEvent=!0),r},e.prototype.$once=function(e,t){function n(){r.$off(e,n),t.apply(r,arguments)}var r=this;return n.fn=t,r.$on(e,n),r},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;var r=n._events[e];if(!r)return n;if(1===arguments.length)return n._events[e]=null,n;for(var i,o=r.length;o--;)if(i=r[o],i===t||i.fn===t){r.splice(o,1);break}return n},e.prototype.$emit=function(e){var t=this,n=t._events[e];if(n){n=n.length>1?c(n):n;for(var r=c(arguments,1),i=0,o=n.length;i<o;i++)n[i].apply(t,r)}return t}}function be(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function $e(e){e.prototype._mount=function(e,t){var n=this;return n.$el=e,n.$options.render||(n.$options.render=zi),we(n,"beforeMount"),n._watcher=new no(n,function(){n._update(n._render(),t)},d),t=!1,null==n.$vnode&&(n._isMounted=!0,we(n,"mounted")),n},e.prototype._update=function(e,t){var n=this;n._isMounted&&we(n,"beforeUpdate");var r=n.$el,i=n._vnode,o=Zi;Zi=n,n._vnode=e,i?n.$el=n.__patch__(i,e):n.$el=n.__patch__(n.$el,e,t,!1,n.$options._parentElm,n.$options._refElm),Zi=o,r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype._updateFromParent=function(e,t,n,r){var i=this,o=!(!i.$options._renderChildren&&!r);if(i.$options._parentVnode=n,i.$vnode=n,i._vnode&&(i._vnode.parent=n),i.$options._renderChildren=r,e&&i.$options.props){Mi.shouldConvert=!1;for(var a=i.$options._propKeys||[],s=0;s<a.length;s++){var c=a[s];i[c]=P(c,i.$options.props,e,i)}Mi.shouldConvert=!0,i.$options.propsData=e}if(t){var u=i.$options._parentListeners;i.$options._parentListeners=t,ye(i,t,u)}o&&(i.$slots=ve(r,n.context),i.$forceUpdate())},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){we(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||r(t.$children,e),e._watcher&&e._watcher.teardown();for(var n=e._watchers.length;n--;)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,we(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.__patch__(e._vnode,null)}}}function we(e,t){var n=e.$options[t];if(n)for(var r=0,i=n.length;r<i;r++)n[r].call(e);e._hasHookEvent&&e.$emit("hook:"+t)}function Ce(){Gi.length=0,Yi={},Qi=Xi=!1}function xe(){Xi=!0;var e,t,n;for(Gi.sort(function(e,t){return e.id-t.id}),eo=0;eo<Gi.length;eo++)e=Gi[eo],t=e.id,Yi[t]=null,e.run();for(eo=Gi.length;eo--;)e=Gi[eo],n=e.vm,n._watcher===e&&n._isMounted&&we(n,"updated");ki&&vi.devtools&&ki.emit("flush"),Ce()}function ke(e){var t=e.id;if(null==Yi[t]){if(Yi[t]=!0,Xi){for(var n=Gi.length-1;n>=0&&Gi[n].id>e.id;)n--;Gi.splice(Math.max(n,eo)+1,0,e)}else Gi.push(e);Qi||(Qi=!0,Ai(xe))}}function Ae(e){ro.clear(),Oe(e,ro)}function Oe(e,t){var n,r,i=Array.isArray(e);if((i||l(e))&&Object.isExtensible(e)){if(e.__ob__){var o=e.__ob__.dep.id;if(t.has(o))return;t.add(o)}if(i)for(n=e.length;n--;)Oe(e[n],t);else for(r=Object.keys(e),n=r.length;n--;)Oe(e[r[n]],t)}}function Se(e){e._watchers=[];var t=e.$options;t.props&&Te(e,t.props),t.methods&&Ne(e,t.methods),t.data?Ee(e):k(e._data={},!0),t.computed&&Ie(e,t.computed),t.watch&&Le(e,t.watch)}function Te(e,t){var n=e.$options.propsData||{},r=e.$options._propKeys=Object.keys(t),i=!e.$parent;Mi.shouldConvert=i;for(var o=function(i){var o=r[i];A(e,o,P(o,t,n,e))},a=0;a<r.length;a++)o(a);Mi.shouldConvert=!0}function Ee(e){var t=e.$options.data;t=e._data="function"==typeof t?t.call(e):t||{},f(t)||(t={});for(var n=Object.keys(t),r=e.$options.props,o=n.length;o--;)r&&i(r,n[o])||Pe(e,n[o]);k(t,!0)}function Ie(e,t){for(var n in t){var r=t[n];"function"==typeof r?(io.get=je(r,e),io.set=d):(io.get=r.get?r.cache!==!1?je(r.get,e):s(r.get,e):d,io.set=r.set?s(r.set,e):d),Object.defineProperty(e,n,io)}}function je(e,t){var n=new no(t,e,d,{lazy:!0});return function(){return n.dirty&&n.evaluate(),Ei.target&&n.depend(),n.value}}function Ne(e,t){for(var n in t)e[n]=null==t[n]?d:s(t[n],e)}function Le(e,t){for(var n in t){var r=t[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)Me(e,n,r[i]);else Me(e,n,r)}}function Me(e,t,n){var r;f(n)&&(r=n,n=n.handler),"string"==typeof n&&(n=e[n]),e.$watch(t,n,r)}function De(e){var t={};t.get=function(){return this._data},Object.defineProperty(e.prototype,"$data",t),e.prototype.$set=O,e.prototype.$delete=S,e.prototype.$watch=function(e,t,n){var r=this;n=n||{},n.user=!0;var i=new no(r,e,t,n);return n.immediate&&t.call(r,i.value),function(){i.teardown()}}}function Pe(e,t){g(t)||Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return e._data[t]},set:function(n){e._data[t]=n}})}function Re(e){e.prototype._init=function(e){var t=this;t._uid=oo++,t._isVue=!0,e&&e._isComponent?Fe(t,e):t.$options=M(He(t.constructor),e||{},t),t._renderProxy=t,t._self=t,be(t),he(t),pe(t),we(t,"beforeCreate"),Se(t),we(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}function Fe(e,t){var n=e.$options=Object.create(e.constructor.options);n.parent=t.parent,n.propsData=t.propsData,n._parentVnode=t._parentVnode,n._parentListeners=t._parentListeners,n._renderChildren=t._renderChildren,n._componentTag=t._componentTag,n._parentElm=t._parentElm,n._refElm=t._refElm,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}function He(e){var t=e.options;if(e.super){var n=e.super.options,r=e.superOptions,i=e.extendOptions;n!==r&&(e.superOptions=n,i.render=t.render,i.staticRenderFns=t.staticRenderFns,i._scopeId=t._scopeId,t=e.options=M(n,i),t.name&&(t.components[t.name]=e))}return t}function Ue(e){this._init(e)}function Be(e){e.use=function(e){if(!e.installed){var t=c(arguments,1);return t.unshift(this),"function"==typeof e.install?e.install.apply(e,t):e.apply(null,t),e.installed=!0,this}}}function ze(e){e.mixin=function(e){this.options=M(this.options,e)}}function Ve(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,r=n.cid,i=e._Ctor||(e._Ctor={});if(i[r])return i[r];var o=e.name||n.options.name,a=function(e){this._init(e)};return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.cid=t++,a.options=M(n.options,e),a.super=n,a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,vi._assetTypes.forEach(function(e){a[e]=n[e]}),o&&(a.options.components[o]=a),a.superOptions=n.options,a.extendOptions=e,i[r]=a,a}}function Je(e){vi._assetTypes.forEach(function(t){e[t]=function(e,n){return n?("component"===t&&f(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"==typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}})}function Ke(e){return e&&(e.Ctor.options.name||e.tag)}function qe(e,t){return"string"==typeof e?e.split(",").indexOf(t)>-1:e.test(t)}function We(e,t){for(var n in e){var r=e[n];if(r){var i=Ke(r.componentOptions);i&&!t(i)&&(Ze(r),e[n]=null)}}}function Ze(e){e&&(e.componentInstance._inactive||we(e.componentInstance,"deactivated"),e.componentInstance.$destroy())}function Ge(e){var t={};t.get=function(){return vi},Object.defineProperty(e,"config",t),e.util=Fi,e.set=O,e.delete=S,e.nextTick=Ai,e.options=Object.create(null),vi._assetTypes.forEach(function(t){e.options[t+"s"]=Object.create(null)}),e.options._base=e,u(e.options.components,co),Be(e),ze(e),Ve(e),Je(e)}function Ye(e){for(var t=e.data,n=e,r=e;r.componentInstance;)r=r.componentInstance._vnode,r.data&&(t=Qe(r.data,t));for(;n=n.parent;)n.data&&(t=Qe(t,n.data));return Xe(t)}function Qe(e,t){return{staticClass:et(e.staticClass,t.staticClass),class:e.class?[e.class,t.class]:t.class}}function Xe(e){var t=e.class,n=e.staticClass;return n||t?et(n,tt(t)):""}function et(e,t){return e?t?e+" "+t:e:t||""}function tt(e){var t="";if(!e)return t;if("string"==typeof e)return e;if(Array.isArray(e)){for(var n,r=0,i=e.length;r<i;r++)e[r]&&(n=tt(e[r]))&&(t+=n+" ");return t.slice(0,-1)}if(l(e)){for(var o in e)e[o]&&(t+=o+" ");return t.slice(0,-1)}return t}function nt(e){return wo(e)?"svg":"math"===e?"math":void 0}function rt(e){if(!gi)return!0;if(xo(e))return!1;if(e=e.toLowerCase(),null!=ko[e])return ko[e];var t=document.createElement(e);return e.indexOf("-")>-1?ko[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:ko[e]=/HTMLUnknownElement/.test(t.toString())}function it(e){if("string"==typeof e){if(e=document.querySelector(e),!e)return document.createElement("div")}return e}function ot(e,t){var n=document.createElement(e);return"select"!==e?n:(t.data&&t.data.attrs&&"multiple"in t.data.attrs&&n.setAttribute("multiple","multiple"),n)}function at(e,t){return document.createElementNS(bo[e],t)}function st(e){return document.createTextNode(e)}function ct(e){return document.createComment(e)}function ut(e,t,n){e.insertBefore(t,n)}function lt(e,t){e.removeChild(t)}function ft(e,t){e.appendChild(t)}function pt(e){return e.parentNode}function dt(e){return e.nextSibling}function vt(e){return e.tagName}function ht(e,t){e.textContent=t}function mt(e,t,n){e.setAttribute(t,n)}function gt(e,t){var n=e.data.ref;if(n){var i=e.context,o=e.componentInstance||e.elm,a=i.$refs;t?Array.isArray(a[n])?r(a[n],o):a[n]===o&&(a[n]=void 0):e.data.refInFor?Array.isArray(a[n])&&a[n].indexOf(o)<0?a[n].push(o):a[n]=[o]:a[n]=o}}function yt(e){return null==e}function _t(e){return null!=e}function bt(e,t){return e.key===t.key&&e.tag===t.tag&&e.isComment===t.isComment&&!e.data==!t.data}function $t(e,t,n){var r,i,o={};for(r=t;r<=n;++r)i=e[r].key,_t(i)&&(o[i]=r);return o}function wt(e){function t(e){return new Hi(O.tagName(e).toLowerCase(),{},[],void 0,e)}function r(e,t){function n(){0===--n.listeners&&i(e)}return n.listeners=t,n}function i(e){var t=O.parentNode(e);t&&O.removeChild(t,e)}function a(e,t,n,r,i){if(e.isRootInsert=!i,!s(e,t,n,r)){var o=e.data,a=e.children,c=e.tag;_t(c)?(e.elm=e.ns?O.createElementNS(e.ns,c):O.createElement(c,e),v(e),f(e,a,t),_t(o)&&d(e,t),l(n,e.elm,r)):e.isComment?(e.elm=O.createComment(e.text),l(n,e.elm,r)):(e.elm=O.createTextNode(e.text),l(n,e.elm,r))}}function s(e,t,n,r){var i=e.data;if(_t(i)){var o=_t(e.componentInstance)&&i.keepAlive;if(_t(i=i.hook)&&_t(i=i.init)&&i(e,!1,n,r),_t(e.componentInstance))return c(e,t),o&&u(e,t,n,r),!0}}function c(e,t){e.data.pendingInsert&&t.push.apply(t,e.data.pendingInsert),e.elm=e.componentInstance.$el,p(e)?(d(e,t),v(e)):(gt(e),t.push(e))}function u(e,t,n,r){for(var i,o=e;o.componentInstance;)if(o=o.componentInstance._vnode,_t(i=o.data)&&_t(i=i.transition)){for(i=0;i<k.activate.length;++i)k.activate[i](So,o);t.push(o);break}l(n,e.elm,r)}function l(e,t,n){e&&(n?O.insertBefore(e,t,n):O.appendChild(e,t))}function f(e,t,n){if(Array.isArray(t))for(var r=0;r<t.length;++r)a(t[r],n,e.elm,null,!0);else o(e.text)&&O.appendChild(e.elm,O.createTextNode(e.text))}function p(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return _t(e.tag)}function d(e,t){for(var n=0;n<k.create.length;++n)k.create[n](So,e);C=e.data.hook,_t(C)&&(C.create&&C.create(So,e),C.insert&&t.push(e))}function v(e){var t;_t(t=e.context)&&_t(t=t.$options._scopeId)&&O.setAttribute(e.elm,t,""),_t(t=Zi)&&t!==e.context&&_t(t=t.$options._scopeId)&&O.setAttribute(e.elm,t,"")}function h(e,t,n,r,i,o){for(;r<=i;++r)a(n[r],o,e,t)}function m(e){var t,n,r=e.data;if(_t(r))for(_t(t=r.hook)&&_t(t=t.destroy)&&t(e),t=0;t<k.destroy.length;++t)k.destroy[t](e);if(_t(t=e.children))for(n=0;n<e.children.length;++n)m(e.children[n])}function g(e,t,n,r){for(;n<=r;++n){var o=t[n];_t(o)&&(_t(o.tag)?(y(o),m(o)):i(o.elm))}}function y(e,t){if(t||_t(e.data)){var n=k.remove.length+1;for(t?t.listeners+=n:t=r(e.elm,n),_t(C=e.componentInstance)&&_t(C=C._vnode)&&_t(C.data)&&y(C,t),C=0;C<k.remove.length;++C)k.remove[C](e,t);_t(C=e.data.hook)&&_t(C=C.remove)?C(e,t):t()}else i(e.elm)}function _(e,t,n,r,i){for(var o,s,c,u,l=0,f=0,p=t.length-1,d=t[0],v=t[p],m=n.length-1,y=n[0],_=n[m],$=!i;l<=p&&f<=m;)yt(d)?d=t[++l]:yt(v)?v=t[--p]:bt(d,y)?(b(d,y,r),d=t[++l],y=n[++f]):bt(v,_)?(b(v,_,r),v=t[--p],_=n[--m]):bt(d,_)?(b(d,_,r),$&&O.insertBefore(e,d.elm,O.nextSibling(v.elm)),d=t[++l],_=n[--m]):bt(v,y)?(b(v,y,r),$&&O.insertBefore(e,v.elm,d.elm),v=t[--p],y=n[++f]):(yt(o)&&(o=$t(t,l,p)),s=_t(y.key)?o[y.key]:null,yt(s)?(a(y,r,e,d.elm),y=n[++f]):(c=t[s],bt(c,y)?(b(c,y,r),t[s]=void 0,$&&O.insertBefore(e,y.elm,d.elm),y=n[++f]):(a(y,r,e,d.elm),y=n[++f])));l>p?(u=yt(n[m+1])?null:n[m+1].elm,h(e,u,n,f,m,r)):f>m&&g(e,t,l,p)}function b(e,t,n,r){if(e!==t){if(t.isStatic&&e.isStatic&&t.key===e.key&&(t.isCloned||t.isOnce))return t.elm=e.elm,void(t.componentInstance=e.componentInstance);var i,o=t.data,a=_t(o);a&&_t(i=o.hook)&&_t(i=i.prepatch)&&i(e,t);var s=t.elm=e.elm,c=e.children,u=t.children;if(a&&p(t)){for(i=0;i<k.update.length;++i)k.update[i](e,t);_t(i=o.hook)&&_t(i=i.update)&&i(e,t)}yt(t.text)?_t(c)&&_t(u)?c!==u&&_(s,c,u,n,r):_t(u)?(_t(e.text)&&O.setTextContent(s,""),h(s,null,u,0,u.length-1,n)):_t(c)?g(s,c,0,c.length-1):_t(e.text)&&O.setTextContent(s,""):e.text!==t.text&&O.setTextContent(s,t.text),a&&_t(i=o.hook)&&_t(i=i.postpatch)&&i(e,t)}}function $(e,t,n){if(n&&e.parent)e.parent.data.pendingInsert=t;else for(var r=0;r<t.length;++r)t[r].data.hook.insert(t[r])}function w(e,t,n){t.elm=e;var r=t.tag,i=t.data,o=t.children;if(_t(i)&&(_t(C=i.hook)&&_t(C=C.init)&&C(t,!0),_t(C=t.componentInstance)))return c(t,n),!0;if(_t(r)){if(_t(o))if(e.hasChildNodes()){for(var a=!0,s=e.firstChild,u=0;u<o.length;u++){if(!s||!w(s,o[u],n)){a=!1;break}s=s.nextSibling}if(!a||s)return!1}else f(t,o,n);if(_t(i))for(var l in i)if(!S(l)){d(t,n);break}}else e.data!==t.text&&(e.data=t.text);return!0}var C,x,k={},A=e.modules,O=e.nodeOps;for(C=0;C<To.length;++C)for(k[To[C]]=[],x=0;x<A.length;++x)void 0!==A[x][To[C]]&&k[To[C]].push(A[x][To[C]]);var S=n("attrs,style,class,staticClass,staticStyle,key");return function(e,n,r,i,o,s){if(!n)return void(e&&m(e));var c=!1,u=[];if(e){var l=_t(e.nodeType);if(!l&&bt(e,n))b(e,n,u,i);else{if(l){if(1===e.nodeType&&e.hasAttribute("server-rendered")&&(e.removeAttribute("server-rendered"),r=!0),r&&w(e,n,u))return $(n,u,!0),e;e=t(e)}var f=e.elm,d=O.parentNode(f);if(a(n,u,f._leaveCb?null:d,O.nextSibling(f)),n.parent){for(var v=n.parent;v;)v.elm=n.elm,v=v.parent;if(p(n))for(var h=0;h<k.create.length;++h)k.create[h](So,n.parent)}null!==d?g(d,[e],0,0):_t(e.tag)&&m(e)}}else c=!0,a(n,u,o,s);return $(n,u,c),n.elm}}function Ct(e,t){(e.data.directives||t.data.directives)&&xt(e,t)}function xt(e,t){var n,r,i,o=e===So,a=t===So,s=kt(e.data.directives,e.context),c=kt(t.data.directives,t.context),u=[],l=[];for(n in c)r=s[n],i=c[n],r?(i.oldValue=r.value,Ot(i,"update",t,e),i.def&&i.def.componentUpdated&&l.push(i)):(Ot(i,"bind",t,e),i.def&&i.def.inserted&&u.push(i));if(u.length){var f=function(){for(var n=0;n<u.length;n++)Ot(u[n],"inserted",t,e)};o?ne(t.data.hook||(t.data.hook={}),"insert",f,"dir-insert"):f()}if(l.length&&ne(t.data.hook||(t.data.hook={}),"postpatch",function(){for(var n=0;n<l.length;n++)Ot(l[n],"componentUpdated",t,e)},"dir-postpatch"),!o)for(n in s)c[n]||Ot(s[n],"unbind",e,e,a)}function kt(e,t){var n=Object.create(null);if(!e)return n;var r,i;for(r=0;r<e.length;r++)i=e[r],i.modifiers||(i.modifiers=Io),n[At(i)]=i,i.def=D(t.$options,"directives",i.name,!0);return n}function At(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function Ot(e,t,n,r,i){var o=e.def&&e.def[t];o&&o(n.elm,e,n,r,i)}function St(e,t){if(e.data.attrs||t.data.attrs){var n,r,i,o=t.elm,a=e.data.attrs||{},s=t.data.attrs||{};s.__ob__&&(s=t.data.attrs=u({},s));for(n in s)r=s[n],i=a[n],i!==r&&Tt(o,n,r);bi&&s.value!==a.value&&Tt(o,"value",s.value);for(n in a)null==s[n]&&(go(n)?o.removeAttributeNS(mo,yo(n)):vo(n)||o.removeAttribute(n))}}function Tt(e,t,n){ho(t)?_o(n)?e.removeAttribute(t):e.setAttribute(t,t):vo(t)?e.setAttribute(t,_o(n)||"false"===n?"false":"true"):go(t)?_o(n)?e.removeAttributeNS(mo,yo(t)):e.setAttributeNS(mo,t,n):_o(n)?e.removeAttribute(t):e.setAttribute(t,n)}function Et(e,t){var n=t.elm,r=t.data,i=e.data;if(r.staticClass||r.class||i&&(i.staticClass||i.class)){var o=Ye(t),a=n._transitionClasses;a&&(o=et(o,tt(a))),o!==n._prevClass&&(n.setAttribute("class",o),n._prevClass=o)}}function It(e,t,n,r){if(n){var i=t,o=uo;t=function(n){jt(e,t,r,o),1===arguments.length?i(n):i.apply(null,arguments)}}uo.addEventListener(e,t,r)}function jt(e,t,n,r){(r||uo).removeEventListener(e,t,n)}function Nt(e,t){if(e.data.on||t.data.on){var n=t.data.on||{},r=e.data.on||{};uo=t.elm,ie(n,r,It,jt,t.context)}}function Lt(e,t){if(e.data.domProps||t.data.domProps){var n,r,i=t.elm,o=e.data.domProps||{},a=t.data.domProps||{};a.__ob__&&(a=t.data.domProps=u({},a));for(n in o)null==a[n]&&(i[n]="");for(n in a)if(r=a[n],"textContent"!==n&&"innerHTML"!==n||(t.children&&(t.children.length=0),r!==o[n]))if("value"===n){i._value=r;var s=null==r?"":String(r);Mt(i,t,s)&&(i.value=s)}else i[n]=r}}function Mt(e,t,n){return!e.composing&&("option"===t.tag||Dt(e,n)||Pt(t,n))}function Dt(e,t){return document.activeElement!==e&&e.value!==t}function Pt(e,n){var r=e.elm.value,i=e.elm._vModifiers;return i&&i.number||"number"===e.elm.type?t(r)!==t(n):i&&i.trim?r.trim()!==n.trim():r!==n}function Rt(e){var t=Ft(e.style);return e.staticStyle?u(e.staticStyle,t):t}function Ft(e){return Array.isArray(e)?p(e):"string"==typeof e?Po(e):e}function Ht(e,t){var n,r={};if(t)for(var i=e;i.componentInstance;)i=i.componentInstance._vnode,i.data&&(n=Rt(i.data))&&u(r,n);(n=Rt(e.data))&&u(r,n);for(var o=e;o=o.parent;)o.data&&(n=Rt(o.data))&&u(r,n);return r}function Ut(e,t){var n=t.data,r=e.data;if(n.staticStyle||n.style||r.staticStyle||r.style){var i,o,a=t.elm,s=e.data.staticStyle,c=e.data.style||{},l=s||c,f=Ft(t.data.style)||{};t.data.style=f.__ob__?u({},f):f;var p=Ht(t,!0);for(o in l)null==p[o]&&Ho(a,o,"");for(o in p)i=p[o],i!==l[o]&&Ho(a,o,null==i?"":i)}}function Bt(e,t){if(t&&t.trim())if(e.classList)t.indexOf(" ")>-1?t.split(/\s+/).forEach(function(t){return e.classList.add(t)}):e.classList.add(t);else{var n=" "+e.getAttribute("class")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function zt(e,t){if(t&&t.trim())if(e.classList)t.indexOf(" ")>-1?t.split(/\s+/).forEach(function(t){return e.classList.remove(t)}):e.classList.remove(t);else{for(var n=" "+e.getAttribute("class")+" ",r=" "+t+" ";n.indexOf(r)>=0;)n=n.replace(r," ");e.setAttribute("class",n.trim())}}function Vt(e){Yo(function(){Yo(e)})}function Jt(e,t){(e._transitionClasses||(e._transitionClasses=[])).push(t),Bt(e,t)}function Kt(e,t){e._transitionClasses&&r(e._transitionClasses,t),zt(e,t)}function qt(e,t,n){var r=Wt(e,t),i=r.type,o=r.timeout,a=r.propCount;if(!i)return n();var s=i===Jo?Wo:Go,c=0,u=function(){e.removeEventListener(s,l),n()},l=function(t){t.target===e&&++c>=a&&u()};setTimeout(function(){c<a&&u()},o+1),e.addEventListener(s,l)}function Wt(e,t){var n,r=window.getComputedStyle(e),i=r[qo+"Delay"].split(", "),o=r[qo+"Duration"].split(", "),a=Zt(i,o),s=r[Zo+"Delay"].split(", "),c=r[Zo+"Duration"].split(", "),u=Zt(s,c),l=0,f=0;t===Jo?a>0&&(n=Jo,l=a,f=o.length):t===Ko?u>0&&(n=Ko,l=u,f=c.length):(l=Math.max(a,u),n=l>0?a>u?Jo:Ko:null,f=n?n===Jo?o.length:c.length:0);var p=n===Jo&&Qo.test(r[qo+"Property"]);return{type:n,timeout:l,propCount:f,hasTransform:p}}function Zt(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max.apply(null,t.map(function(t,n){
return Gt(t)+Gt(e[n])}))}function Gt(e){return 1e3*Number(e.slice(0,-1))}function Yt(e,t){var n=e.elm;n._leaveCb&&(n._leaveCb.cancelled=!0,n._leaveCb());var r=Xt(e.data.transition);if(r&&!n._enterCb&&1===n.nodeType){for(var i=r.css,o=r.type,a=r.enterClass,s=r.enterToClass,c=r.enterActiveClass,u=r.appearClass,l=r.appearToClass,f=r.appearActiveClass,p=r.beforeEnter,d=r.enter,v=r.afterEnter,h=r.enterCancelled,m=r.beforeAppear,g=r.appear,y=r.afterAppear,_=r.appearCancelled,b=Zi,$=Zi.$vnode;$&&$.parent;)$=$.parent,b=$.context;var w=!b._isMounted||!e.isRootInsert;if(!w||g||""===g){var C=w?u:a,x=w?f:c,k=w?l:s,A=w?m||p:p,O=w&&"function"==typeof g?g:d,S=w?y||v:v,T=w?_||h:h,E=i!==!1&&!bi,I=O&&(O._length||O.length)>1,j=n._enterCb=en(function(){E&&(Kt(n,k),Kt(n,x)),j.cancelled?(E&&Kt(n,C),T&&T(n)):S&&S(n),n._enterCb=null});e.data.show||ne(e.data.hook||(e.data.hook={}),"insert",function(){var t=n.parentNode,r=t&&t._pending&&t._pending[e.key];r&&r.tag===e.tag&&r.elm._leaveCb&&r.elm._leaveCb(),O&&O(n,j)},"transition-insert"),A&&A(n),E&&(Jt(n,C),Jt(n,x),Vt(function(){Jt(n,k),Kt(n,C),j.cancelled||I||qt(n,o,j)})),e.data.show&&(t&&t(),O&&O(n,j)),E||I||j()}}}function Qt(e,t){function n(){g.cancelled||(e.data.show||((r.parentNode._pending||(r.parentNode._pending={}))[e.key]=e),l&&l(r),h&&(Jt(r,s),Jt(r,u),Vt(function(){Jt(r,c),Kt(r,s),g.cancelled||m||qt(r,a,g)})),f&&f(r,g),h||m||g())}var r=e.elm;r._enterCb&&(r._enterCb.cancelled=!0,r._enterCb());var i=Xt(e.data.transition);if(!i)return t();if(!r._leaveCb&&1===r.nodeType){var o=i.css,a=i.type,s=i.leaveClass,c=i.leaveToClass,u=i.leaveActiveClass,l=i.beforeLeave,f=i.leave,p=i.afterLeave,d=i.leaveCancelled,v=i.delayLeave,h=o!==!1&&!bi,m=f&&(f._length||f.length)>1,g=r._leaveCb=en(function(){r.parentNode&&r.parentNode._pending&&(r.parentNode._pending[e.key]=null),h&&(Kt(r,c),Kt(r,u)),g.cancelled?(h&&Kt(r,s),d&&d(r)):(t(),p&&p(r)),r._leaveCb=null});v?v(n):n()}}function Xt(e){if(e){if("object"==typeof e){var t={};return e.css!==!1&&u(t,Xo(e.name||"v")),u(t,e),t}return"string"==typeof e?Xo(e):void 0}}function en(e){var t=!1;return function(){t||(t=!0,e())}}function tn(e,t){t.data.show||Yt(t)}function nn(e,t,n){var r=t.value,i=e.multiple;if(!i||Array.isArray(r)){for(var o,a,s=0,c=e.options.length;s<c;s++)if(a=e.options[s],i)o=m(r,on(a))>-1,a.selected!==o&&(a.selected=o);else if(h(on(a),r))return void(e.selectedIndex!==s&&(e.selectedIndex=s));i||(e.selectedIndex=-1)}}function rn(e,t){for(var n=0,r=t.length;n<r;n++)if(h(on(t[n]),e))return!1;return!0}function on(e){return"_value"in e?e._value:e.value}function an(e){e.target.composing=!0}function sn(e){e.target.composing=!1,cn(e.target,"input")}function cn(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function un(e){return!e.componentInstance||e.data&&e.data.transition?e:un(e.componentInstance._vnode)}function ln(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?ln(ce(t.children)):e}function fn(e){var t={},n=e.$options;for(var r in n.propsData)t[r]=e[r];var i=n._parentListeners;for(var o in i)t[ai(o)]=i[o].fn;return t}function pn(e,t){return/\d-keep-alive$/.test(t.tag)?e("keep-alive"):null}function dn(e){for(;e=e.parent;)if(e.data.transition)return!0}function vn(e,t){return t.key===e.key&&t.tag===e.tag}function hn(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function mn(e){e.data.newPos=e.elm.getBoundingClientRect()}function gn(e){var t=e.data.pos,n=e.data.newPos,r=t.left-n.left,i=t.top-n.top;if(r||i){e.data.moved=!0;var o=e.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+i+"px)",o.transitionDuration="0s"}}function yn(e,t){var n=document.createElement("div");return n.innerHTML='<div a="'+e+'">',n.innerHTML.indexOf(t)>0}function _n(e){return pa=pa||document.createElement("div"),pa.innerHTML=e,pa.textContent}function bn(e,t){return t&&(e=e.replace(os,"\n")),e.replace(rs,"<").replace(is,">").replace(as,"&").replace(ss,'"')}function $n(e,t){function n(t){f+=t,e=e.substring(t)}function r(){var t=e.match(Ca);if(t){var r={tagName:t[1],attrs:[],start:f};n(t[0].length);for(var i,o;!(i=e.match(xa))&&(o=e.match(ba));)n(o[0].length),r.attrs.push(o);if(i)return r.unarySlash=i[1],n(i[0].length),r.end=f,r}}function i(e){var n=e.tagName,r=e.unarySlash;u&&("p"===s&&ma(n)&&o(s),ha(n)&&s===n&&o(n));for(var i=l(n)||"html"===n&&"head"===s||!!r,a=e.attrs.length,f=new Array(a),p=0;p<a;p++){var d=e.attrs[p];Ta&&d[0].indexOf('""')===-1&&(""===d[3]&&delete d[3],""===d[4]&&delete d[4],""===d[5]&&delete d[5]);var v=d[3]||d[4]||d[5]||"";f[p]={name:d[1],value:bn(v,t.shouldDecodeNewlines)}}i||(c.push({tag:n,lowerCasedTag:n.toLowerCase(),attrs:f}),s=n,r=""),t.start&&t.start(n,f,i,e.start,e.end)}function o(e,n,r){var i,o;if(null==n&&(n=f),null==r&&(r=f),e&&(o=e.toLowerCase()),e)for(i=c.length-1;i>=0&&c[i].lowerCasedTag!==o;i--);else i=0;if(i>=0){for(var a=c.length-1;a>=i;a--)t.end&&t.end(c[a].tag,n,r);c.length=i,s=i&&c[i-1].tag}else"br"===o?t.start&&t.start(e,[],!0,n,r):"p"===o&&(t.start&&t.start(e,[],!1,n,r),t.end&&t.end(e,n,r))}for(var a,s,c=[],u=t.expectHTML,l=t.isUnaryTag||pi,f=0;e;){if(a=e,s&&ts(s)){var p=s.toLowerCase(),d=ns[p]||(ns[p]=new RegExp("([\\s\\S]*?)(</"+p+"[^>]*>)","i")),v=0,h=e.replace(d,function(e,n,r){return v=r.length,"script"!==p&&"style"!==p&&"noscript"!==p&&(n=n.replace(/<!--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),t.chars&&t.chars(n),""});f+=e.length-h.length,e=h,o(p,f-v,f)}else{var m=e.indexOf("<");if(0===m){if(Oa.test(e)){var g=e.indexOf("-->");if(g>=0){n(g+3);continue}}if(Sa.test(e)){var y=e.indexOf("]>");if(y>=0){n(y+2);continue}}var _=e.match(Aa);if(_){n(_[0].length);continue}var b=e.match(ka);if(b){var $=f;n(b[0].length),o(b[1],$,f);continue}var w=r();if(w){i(w);continue}}var C=void 0,x=void 0,k=void 0;if(m>0){for(x=e.slice(m);!(ka.test(x)||Ca.test(x)||Oa.test(x)||Sa.test(x)||(k=x.indexOf("<",1),k<0));)m+=k,x=e.slice(m);C=e.substring(0,m),n(m)}m<0&&(C=e,e=""),t.chars&&C&&t.chars(C)}if(e===a&&t.chars){t.chars(e);break}}o()}function wn(e){function t(){(a||(a=[])).push(e.slice(v,i).trim()),v=i+1}var n,r,i,o,a,s=!1,c=!1,u=!1,l=!1,f=0,p=0,d=0,v=0;for(i=0;i<e.length;i++)if(r=n,n=e.charCodeAt(i),s)39===n&&92!==r&&(s=!1);else if(c)34===n&&92!==r&&(c=!1);else if(u)96===n&&92!==r&&(u=!1);else if(l)47===n&&92!==r&&(l=!1);else if(124!==n||124===e.charCodeAt(i+1)||124===e.charCodeAt(i-1)||f||p||d){switch(n){case 34:c=!0;break;case 39:s=!0;break;case 96:u=!0;break;case 40:d++;break;case 41:d--;break;case 91:p++;break;case 93:p--;break;case 123:f++;break;case 125:f--}if(47===n){for(var h=i-1,m=void 0;h>=0&&(m=e.charAt(h)," "===m);h--);m&&/[\w$]/.test(m)||(l=!0)}}else void 0===o?(v=i+1,o=e.slice(0,i).trim()):t();if(void 0===o?o=e.slice(0,i).trim():0!==v&&t(),a)for(i=0;i<a.length;i++)o=Cn(o,a[i]);return o}function Cn(e,t){var n=t.indexOf("(");if(n<0)return'_f("'+t+'")('+e+")";var r=t.slice(0,n),i=t.slice(n+1);return'_f("'+r+'")('+e+","+i}function xn(e,t){var n=t?ls(t):cs;if(n.test(e)){for(var r,i,o=[],a=n.lastIndex=0;r=n.exec(e);){i=r.index,i>a&&o.push(JSON.stringify(e.slice(a,i)));var s=wn(r[1].trim());o.push("_s("+s+")"),a=i+r[0].length}return a<e.length&&o.push(JSON.stringify(e.slice(a))),o.join("+")}}function kn(e){console.error("[Vue parser]: "+e)}function An(e,t){return e?e.map(function(e){return e[t]}).filter(function(e){return e}):[]}function On(e,t,n){(e.props||(e.props=[])).push({name:t,value:n})}function Sn(e,t,n){(e.attrs||(e.attrs=[])).push({name:t,value:n})}function Tn(e,t,n,r,i,o){(e.directives||(e.directives=[])).push({name:t,rawName:n,value:r,arg:i,modifiers:o})}function En(e,t,n,r,i){r&&r.capture&&(delete r.capture,t="!"+t),r&&r.once&&(delete r.once,t="~"+t);var o;r&&r.native?(delete r.native,o=e.nativeEvents||(e.nativeEvents={})):o=e.events||(e.events={});var a={value:n,modifiers:r},s=o[t];Array.isArray(s)?i?s.unshift(a):s.push(a):s?o[t]=i?[a,s]:[s,a]:o[t]=a}function In(e,t,n){var r=jn(e,":"+t)||jn(e,"v-bind:"+t);if(null!=r)return wn(r);if(n!==!1){var i=jn(e,t);if(null!=i)return JSON.stringify(i)}}function jn(e,t){var n;if(null!=(n=e.attrsMap[t]))for(var r=e.attrsList,i=0,o=r.length;i<o;i++)if(r[i].name===t){r.splice(i,1);break}return n}function Nn(e){if(Ia=e,Ea=Ia.length,Na=La=Ma=0,e.indexOf("[")<0||e.lastIndexOf("]")<Ea-1)return{exp:e,idx:null};for(;!Mn();)ja=Ln(),Dn(ja)?Rn(ja):91===ja&&Pn(ja);return{exp:e.substring(0,La),idx:e.substring(La+1,Ma)}}function Ln(){return Ia.charCodeAt(++Na)}function Mn(){return Na>=Ea}function Dn(e){return 34===e||39===e}function Pn(e){var t=1;for(La=Na;!Mn();)if(e=Ln(),Dn(e))Rn(e);else if(91===e&&t++,93===e&&t--,0===t){Ma=Na;break}}function Rn(e){for(var t=e;!Mn()&&(e=Ln(),e!==t););}function Fn(e,t){Da=t.warn||kn,Pa=t.getTagNamespace||pi,Ra=t.mustUseProp||pi,Fa=t.isPreTag||pi,Ha=An(t.modules,"preTransformNode"),Ua=An(t.modules,"transformNode"),Ba=An(t.modules,"postTransformNode"),za=t.delimiters;var n,r,i=[],o=t.preserveWhitespace!==!1,a=!1,s=!1;return $n(e,{expectHTML:t.expectHTML,isUnaryTag:t.isUnaryTag,shouldDecodeNewlines:t.shouldDecodeNewlines,start:function(e,o,c){function u(e){}var l=r&&r.ns||Pa(e);_i&&"svg"===l&&(o=rr(o));var f={type:1,tag:e,attrsList:o,attrsMap:tr(o),parent:r,children:[]};l&&(f.ns=l),nr(f)&&!xi()&&(f.forbidden=!0);for(var p=0;p<Ha.length;p++)Ha[p](f,t);if(a||(Hn(f),f.pre&&(a=!0)),Fa(f.tag)&&(s=!0),a)Un(f);else{Vn(f),Jn(f),Zn(f),Bn(f),f.plain=!f.key&&!o.length,zn(f),Gn(f),Yn(f);for(var d=0;d<Ua.length;d++)Ua[d](f,t);Qn(f)}if(n?i.length||n.if&&(f.elseif||f.else)&&(u(f),Wn(n,{exp:f.elseif,block:f})):(n=f,u(n)),r&&!f.forbidden)if(f.elseif||f.else)Kn(f,r);else if(f.slotScope){r.plain=!1;var v=f.slotTarget||"default";(r.scopedSlots||(r.scopedSlots={}))[v]=f}else r.children.push(f),f.parent=r;c||(r=f,i.push(f));for(var h=0;h<Ba.length;h++)Ba[h](f,t)},end:function(){var e=i[i.length-1],t=e.children[e.children.length-1];t&&3===t.type&&" "===t.text&&e.children.pop(),i.length-=1,r=i[i.length-1],e.pre&&(a=!1),Fa(e.tag)&&(s=!1)},chars:function(e){if(r&&(!_i||"textarea"!==r.tag||r.attrsMap.placeholder!==e)){var t=r.children;if(e=s||e.trim()?ys(e):o&&t.length?" ":""){var n;!a&&" "!==e&&(n=xn(e,za))?t.push({type:2,expression:n,text:e}):" "===e&&" "===t[t.length-1].text||r.children.push({type:3,text:e})}}}}),n}function Hn(e){null!=jn(e,"v-pre")&&(e.pre=!0)}function Un(e){var t=e.attrsList.length;if(t)for(var n=e.attrs=new Array(t),r=0;r<t;r++)n[r]={name:e.attrsList[r].name,value:JSON.stringify(e.attrsList[r].value)};else e.pre||(e.plain=!0)}function Bn(e){var t=In(e,"key");t&&(e.key=t)}function zn(e){var t=In(e,"ref");t&&(e.ref=t,e.refInFor=Xn(e))}function Vn(e){var t;if(t=jn(e,"v-for")){var n=t.match(ps);if(!n)return;e.for=n[2].trim();var r=n[1].trim(),i=r.match(ds);i?(e.alias=i[1].trim(),e.iterator1=i[2].trim(),i[3]&&(e.iterator2=i[3].trim())):e.alias=r}}function Jn(e){var t=jn(e,"v-if");if(t)e.if=t,Wn(e,{exp:t,block:e});else{null!=jn(e,"v-else")&&(e.else=!0);var n=jn(e,"v-else-if");n&&(e.elseif=n)}}function Kn(e,t){var n=qn(t.children);n&&n.if&&Wn(n,{exp:e.elseif,block:e})}function qn(e){for(var t=e.length;t--;){if(1===e[t].type)return e[t];e.pop()}}function Wn(e,t){e.ifConditions||(e.ifConditions=[]),e.ifConditions.push(t)}function Zn(e){var t=jn(e,"v-once");null!=t&&(e.once=!0)}function Gn(e){if("slot"===e.tag)e.slotName=In(e,"name");else{var t=In(e,"slot");t&&(e.slotTarget='""'===t?'"default"':t),"template"===e.tag&&(e.slotScope=jn(e,"scope"))}}function Yn(e){var t;(t=In(e,"is"))&&(e.component=t),null!=jn(e,"inline-template")&&(e.inlineTemplate=!0)}function Qn(e){var t,n,r,i,o,a,s,c,u=e.attrsList;for(t=0,n=u.length;t<n;t++)if(r=i=u[t].name,o=u[t].value,fs.test(r))if(e.hasBindings=!0,s=er(r),s&&(r=r.replace(gs,"")),vs.test(r))r=r.replace(vs,""),o=wn(o),c=!1,s&&(s.prop&&(c=!0,r=ai(r),"innerHtml"===r&&(r="innerHTML")),s.camel&&(r=ai(r))),c||Ra(e.tag,e.attrsMap.type,r)?On(e,r,o):Sn(e,r,o);else if(hs.test(r))r=r.replace(hs,""),En(e,r,o,s);else{r=r.replace(fs,"");var l=r.match(ms);l&&(a=l[1])&&(r=r.slice(0,-(a.length+1))),Tn(e,r,i,o,a,s)}else Sn(e,r,JSON.stringify(o))}function Xn(e){for(var t=e;t;){if(void 0!==t.for)return!0;t=t.parent}return!1}function er(e){var t=e.match(gs);if(t){var n={};return t.forEach(function(e){n[e.slice(1)]=!0}),n}}function tr(e){for(var t={},n=0,r=e.length;n<r;n++)t[e[n].name]=e[n].value;return t}function nr(e){return"style"===e.tag||"script"===e.tag&&(!e.attrsMap.type||"text/javascript"===e.attrsMap.type)}function rr(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];_s.test(r.name)||(r.name=r.name.replace(bs,""),t.push(r))}return t}function ir(e,t){e&&(Va=$s(t.staticKeys||""),Ja=t.isReservedTag||pi,ar(e),sr(e,!1))}function or(e){return n("type,tag,attrsList,attrsMap,plain,parent,children,attrs"+(e?","+e:""))}function ar(e){if(e.static=ur(e),1===e.type){if(!Ja(e.tag)&&"slot"!==e.tag&&null==e.attrsMap["inline-template"])return;for(var t=0,n=e.children.length;t<n;t++){var r=e.children[t];ar(r),r.static||(e.static=!1)}}}function sr(e,t){if(1===e.type){if((e.static||e.once)&&(e.staticInFor=t),e.static&&e.children.length&&(1!==e.children.length||3!==e.children[0].type))return void(e.staticRoot=!0);if(e.staticRoot=!1,e.children)for(var n=0,r=e.children.length;n<r;n++)sr(e.children[n],t||!!e.for);e.ifConditions&&cr(e.ifConditions,t)}}function cr(e,t){for(var n=1,r=e.length;n<r;n++)sr(e[n].block,t)}function ur(e){return 2!==e.type&&(3===e.type||!(!e.pre&&(e.hasBindings||e.if||e.for||ri(e.tag)||!Ja(e.tag)||lr(e)||!Object.keys(e).every(Va))))}function lr(e){for(;e.parent;){if(e=e.parent,"template"!==e.tag)return!1;if(e.for)return!0}return!1}function fr(e,t){var n=t?"nativeOn:{":"on:{";for(var r in e)n+='"'+r+'":'+pr(r,e[r])+",";return n.slice(0,-1)+"}"}function pr(e,t){if(t){if(Array.isArray(t))return"["+t.map(function(t){return pr(e,t)}).join(",")+"]";if(t.modifiers){var n="",r=[];for(var i in t.modifiers)ks[i]?n+=ks[i]:r.push(i);r.length&&(n=dr(r)+n);var o=Cs.test(t.value)?t.value+"($event)":t.value;return"function($event){"+n+o+"}"}return ws.test(t.value)||Cs.test(t.value)?t.value:"function($event){"+t.value+"}"}return"function(){}"}function dr(e){return"if("+e.map(vr).join("&&")+")return;"}function vr(e){var t=parseInt(e,10);if(t)return"$event.keyCode!=="+t;var n=xs[e];return"_k($event.keyCode,"+JSON.stringify(e)+(n?","+JSON.stringify(n):"")+")"}function hr(e,t){e.wrapData=function(n){return"_b("+n+",'"+e.tag+"',"+t.value+(t.modifiers&&t.modifiers.prop?",true":"")+")"}}function mr(e,t){var n=Ya,r=Ya=[],i=Qa;Qa=0,Xa=t,Ka=t.warn||kn,qa=An(t.modules,"transformCode"),Wa=An(t.modules,"genData"),Za=t.directives||{},Ga=t.isReservedTag||pi;var o=e?gr(e):'_c("div")';return Ya=n,Qa=i,{render:"with(this){return "+o+"}",staticRenderFns:r}}function gr(e){if(e.staticRoot&&!e.staticProcessed)return yr(e);if(e.once&&!e.onceProcessed)return _r(e);if(e.for&&!e.forProcessed)return wr(e);if(e.if&&!e.ifProcessed)return br(e);if("template"!==e.tag||e.slotTarget){if("slot"===e.tag)return Lr(e);var t;if(e.component)t=Mr(e.component,e);else{var n=e.plain?void 0:Cr(e),r=e.inlineTemplate?null:Sr(e,!0);t="_c('"+e.tag+"'"+(n?","+n:"")+(r?","+r:"")+")"}for(var i=0;i<qa.length;i++)t=qa[i](e,t);return t}return Sr(e)||"void 0"}function yr(e){return e.staticProcessed=!0,Ya.push("with(this){return "+gr(e)+"}"),"_m("+(Ya.length-1)+(e.staticInFor?",true":"")+")"}function _r(e){if(e.onceProcessed=!0,e.if&&!e.ifProcessed)return br(e);if(e.staticInFor){for(var t="",n=e.parent;n;){if(n.for){t=n.key;break}n=n.parent}return t?"_o("+gr(e)+","+Qa++ +(t?","+t:"")+")":gr(e)}return yr(e)}function br(e){return e.ifProcessed=!0,$r(e.ifConditions.slice())}function $r(e){function t(e){return e.once?_r(e):gr(e)}if(!e.length)return"_e()";var n=e.shift();return n.exp?"("+n.exp+")?"+t(n.block)+":"+$r(e):""+t(n.block)}function wr(e){var t=e.for,n=e.alias,r=e.iterator1?","+e.iterator1:"",i=e.iterator2?","+e.iterator2:"";return e.forProcessed=!0,"_l(("+t+"),function("+n+r+i+"){return "+gr(e)+"})"}function Cr(e){var t="{",n=xr(e);n&&(t+=n+","),e.key&&(t+="key:"+e.key+","),e.ref&&(t+="ref:"+e.ref+","),e.refInFor&&(t+="refInFor:true,"),e.pre&&(t+="pre:true,"),e.component&&(t+='tag:"'+e.tag+'",');for(var r=0;r<Wa.length;r++)t+=Wa[r](e);if(e.attrs&&(t+="attrs:{"+Dr(e.attrs)+"},"),e.props&&(t+="domProps:{"+Dr(e.props)+"},"),e.events&&(t+=fr(e.events)+","),e.nativeEvents&&(t+=fr(e.nativeEvents,!0)+","),e.slotTarget&&(t+="slot:"+e.slotTarget+","),e.scopedSlots&&(t+=Ar(e.scopedSlots)+","),e.inlineTemplate){var i=kr(e);i&&(t+=i+",")}return t=t.replace(/,$/,"")+"}",e.wrapData&&(t=e.wrapData(t)),t}function xr(e){var t=e.directives;if(t){var n,r,i,o,a="directives:[",s=!1;for(n=0,r=t.length;n<r;n++){i=t[n],o=!0;var c=Za[i.name]||As[i.name];c&&(o=!!c(e,i,Ka)),o&&(s=!0,a+='{name:"'+i.name+'",rawName:"'+i.rawName+'"'+(i.value?",value:("+i.value+"),expression:"+JSON.stringify(i.value):"")+(i.arg?',arg:"'+i.arg+'"':"")+(i.modifiers?",modifiers:"+JSON.stringify(i.modifiers):"")+"},")}return s?a.slice(0,-1)+"]":void 0}}function kr(e){var t=e.children[0];if(1===t.type){var n=mr(t,Xa);return"inlineTemplate:{render:function(){"+n.render+"},staticRenderFns:["+n.staticRenderFns.map(function(e){return"function(){"+e+"}"}).join(",")+"]}"}}function Ar(e){return"scopedSlots:{"+Object.keys(e).map(function(t){return Or(t,e[t])}).join(",")+"}"}function Or(e,t){return e+":function("+String(t.attrsMap.scope)+"){return "+("template"===t.tag?Sr(t)||"void 0":gr(t))+"}"}function Sr(e,t){var n=e.children;if(n.length){var r=n[0];if(1===n.length&&r.for&&"template"!==r.tag&&"slot"!==r.tag)return gr(r);var i=Tr(n);return"["+n.map(jr).join(",")+"]"+(t&&i?","+i:"")}}function Tr(e){for(var t=0,n=0;n<e.length;n++){var r=e[n];if(1===r.type){if(Er(r)||r.ifConditions&&r.ifConditions.some(function(e){return Er(e.block)})){t=2;break}(Ir(r)||r.ifConditions&&r.ifConditions.some(function(e){return Ir(e.block)}))&&(t=1)}}return t}function Er(e){return void 0!==e.for||"template"===e.tag||"slot"===e.tag}function Ir(e){return!Ga(e.tag)}function jr(e){return 1===e.type?gr(e):Nr(e)}function Nr(e){return"_v("+(2===e.type?e.expression:Pr(JSON.stringify(e.text)))+")"}function Lr(e){var t=e.slotName||'"default"',n=Sr(e),r="_t("+t+(n?","+n:""),i=e.attrs&&"{"+e.attrs.map(function(e){return ai(e.name)+":"+e.value}).join(",")+"}",o=e.attrsMap["v-bind"];return!i&&!o||n||(r+=",null"),i&&(r+=","+i),o&&(r+=(i?"":",null")+","+o),r+")"}function Mr(e,t){var n=t.inlineTemplate?null:Sr(t,!0);return"_c("+e+","+Cr(t)+(n?","+n:"")+")"}function Dr(e){for(var t="",n=0;n<e.length;n++){var r=e[n];t+='"'+r.name+'":'+Pr(r.value)+","}return t.slice(0,-1)}function Pr(e){return e.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}function Rr(e,t){var n=Fn(e.trim(),t);ir(n,t);var r=mr(n,t);return{ast:n,render:r.render,staticRenderFns:r.staticRenderFns}}function Fr(e,t){var n=(t.warn||kn,jn(e,"class"));n&&(e.staticClass=JSON.stringify(n));var r=In(e,"class",!1);r&&(e.classBinding=r)}function Hr(e){var t="";return e.staticClass&&(t+="staticClass:"+e.staticClass+","),e.classBinding&&(t+="class:"+e.classBinding+","),t}function Ur(e,t){var n=(t.warn||kn,jn(e,"style"));n&&(e.staticStyle=JSON.stringify(Po(n)));var r=In(e,"style",!1);r&&(e.styleBinding=r)}function Br(e){var t="";return e.staticStyle&&(t+="staticStyle:"+e.staticStyle+","),e.styleBinding&&(t+="style:("+e.styleBinding+"),"),t}function zr(e,t,n){es=n;var r=t.value,i=t.modifiers,o=e.tag,a=e.attrsMap.type;return"select"===o?qr(e,r,i):"input"===o&&"checkbox"===a?Vr(e,r,i):"input"===o&&"radio"===a?Jr(e,r,i):Kr(e,r,i),!0}function Vr(e,t,n){var r=n&&n.number,i=In(e,"value")||"null",o=In(e,"true-value")||"true",a=In(e,"false-value")||"false";On(e,"checked","Array.isArray("+t+")?_i("+t+","+i+")>-1"+("true"===o?":("+t+")":":_q("+t+","+o+")")),En(e,"click","var $$a="+t+",$$el=$event.target,$$c=$$el.checked?("+o+"):("+a+");if(Array.isArray($$a)){var $$v="+(r?"_n("+i+")":i)+",$$i=_i($$a,$$v);if($$c){$$i<0&&("+t+"=$$a.concat($$v))}else{$$i>-1&&("+t+"=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{"+t+"=$$c}",null,!0)}function Jr(e,t,n){var r=n&&n.number,i=In(e,"value")||"null";i=r?"_n("+i+")":i,On(e,"checked","_q("+t+","+i+")"),En(e,"click",Wr(t,i),null,!0)}function Kr(e,t,n){var r=e.attrsMap.type,i=n||{},o=i.lazy,a=i.number,s=i.trim,c=o||_i&&"range"===r?"change":"input",u=!o&&"range"!==r,l="input"===e.tag||"textarea"===e.tag,f=l?"$event.target.value"+(s?".trim()":""):s?"(typeof $event === 'string' ? $event.trim() : $event)":"$event";f=a||"number"===r?"_n("+f+")":f;var p=Wr(t,f);l&&u&&(p="if($event.target.composing)return;"+p),On(e,"value",l?"_s("+t+")":"("+t+")"),En(e,c,p,null,!0),(s||a||"number"===r)&&En(e,"blur","$forceUpdate()")}function qr(e,t,n){var r=n&&n.number,i='Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return '+(r?"_n(val)":"val")+"})"+(null==e.attrsMap.multiple?"[0]":""),o=Wr(t,i);En(e,"change",o,null,!0)}function Wr(e,t){var n=Nn(e);return null===n.idx?e+"="+t:"var $$exp = "+n.exp+", $$idx = "+n.idx+";if (!Array.isArray($$exp)){"+e+"="+t+"}else{$$exp.splice($$idx, 1, "+t+")}"}function Zr(e,t){t.value&&On(e,"textContent","_s("+t.value+")")}function Gr(e,t){t.value&&On(e,"innerHTML","_s("+t.value+")")}function Yr(e,t){return t=t?u(u({},js),t):js,Rr(e,t)}function Qr(e,t,n){var r=(t&&t.warn||Si,t&&t.delimiters?String(t.delimiters)+e:e);if(Is[r])return Is[r];var i={},o=Yr(e,t);i.render=Xr(o.render);var a=o.staticRenderFns.length;i.staticRenderFns=new Array(a);for(var s=0;s<a;s++)i.staticRenderFns[s]=Xr(o.staticRenderFns[s]);return Is[r]=i}function Xr(e){try{return new Function(e)}catch(e){return d}}function ei(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}var ti,ni,ri=n("slot,component",!0),ii=Object.prototype.hasOwnProperty,oi=/-(\w)/g,ai=a(function(e){return e.replace(oi,function(e,t){return t?t.toUpperCase():""})}),si=a(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}),ci=/([^-])([A-Z])/g,ui=a(function(e){return e.replace(ci,"$1-$2").replace(ci,"$1-$2").toLowerCase()}),li=Object.prototype.toString,fi="[object Object]",pi=function(){return!1},di=function(e){return e},vi={optionMergeStrategies:Object.create(null),silent:!1,devtools:!1,errorHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:pi,isUnknownElement:pi,getTagNamespace:d,parsePlatformTagName:di,mustUseProp:pi,_assetTypes:["component","directive","filter"],_lifecycleHooks:["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated"],_maxUpdateCount:100},hi=/[^\w.$]/,mi="__proto__"in{},gi="undefined"!=typeof window,yi=gi&&window.navigator.userAgent.toLowerCase(),_i=yi&&/msie|trident/.test(yi),bi=yi&&yi.indexOf("msie 9.0")>0,$i=yi&&yi.indexOf("edge/")>0,wi=yi&&yi.indexOf("android")>0,Ci=yi&&/iphone|ipad|ipod|ios/.test(yi),xi=function(){return void 0===ti&&(ti=!gi&&"undefined"!=typeof global&&"server"===global.process.env.VUE_ENV),ti},ki=gi&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,Ai=function(){function e(){r=!1;var e=n.slice(0);n.length=0;for(var t=0;t<e.length;t++)e[t]()}var t,n=[],r=!1;if("undefined"!=typeof Promise&&b(Promise)){var i=Promise.resolve(),o=function(e){console.error(e)};t=function(){i.then(e).catch(o),Ci&&setTimeout(d)}}else if("undefined"==typeof MutationObserver||!b(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())t=function(){setTimeout(e,0)};else{var a=1,s=new MutationObserver(e),c=document.createTextNode(String(a));s.observe(c,{characterData:!0}),t=function(){a=(a+1)%2,c.data=String(a)}}return function(e,i){var o;if(n.push(function(){e&&e.call(i),o&&o(i)}),r||(r=!0,t()),!e&&"undefined"!=typeof Promise)return new Promise(function(e){o=e})}}();ni="undefined"!=typeof Set&&b(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return this.set[e]===!0},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var Oi,Si=d,Ti=0,Ei=function(){this.id=Ti++,this.subs=[]};Ei.prototype.addSub=function(e){this.subs.push(e)},Ei.prototype.removeSub=function(e){r(this.subs,e)},Ei.prototype.depend=function(){Ei.target&&Ei.target.addDep(this)},Ei.prototype.notify=function(){for(var e=this.subs.slice(),t=0,n=e.length;t<n;t++)e[t].update()},Ei.target=null;var Ii=[],ji=Array.prototype,Ni=Object.create(ji);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(e){var t=ji[e];y(Ni,e,function(){for(var n=arguments,r=arguments.length,i=new Array(r);r--;)i[r]=n[r];var o,a=t.apply(this,i),s=this.__ob__;switch(e){case"push":o=i;break;case"unshift":o=i;break;case"splice":o=i.slice(2)}return o&&s.observeArray(o),s.dep.notify(),a})});var Li=Object.getOwnPropertyNames(Ni),Mi={shouldConvert:!0,isSettingProps:!1},Di=function(e){if(this.value=e,this.dep=new Ei,this.vmCount=0,y(e,"__ob__",this),Array.isArray(e)){var t=mi?C:x;t(e,Ni,Li),this.observeArray(e)}else this.walk(e)};Di.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)A(e,t[n],e[t[n]])},Di.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)k(e[t])};var Pi=vi.optionMergeStrategies;Pi.data=function(e,t,n){return n?e||t?function(){var r="function"==typeof t?t.call(n):t,i="function"==typeof e?e.call(n):void 0;return r?E(r,i):i}:void 0:t?"function"!=typeof t?e:e?function(){return E(t.call(this),e.call(this))}:t:e},vi._lifecycleHooks.forEach(function(e){Pi[e]=I}),vi._assetTypes.forEach(function(e){Pi[e+"s"]=j}),Pi.watch=function(e,t){if(!t)return e;if(!e)return t;var n={};u(n,e);for(var r in t){var i=n[r],o=t[r];i&&!Array.isArray(i)&&(i=[i]),n[r]=i?i.concat(o):[o]}return n},Pi.props=Pi.methods=Pi.computed=function(e,t){if(!t)return e;if(!e)return t;var n=Object.create(null);return u(n,e),u(n,t),n};var Ri=function(e,t){return void 0===t?e:t},Fi=Object.freeze({defineReactive:A,_toString:e,toNumber:t,makeMap:n,isBuiltInTag:ri,remove:r,hasOwn:i,isPrimitive:o,cached:a,camelize:ai,capitalize:si,hyphenate:ui,bind:s,toArray:c,extend:u,isObject:l,isPlainObject:f,toObject:p,noop:d,no:pi,identity:di,genStaticKeys:v,looseEqual:h,looseIndexOf:m,isReserved:g,def:y,parsePath:_,hasProto:mi,inBrowser:gi,UA:yi,isIE:_i,isIE9:bi,isEdge:$i,isAndroid:wi,isIOS:Ci,isServerRendering:xi,devtools:ki,nextTick:Ai,get _Set(){return ni},mergeOptions:M,resolveAsset:D,warn:Si,formatComponentName:Oi,validateProp:P}),Hi=function(e,t,n,r,i,o,a){this.tag=e,this.data=t,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.functionalContext=void 0,this.key=t&&t.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1},Ui={child:{}};Ui.child.get=function(){return this.componentInstance},Object.defineProperties(Hi.prototype,Ui);var Bi,zi=function(){var e=new Hi;return e.text="",e.isComment=!0,e},Vi={init:q,prepatch:W,insert:Z,destroy:G},Ji=Object.keys(Vi),Ki=a(function(e){var t="~"===e.charAt(0);e=t?e.slice(1):e;var n="!"===e.charAt(0);return e=n?e.slice(1):e,{name:e,once:t,capture:n}}),qi=1,Wi=2,Zi=null,Gi=[],Yi={},Qi=!1,Xi=!1,eo=0,to=0,no=function(e,t,n,r){this.vm=e,e._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++to,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ni,this.newDepIds=new ni,this.expression="","function"==typeof t?this.getter=t:(this.getter=_(t),this.getter||(this.getter=function(){})),this.value=this.lazy?void 0:this.get()};no.prototype.get=function(){$(this);var e=this.getter.call(this.vm,this.vm);return this.deep&&Ae(e),w(),this.cleanupDeps(),e},no.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},no.prototype.cleanupDeps=function(){for(var e=this,t=this.deps.length;t--;){var n=e.deps[t];e.newDepIds.has(n.id)||n.removeSub(e)}var r=this.depIds;this.depIds=this.newDepIds,this.newDepIds=r,this.newDepIds.clear(),r=this.deps,this.deps=this.newDeps,this.newDeps=r,this.newDeps.length=0},no.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():ke(this)},no.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||l(e)||this.deep){var t=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,t)}catch(e){if(!vi.errorHandler)throw e;vi.errorHandler.call(null,e,this.vm)}else this.cb.call(this.vm,e,t)}}},no.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},no.prototype.depend=function(){for(var e=this,t=this.deps.length;t--;)e.deps[t].depend()},no.prototype.teardown=function(){var e=this;if(this.active){this.vm._isBeingDestroyed||r(this.vm._watchers,this);for(var t=this.deps.length;t--;)e.deps[t].removeSub(e);this.active=!1}};var ro=new ni,io={enumerable:!0,configurable:!0,get:d,set:d},oo=0;Re(Ue),De(Ue),_e(Ue),$e(Ue),de(Ue);var ao=[String,RegExp],so={name:"keep-alive",abstract:!0,props:{include:ao,exclude:ao},created:function(){this.cache=Object.create(null)},destroyed:function(){var e=this;for(var t in this.cache)Ze(e.cache[t])},watch:{include:function(e){We(this.cache,function(t){return qe(e,t)})},exclude:function(e){We(this.cache,function(t){return!qe(e,t)})}},render:function(){var e=ce(this.$slots.default),t=e&&e.componentOptions;if(t){var n=Ke(t);if(n&&(this.include&&!qe(this.include,n)||this.exclude&&qe(this.exclude,n)))return e;var r=null==e.key?t.Ctor.cid+(t.tag?"::"+t.tag:""):e.key;this.cache[r]?e.componentInstance=this.cache[r].componentInstance:this.cache[r]=e,e.data.keepAlive=!0}return e}},co={KeepAlive:so};Ge(Ue),Object.defineProperty(Ue.prototype,"$isServer",{get:xi}),Ue.version="2.1.10";var uo,lo,fo=n("input,textarea,option,select"),po=function(e,t,n){return"value"===n&&fo(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},vo=n("contenteditable,draggable,spellcheck"),ho=n("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),mo="http://www.w3.org/1999/xlink",go=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},yo=function(e){return go(e)?e.slice(6,e.length):""},_o=function(e){return null==e||e===!1},bo={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},$o=n("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template"),wo=n("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Co=function(e){return"pre"===e},xo=function(e){return $o(e)||wo(e)},ko=Object.create(null),Ao=Object.freeze({createElement:ot,createElementNS:at,createTextNode:st,createComment:ct,insertBefore:ut,removeChild:lt,appendChild:ft,parentNode:pt,nextSibling:dt,tagName:vt,setTextContent:ht,setAttribute:mt}),Oo={create:function(e,t){gt(t)},update:function(e,t){e.data.ref!==t.data.ref&&(gt(e,!0),gt(t))},destroy:function(e){gt(e,!0)}},So=new Hi("",{},[]),To=["create","activate","update","remove","destroy"],Eo={create:Ct,
update:Ct,destroy:function(e){Ct(e,So)}},Io=Object.create(null),jo=[Oo,Eo],No={create:St,update:St},Lo={create:Et,update:Et},Mo={create:Nt,update:Nt},Do={create:Lt,update:Lt},Po=a(function(e){var t={},n=/;(?![^(]*\))/g,r=/:(.+)/;return e.split(n).forEach(function(e){if(e){var n=e.split(r);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}),Ro=/^--/,Fo=/\s*!important$/,Ho=function(e,t,n){Ro.test(t)?e.style.setProperty(t,n):Fo.test(n)?e.style.setProperty(t,n.replace(Fo,""),"important"):e.style[Bo(t)]=n},Uo=["Webkit","Moz","ms"],Bo=a(function(e){if(lo=lo||document.createElement("div"),e=ai(e),"filter"!==e&&e in lo.style)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<Uo.length;n++){var r=Uo[n]+t;if(r in lo.style)return r}}),zo={create:Ut,update:Ut},Vo=gi&&!bi,Jo="transition",Ko="animation",qo="transition",Wo="transitionend",Zo="animation",Go="animationend";Vo&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(qo="WebkitTransition",Wo="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Zo="WebkitAnimation",Go="webkitAnimationEnd"));var Yo=gi&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout,Qo=/\b(transform|all)(,|$)/,Xo=a(function(e){return{enterClass:e+"-enter",leaveClass:e+"-leave",appearClass:e+"-enter",enterToClass:e+"-enter-to",leaveToClass:e+"-leave-to",appearToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveActiveClass:e+"-leave-active",appearActiveClass:e+"-enter-active"}}),ea=gi?{create:tn,activate:tn,remove:function(e,t){e.data.show?t():Qt(e,t)}}:{},ta=[No,Lo,Mo,Do,zo,ea],na=ta.concat(jo),ra=wt({nodeOps:Ao,modules:na});bi&&document.addEventListener("selectionchange",function(){var e=document.activeElement;e&&e.vmodel&&cn(e,"input")});var ia={inserted:function(e,t,n){if("select"===n.tag){var r=function(){nn(e,t,n.context)};r(),(_i||$i)&&setTimeout(r,0)}else"textarea"!==n.tag&&"text"!==e.type||(e._vModifiers=t.modifiers,t.modifiers.lazy||(wi||(e.addEventListener("compositionstart",an),e.addEventListener("compositionend",sn)),bi&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){nn(e,t,n.context);var r=e.multiple?t.value.some(function(t){return rn(t,e.options)}):t.value!==t.oldValue&&rn(t.value,e.options);r&&cn(e,"change")}}},oa={bind:function(e,t,n){var r=t.value;n=un(n);var i=n.data&&n.data.transition,o=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;r&&i&&!bi?(n.data.show=!0,Yt(n,function(){e.style.display=o})):e.style.display=r?o:"none"},update:function(e,t,n){var r=t.value,i=t.oldValue;if(r!==i){n=un(n);var o=n.data&&n.data.transition;o&&!bi?(n.data.show=!0,r?Yt(n,function(){e.style.display=e.__vOriginalDisplay}):Qt(n,function(){e.style.display="none"})):e.style.display=r?e.__vOriginalDisplay:"none"}},unbind:function(e,t,n,r,i){i||(e.style.display=e.__vOriginalDisplay)}},aa={model:ia,show:oa},sa={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String},ca={name:"transition",props:sa,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(function(e){return e.tag}),n.length)){var r=this.mode,i=n[0];if(dn(this.$vnode))return i;var a=ln(i);if(!a)return i;if(this._leaving)return pn(e,i);var s="__transition-"+this._uid+"-",c=a.key=null==a.key?s+a.tag:o(a.key)?0===String(a.key).indexOf(s)?a.key:s+a.key:a.key,l=(a.data||(a.data={})).transition=fn(this),f=this._vnode,p=ln(f);if(a.data.directives&&a.data.directives.some(function(e){return"show"===e.name})&&(a.data.show=!0),p&&p.data&&!vn(a,p)){var d=p&&(p.data.transition=u({},l));if("out-in"===r)return this._leaving=!0,ne(d,"afterLeave",function(){t._leaving=!1,t.$forceUpdate()},c),pn(e,i);if("in-out"===r){var v,h=function(){v()};ne(l,"afterEnter",h,c),ne(l,"enterCancelled",h,c),ne(d,"delayLeave",function(e){v=e},c)}}return i}}},ua=u({tag:String,moveClass:String},sa);delete ua.mode;var la={props:ua,render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],a=fn(this),s=0;s<i.length;s++){var c=i[s];c.tag&&null!=c.key&&0!==String(c.key).indexOf("__vlist")&&(o.push(c),n[c.key]=c,(c.data||(c.data={})).transition=a)}if(r){for(var u=[],l=[],f=0;f<r.length;f++){var p=r[f];p.data.transition=a,p.data.pos=p.elm.getBoundingClientRect(),n[p.key]?u.push(p):l.push(p)}this.kept=e(t,null,u),this.removed=l}return e(t,null,o)},beforeUpdate:function(){this.__patch__(this._vnode,this.kept,!1,!0),this._vnode=this.kept},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";if(e.length&&this.hasMove(e[0].elm,t)){e.forEach(hn),e.forEach(mn),e.forEach(gn);document.body.offsetHeight;e.forEach(function(e){if(e.data.moved){var n=e.elm,r=n.style;Jt(n,t),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(Wo,n._moveCb=function e(r){r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(Wo,e),n._moveCb=null,Kt(n,t))})}})}},methods:{hasMove:function(e,t){if(!Vo)return!1;if(null!=this._hasMove)return this._hasMove;Jt(e,t);var n=Wt(e);return Kt(e,t),this._hasMove=n.hasTransform}}},fa={Transition:ca,TransitionGroup:la};Ue.config.isUnknownElement=rt,Ue.config.isReservedTag=xo,Ue.config.getTagNamespace=nt,Ue.config.mustUseProp=po,u(Ue.options.directives,aa),u(Ue.options.components,fa),Ue.prototype.__patch__=gi?ra:d,Ue.prototype.$mount=function(e,t){return e=e&&gi?it(e):void 0,this._mount(e,t)},setTimeout(function(){vi.devtools&&ki&&ki.emit("init",Ue)},0);var pa,da=!!gi&&yn("\n","&#10;"),va=n("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr",!0),ha=n("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source",!0),ma=n("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track",!0),ga=/([^\s"'<>\/=]+)/,ya=/(?:=)/,_a=[/"([^"]*)"+/.source,/'([^']*)'+/.source,/([^\s"'=<>`]+)/.source],ba=new RegExp("^\\s*"+ga.source+"(?:\\s*("+ya.source+")\\s*(?:"+_a.join("|")+"))?"),$a="[a-zA-Z_][\\w\\-\\.]*",wa="((?:"+$a+"\\:)?"+$a+")",Ca=new RegExp("^<"+wa),xa=/^\s*(\/?)>/,ka=new RegExp("^<\\/"+wa+"[^>]*>"),Aa=/^<!DOCTYPE [^>]+>/i,Oa=/^<!--/,Sa=/^<!\[/,Ta=!1;"x".replace(/x(.)?/g,function(e,t){Ta=""===t});var Ea,Ia,ja,Na,La,Ma,Da,Pa,Ra,Fa,Ha,Ua,Ba,za,Va,Ja,Ka,qa,Wa,Za,Ga,Ya,Qa,Xa,es,ts=n("script,style",!0),ns={},rs=/&lt;/g,is=/&gt;/g,os=/&#10;/g,as=/&amp;/g,ss=/&quot;/g,cs=/\{\{((?:.|\n)+?)\}\}/g,us=/[-.*+?^${}()|[\]\/\\]/g,ls=a(function(e){var t=e[0].replace(us,"\\$&"),n=e[1].replace(us,"\\$&");return new RegExp(t+"((?:.|\\n)+?)"+n,"g")}),fs=/^v-|^@|^:/,ps=/(.*?)\s+(?:in|of)\s+(.*)/,ds=/\((\{[^}]*\}|[^,]*),([^,]*)(?:,([^,]*))?\)/,vs=/^:|^v-bind:/,hs=/^@|^v-on:/,ms=/:(.*)$/,gs=/\.[^.]+/g,ys=a(_n),_s=/^xmlns:NS\d+/,bs=/^NS\d+:/,$s=a(or),ws=/^\s*([\w$_]+|\([^)]*?\))\s*=>|^function\s*\(/,Cs=/^\s*[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?']|\[".*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*\s*$/,xs={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},ks={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:"if($event.target !== $event.currentTarget)return;",ctrl:"if(!$event.ctrlKey)return;",shift:"if(!$event.shiftKey)return;",alt:"if(!$event.altKey)return;",meta:"if(!$event.metaKey)return;"},As={bind:hr,cloak:d},Os={staticKeys:["staticClass"],transformNode:Fr,genData:Hr},Ss={staticKeys:["staticStyle"],transformNode:Ur,genData:Br},Ts=[Os,Ss],Es={model:zr,text:Zr,html:Gr},Is=Object.create(null),js={expectHTML:!0,modules:Ts,staticKeys:v(Ts),directives:Es,isReservedTag:xo,isUnaryTag:va,mustUseProp:po,getTagNamespace:nt,isPreTag:Co},Ns=a(function(e){var t=it(e);return t&&t.innerHTML}),Ls=Ue.prototype.$mount;return Ue.prototype.$mount=function(e,t){if(e=e&&it(e),e===document.body||e===document.documentElement)return this;var n=this.$options;if(!n.render){var r=n.template;if(r)if("string"==typeof r)"#"===r.charAt(0)&&(r=Ns(r));else{if(!r.nodeType)return this;r=r.innerHTML}else e&&(r=ei(e));if(r){var i=Qr(r,{warn:Si,shouldDecodeNewlines:da,delimiters:n.delimiters},this),o=i.render,a=i.staticRenderFns;n.render=o,n.staticRenderFns=a}}return Ls.call(this,e,t)},Ue.compile=Qr,Ue});;
if ($("#menu-mobile").length) {
    var vmMenuMobile = new Vue({
        el: '#menu-mobile',
        data: {
            openMenu: function (e) {
                e.stopPropagation();
                $('html').addClass('open-menu');
            },
            closeMenu: function (e) {
                e.stopPropagation();
                $('html').removeClass('open-menu');
            }
        },
        beforeMount: function () {
            $("#menu-mobile").prependTo("body");
        }
    });
}

if ($("#main-header").length) {
    var vmHeader = new Vue({
        el: '#main-header',
        data: {
            activeSearch: false,
            showMenu: false,
            showBrowse: false,
            showDashboard: false,
            isMember: false,
            userName: ""
        },
        computed: {
            logourl: function () {
                return "/" + this.isMember ? "member" : "";
            },
            loginUrl: function () {
                var redirect = "";
                if (window.location.pathname != "/") {
                    redirect = "?ReturnUrl=" + encodeURIComponent(window.location.href);
                }
                return "/login/" + redirect;
            }
        },
        mounted: function () {
            this.checkStatus();
        },
        methods: {
            checkStatus: function () {
                this.isMember = window.isMember;
                this.userName = window.userShortName;
            },
            hideShowBrowse: function () {
                this.showBrowse = !this.showBrowse;
            },
            openSearch: function (e) {
                if (e) {
                    e.preventDefault();
                    e.stopPropagation();
                }
                this.activeSearch = true;
                $('html').addClass("sc-menu-open");
                $('#sc-header-search').addClass("open");
                $('.sc-submenu-container > .dropdown').removeClass("active");
                $('#search-vue #searchbar').focus();

                var node = document.getElementById('searchbar');
                var event = document.createEvent('Event');
                event.initEvent('focus', true, true, 'window');
                node.dispatchEvent(event);
                if ($(document).width() < 768) {
                    $("html, body").animate({ scrollTop: 0 }, "slow");
                } else {
                    $("html, body").animate({ scrollTop: 0 }, 250);
                }
            },
            closeSearch: function (e) {
                if (e) {
                    e.preventDefault();
                    e.stopPropagation();
                }
                this.activeSearch = false;
                $('html').removeClass("sc-menu-open");
                $('#sc-header-search').removeClass("open");
            },
            openMobileMenu: function (e) {
                vmMenuMobile.openMenu(e);
            }
        }
    });
};
/*

General Notifications:
SCNotify.page("Success message", "success");
SCNotify.page("Warning click <a href='/somewhere'>here</a>", "warning");
SCNotify.page("Error", "danger");

Dashboard Notifications:
SCNotify.dashboard("Save now title","save up to 5% content", "Got it");
SCNotify.dashboard("No address","Fill your address", "Add now", "/member/settings/address");
*/
var scPageNotifications = $('.sc-notify-msg.sc-notify-page');
for (var i = 0; i < scPageNotifications.length; i++) {
    var $notification = $(scPageNotifications[i]);
    if ($notification.data('message').length) {
        SCNotify.page($notification.data('message'), $notification.data('type'));
    }
}
var scDashboard = $('.sc-notify-msg.dashboard');
for (var i = 0; i < scDashboard.length; i++) {
    var $notification = $(scDashboard[i]);
    if ($notification.data('message').length) {
        SCNotify.dashboard($notification.data('title'),
            $notification.data('message'),
            $notification.data('button-copy'),
            $notification.data('link'));
    }
};
/*
    Helper for custom form validation method
*/
var SCSValidationHelper = (function () {
    'use strict';

    var EMAIL_STATUS = {
        Deliverable: 0,
        Undeliverable: 1,
        Risky: 2,
        Unknown: 3
    };

    var isValidEmail = function(email) {
        if (SCSStringHelper.stringIsNullOrEmpty(email)) return false;
        var re =
            /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(email);
    };

    var toJavaScriptDate = function(value) {
        var pattern = /Date\(([^)]+)\)/;
        var results = pattern.exec(value);
        var dt = new Date(parseFloat(results[1]));
        return (dt.getUTCMonth() + 1) + "/" + dt.getUTCDate() + "/" + dt.getUTCFullYear();
    };

    return {
        //This allows hyphens for zipcode and TaxPayer Id
        allowNumbersAndHyphensOnly: function (event) {
            var charCode = (event.which) ? event.which : event.keyCode;
            if (charCode != 45 && charCode > 31 && (charCode < 48 || charCode > 57)) {
                return false;
            }
        },
        //This allows only numbers for NPI and FTIN
        allowNumsOnly: function (event) {
            var charCode = (event.which) ? event.which : event.keyCode;
            if (charCode > 31 && (charCode < 48 || charCode > 57)) {
                return false;
            }
        },
        EMAIL_STATUS: EMAIL_STATUS,
        isAlphabetical: function (string) {
            return /^[a-zA-Z-'\s]+$/.test(string);
        },
        isAlphanumeric: function (string) {
            return /^[a-zA-Z0-9]+$/.test(string);
        },
        isValidCCFormat: function (ccString) {
            return /[\d]{15,19}/.test(ccString.replace(/ /g, '').replace(/-/g, ''));
        },
        isValidCurrencyAmount: function (currstring) {
            return /^\d+(?:\.\d{2})?$/.test(currstring.replace(/,\$/g, ''));
        },
        isValidCVVFormat: function (cvvString) {
            return /[\d]{3,4}/.test(cvvString);
        },
        isValidEmail: isValidEmail,
        isValidFTIN: function (ftin) {
            return !isNaN(ftin) && ftin.length === 9;
        },
        isValidGroupNumber: function (string) {
            return !isNaN(string) && string.length === 6;
        },
        isValidMemberNumber: function (string) {
            return !isNaN(string) && string.length === 9;
        },
        isValidName: function (name) {
            if (SCSStringHelper.stringIsNullOrEmpty(name)) return false;
            // At least 2 characters including a-z, aphostrophes and dashes (no period)
            var validName = new RegExp(/^[a-z\u00E0-\u00FC^U+E '-]{2,}$/i);
            return validName.test(name);
        },
        isValidNPI: function (npi) {
            return !isNaN(npi) && npi.length === 10;
        },
        isValidPassword: function (pass) {
            return /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\s).{8,}$/.test(pass);
        },
        isValidPasswordLite: function (pass) {
            return /^(?!.*\s).{8,}$/.test(pass);
        },
        isValidPhoneNumber: function (num) {
            if (SCSStringHelper.stringIsNullOrEmpty(num)) return false;
            var stripped = num.replace(/ /g, '')
                .replace(/-/g, '')
                .replace(/\(/g, '')
                .replace(/\)/g, '')
                .replace(/\+/g, '')
                .replace(/\./g, '');
            return !isNaN(stripped) && stripped.length >= 10;
        },
        isValidAddress: function (address) {
            return /^\d+\s[A-Za-z0-9]+\s[A-Za-z0-9]+/g.test(address);
        },
        isValidZip: function (sZip) {
            return /^\d{5}(-\d{4})?$/.test(sZip);
        },
        isVerifiedEmail: function (email) {
            if (!isValidEmail(email)) return false;
            var resp = SCS.call(SCS.SERVICES.MemberService, "VerifyEmail", { Value: email }, null, true);
            if (typeof resp === 'undefined') return false;
            var response = JSON.parse(resp);
            return response.Value.ResultType !== EMAIL_STATUS.Undeliverable;
        },
        matchesTo: function(string, elementId) {
            return string === $(elementId).val();
        },
        toJavaScriptDate: toJavaScriptDate,
        validate: function () {
            var valid = Object.keys(clientValidation)
                .reduce(function(previous, key) {
                        return previous & clientValidation[key];
                    },
                    true);

            if (!valid) {
                highlight_invalid();
            }

            return valid;
        }
    };
})();;
/*
* Helper Object to get & set cookies 
*/
var SCSCookie = (function () {
    var PAGE_TYPES = {
        LOCATION: 'location',
        PROVIDER: 'provider',
        SYMPTOM: 'symptom',
        PRESCRIPTION: 'prescription',
        SPECIALTY: 'specialty',
        ANY: 'any'
    };

    function getCookie(name) {
        if (typeof SCClientCookieValues !== "undefined" && SCClientCookieValues.hasOwnProperty(name)) {
            return SCClientCookieValues[name];
        }
        else {
            var value = "; " + document.cookie;
            var parts = value.split("; " + name + "=");
            if (parts.length == 2) return parts.pop().split(";").shift();
        }
    };

    function setCookie(name, val, expiryMinutes) {

        if (expiryMinutes == -1) {
            // do not set expiry date on cookie
            document.cookie = name + "=" + val + "; path=/";
        }
        else {
            // default SC cookie behavior
            var date = new Date();
            if (val !== null && !SCSHelper.stringIsNullOrEmpty(val)) {
                if (expiryMinutes != null) date.setTime(date.getTime() + (expiryMinutes * 60 * 1000));
                else date.setTime(date.getTime() + (200 * 24 * 60 * 60 * 1000));
            } else {
                date.setTime(date.getTime() - 10000);
            }

            var expires = "; expires=" + date.toGMTString();
            document.cookie = name + "=" + val + expires + "; path=/";
        }

    };

    function updateCookie(cookie, cookieToCheck, cookieValToCheck) {
        var splitCookie = cookie.split('|');
        var cookieAndValToCheck = cookieToCheck + "=" + cookieValToCheck;
        var updatedCookie = "";
        for (var c = 0; c < splitCookie.length; c++) {
            if (splitCookie[c] != cookieAndValToCheck) {
                updatedCookie = updatedCookie + splitCookie[c] + "|";
            }
            else {
                updatedCookie = updatedCookie + cookieToCheck + "=" + "|";
            }
        }
        return updatedCookie;
    };

    function checkQueryString(name, value) {
        var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
        if (results == null || results[1] != value) {
            return false;
        }
        else {
            return true;
        }
    };

    return {
        PAGE_TYPES: PAGE_TYPES,
        get: getCookie,
        set: setCookie,
        update: updateCookie,
        checkQueryString: checkQueryString
    };
})();;
/*
    Helper for parsing & validating dates
*/
var SCSDateHelper = (function () {
    'use strict';

    var pad = function(value) {
        return value < 10 ? '0' + value : value;
    };

    var isDate = function(d) {
        if (Object.prototype.toString.call(d) !== "[object Date]")
            return false;
        return !isNaN(d.getTime());
    };

    var isPastOrCurrentDate = function(dateOrMonth, day, year) {
        var date = isDate(dateOrMonth) ? dateOrMonth : new Date(year, dateOrMonth - 1, day); //month comes in 1-indexed
        return (Date.now() - date.getTime()) > 0;
    };

    var isFutureDate = function (dateOrMonth, day, year) {
        return !isPastOrCurrentDate(dateOrMonth, day, year);
    };

    var validateDate = function(month, day, year, ageCheck, futureDate) {
        if (month.length > 2 || day.length > 2 || year.length > 4) return false;

        // check for a valid sql date range
        // http://stackoverflow.com/questions/3825893/sql-server-function-to-return-minimum-date-january-1-1753
        var yearCheck = year;
        if (typeof yearCheck === "string") {
            yearCheck = parseInt(yearCheck);
        }
        if (yearCheck < 1753 || yearCheck >= 9999) {
            return false;
        }

        var dayobj = new Date(year, month - 1, day);

        if ((dayobj.getMonth() + 1 != month) || (dayobj.getDate() != day) || (dayobj.getFullYear() != year)) {
            return false;
        } else {
            var currDate = new Date();

            if (futureDate && !isFutureDate(dayobj)) {
                return false;
            }
            if (!futureDate && !isPastOrCurrentDate(dayobj)) {
                return false;
            };

            if (ageCheck) {
                var mSecDiff = currDate - dayobj;
                var ageDays = mSecDiff / 86400000;
                var ageYears = ageDays / 365.24;
                ageYears = Math.floor(ageYears);

                if (ageYears < 18) return false;
            }
            return true;
        }
    };

    return {
        pad: pad,
        isDate: isDate,
        isPastOrCurrentDate: isPastOrCurrentDate,
        validateDate: validateDate,

        getOffset: function(date) {
            var sign = (date.getTimezoneOffset() > 0) ? "-" : "+";
            var offset = Math.abs(date.getTimezoneOffset());
            var hours = pad(Math.floor(offset / 60));
            var minutes = pad(offset % 60);
            return sign + hours + minutes;
        },

        toMSJSON: function(now) {
            var now_utc = new Date(
                now.getUTCFullYear(),
                now.getUTCMonth(),
                now.getUTCDate(),
                12);
            var date = '/Date(' + now_utc.getTime() + ')/';
            return date;
        },
        
        fromMSJSON: function (input) {
            // ASP.NET json date format regex
            var aspNetJsonRegex = /^\/?Date\((\-?\d+)/i,
                matched = aspNetJsonRegex.exec(input),
                tempDate;
            if (matched !== null) {
                tempDate = new Date(+matched[1]);
                var YYYY = tempDate.getUTCFullYear().toString();
                var mm = tempDate.getUTCMonth()+1;
                var dd = tempDate.getUTCDate();
                return mm+"/"+dd+"/"+YYYY;
            }
            return "Invalid date";

        },
        isValidDate: function (date, ageCheck, html5date) {
            ageCheck = ageCheck || false;
            html5date = html5date || false;

            if (html5date) {
                var dateArr = date.replace(/ /g, '').split("-");
            } else {
                var dateArr = date.replace(/ /g, '').split("/");
            }
            
            if (dateArr.length !== 3) {
                return false;
            }

            if (html5date) {
                //html 5 date = YYYY-MM-DD
                return validateDate(dateArr[1], dateArr[2], dateArr[0], ageCheck);
            } else {
                return validateDate(dateArr[0], dateArr[1], dateArr[2], ageCheck);
            }
           
        },
        isValidCreditCardExpirationDate: function(date) {

            var dateArr = date.replace(/ /g, '').split("/");

            if (dateArr.length !== 2) {
                return false;
            }

            return validateDate(dateArr[0], "01", dateArr[1], false, true);
        },

        setTimezoneCookie: function (reloadPage) {
            var cookie = SCSCookie.get("timezoneOffset");
            var timezoneOffset = (new Date()).getTimezoneOffset();
            if (cookie == null || cookie != timezoneOffset) {
                SCSCookie.set("timezoneOffset", timezoneOffset, -1);
                if (typeof reloadPage !== "undefined" && reloadPage) {
                    document.location = document.location;
                }
            }
        }
    };
})();;
/*
    Miscellaneous custom helper functions
*/
var SCSMiscHelper = (function () {
    var noop = function () { };
    var dispatchDomEvent = function(elementId, eventType) {
        // creates DOM event for react components
        var node = document.getElementById(elementId);
        var eventOne = document.createEvent('Event');
        eventOne.initEvent(eventType, true, true, 'window');
        node.dispatchEvent(eventOne);
    };

    var execGlobalFunctionWhenReady = function(namespace, functionName, callback) {
        /*
            Executes callback function when global variable is defined (if dependent on async, such as ga);
                - callback receives window and function as arguments;
        */
        if ((typeof window[namespace] !== "undefined") &&
            (functionName === null || typeof window[namespace][functionName] === 'function')) {
            callback();
        } else {
            setTimeout(function() {
                execGlobalFunctionWhenReady(namespace, functionName, callback);
            }, 1000);
        }
    };

    var setTrackerNameGlobal = function() {
        if (typeof window.ga === 'undefined') {
            return;
        }
        /**
         * sets "trackerName" variable from ga client once loaded;
         */
        var callback = function() {
            window.trackerName = window.ga.getAll()[0].get('name');
        };
        execGlobalFunctionWhenReady('ga', 'getAll', callback);
    };

    var localStorageHelper = (function(key) {
        var Key = key;
        return {
            StorageExists: function() {
                try {
                    var storage = window['localStorage'],
                    test = '__storage_test__';
                    storage.setItem(test, test);
                    storage.removeItem(test);
                    return true;
                }
                catch (e) {
                    return false;
                }
            },
            Set : function(val) {
                localStorage.setItem(Key, JSON.stringify(val));
            },
            Get: function () {
                var val = JSON.parse(localStorage.getItem(Key));
                return typeof val != "undefined" && val != null ? val : [];
            },
            Remove : function() {
                return localStorage.removeItem(Key);
            }
        }
    });

    return {
        getQueryParams: function (queryString) {
            var paramsDictionary = {};
            if (queryString.indexOf('?') === -1) {
                return {};
            }
            if (queryString.indexOf('?') === 0) {
                queryString = queryString.substr(1);
            }
            queryString = queryString.split("?")[1];
            var parts = queryString.split('&');

            for (var i = 0; i < parts.length; i++) {
                var p = parts[i];
                var keyValuePair = p.split('=');

                var key = keyValuePair[0];
                var value = keyValuePair[1];

                value = decodeURIComponent(value);
                value = value.replace(/\+/g, ' ');

                paramsDictionary[key] = value;
            }
            return paramsDictionary;
        },
        createURLParams: function (paramsDictionary) {
            var output = []
            for (key in paramsDictionary) {
                var k = encodeURIComponent(key);
                var v = encodeURIComponent(paramsDictionary[key]);
                output.push(k + "=" + v);
            }
            return output.join("&");
        },
        // URI component helper
        getParameterByName: function (name) {
            name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
            var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
                results = regex.exec(location.search);
            return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
        },
        // distills array into a set of unique items
        unique: function e(a, compareFunc) {
            a.sort(compareFunc);
            for (var i = 1; i < a.length;) {
                if (compareFunc(a[i - 1], a[i]) === 0) {
                    a.splice(i, 1);
                } else {
                    i++;
                }
            }
            return a;
        },
        dispatchDomEvent: dispatchDomEvent,
        setDisabled: function (elementSelector, isDisabled) {
            var element = $(elementSelector);
            if (isDisabled) {
                element.attr('disabled', 'disabled');
            } else {
                element.removeAttr('disabled');
            }
        },
        assignTwilioNumber: function (locationId, providerId, $element) {
            var ga = '';
            try {
                ga = ga.getAll()[0].get('clientId');
            } catch (ex) {
            };

            var twilio = new TwilioNumber(locationId, ga, providerId);
            var number = twilio.getNumber();
            if (number !== null) {
                var prettyNumber = '(' +
                    number.substring(0, 3) +
                    ') ' +
                    number.substring(3, 6) +
                    '-' +
                    number.substring(6, 10);
                $element.attr('href', 'tel:+1' + number).text(prettyNumber);
            }
        },
        updatePageTitle: function (copy) {
            $('title').text(copy + ' | Singlecare');
        },
        noop: noop,
        execGlobalFunctionWhenReady: execGlobalFunctionWhenReady,
        setTrackerNameGlobal: setTrackerNameGlobal,
        initVueObjects: function (objectArray) {
            // { id: , name:, VueClass: }
            objectArray.map(function (obj) {
                var exists = document.getElementById(obj.id);
                if (!exists) return;
                window[obj.name] = new obj.VueClass({
                    el: '#' + obj.id
                });
            });
        },
        LocalStorage: localStorageHelper
    }
})();


// Polyfill
/*
Fix for IE11
*/
if (!String.prototype.includes) {
    String.prototype.includes = function (search, start) {
        'use strict';
        if (typeof start !== 'number') {
            start = 0;
        }

        if (start + search.length > this.length) {
            return false;
        } else {
            return this.indexOf(search, start) !== -1;
        }
    };
};
/*
    Wrapper for custom string manipulation methods
*/
var SCSStringHelper = (function () {
    'use strict';

    return {
        urlify: function (a) {
            return a.toLowerCase().replace(/[^a-z0-9]+/g, "-").replace(/^-+|-+$/g, "-").replace(/^-+|-+$/g, '')
        },

        stringIsNullOrEmpty: function (val) {
            return (val === null) || (typeof val === 'undefined') || val.length === 0 || val.toString().trim().length === 0;
        },

        toTitleCase: function (str) {
            return str.replace(/\w\S*/g, function (txt) { return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase(); });
        },

        // safely converts C# boolean (from <input>) to javascript boolean;
        toBoolean: function (selector) {
            var value = $(selector).val();
            if (value === null || typeof value === 'undefined') return false;
            return value.toLowerCase() === "true";
        }
    }
})();;
/*
    Obj for handling popMessages
*/
var SCSMessages = (function () {
    return {
        ALERT_TYPE: SCNotify.TYPES,
        update: function(error, warning, success) {
            if (!SCSHelper.stringIsNullOrEmpty(error)) {
                SCNotify.page(error, SCNotify.TYPES.ERROR);
            }
            if (!SCSHelper.stringIsNullOrEmpty(warning)) {
                SCNotify.page(warning, SCNotify.TYPES.WARNING);
            }
            if (!SCSHelper.stringIsNullOrEmpty(success)) {
                SCNotify.page(success, SCNotify.TYPES.SUCCESS);
            }
        },
        popMessage: function(type, msg) {
            SCNotify.page(msg, type);
        }
    };
})();;
/*
    Global wrapper for window / resizing methods
*/
var SCSWindowHelper = (function () {
    return {
        equalheight: function(container) {
            var currentTallest = 0,
                currentRowStart = 0,
                rowDivs = new Array(),
                $el,
                topPosition = 0;

            $(container).each(function() {

                $el = $(this);
                $($el).height('auto')
                topPostion = $el.position().top;

                if (currentRowStart != topPostion) {
                    for (currentDiv = 0; currentDiv < rowDivs.length; currentDiv++) {
                        rowDivs[currentDiv].height(currentTallest);
                    }
                    rowDivs.length = 0; // empty the array
                    currentRowStart = topPostion;
                    currentTallest = $el.height();
                    rowDivs.push($el);
                } else {
                    rowDivs.push($el);
                    currentTallest = (currentTallest < $el.height()) ? ($el.height()) : (currentTallest);
                }
                for (currentDiv = 0; currentDiv < rowDivs.length; currentDiv++) {
                    rowDivs[currentDiv].height(currentTallest);
                }
            });
        },
        addUrlParameters: function(url, keyValuePairs) {
            // adds key-value pairs as URL parameters
            var urlComponents = url.split('?');
            var existingQuery = urlComponents > 1
                ? urlComponents[1].split('#')[0]
                : "";

            var urlParameters = [existingQuery];
            for (var key in keyValuePairs) {
                if (keyValuePairs.hasOwnProperty(key)) {
                    urlParameters.push(key + "=" + encodeURIComponent(keyValuePairs[key]));
                }
            }
            var query = urlParameters.filter(function(param) {
                    return !!param.length;
                })
                .join("&");
            var hash = url.split('#').length > 1 ? "#" + url.split('#')[1] : "";
            return urlComponents[0] + "?" + query + hash;
        },

        fnExists: function(fnName) {
            var fn = window[fnName];
            return typeof fn === 'function';
        }
    };
})();;
var SCSUserAgentHelper = (function () {
    var userAgents = {
        ANDROID: 'android',
        IOS: 'ios',
        UNKNOWN: 'unknown'
    };

    return {
        userAgents: userAgents,
        fetchUserAgent: function() {
            var userAgent = navigator.userAgent || navigator.vendor || window.opera;

            if (/android/i.test(userAgent)) {
                return userAgents.ANDROID;
            }

            if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
                return userAgents.IOS;
            }

            return userAgents.UNKNOWN;
        },
        isMobileUser: function() {
            var userAgent = this.fetchUserAgent();
            return (userAgent === userAgents.IOS || userAgent === userAgents.ANDROID);
        }
    };
})();;
/*
    Helper for password validation
     * works in conjunction with _passwordValidation.cshtml partial
     * listens to password input and highlights matching validation parameter in green
*/
var SCSPasswordValidationHelper = (function () {
    'use strict';
    var passwordValidators = {
        validCharLength: function(value) { return value.length > 7; },
        validUpperCase: function(value) { return /[A-Z]{1,}/.test(value); },
        validDigits: function (value) { return /\d{1,}/.test(value); },
        validLowerCase: function (value) { return /[a-z]{1,}/.test(value); },
    };
    var toggleClass = function(selector, addClass, className) {
        var $el = $(selector);
        if ($el.hasClass(className) && !addClass) {
            $el.removeClass(className);
        } else if (!$el.hasClass(className) && addClass) {
            $(selector).addClass(className);
        }
    };
    var validations = [
        {
            fn: passwordValidators.validCharLength,
            selector: '.char-length'
        },
        {
            fn: passwordValidators.validDigits,
            selector: '.digits'
        },
        {
            fn: passwordValidators.validUpperCase,
            selector: '.uppercase'
        },
        {
            fn: passwordValidators.validLowerCase,
            selector: '.lowercase'
        }
    ];

    return {
        password: passwordValidators,
        passwordValidations: validations,
        toggleClass: toggleClass,
        initPasswordValidation: function(formSelector) {
            $(formSelector + " input[type=password]")
                .on('focus keyup',
                    function() {
                        var password = $(this).val();
                        var parent = '.sc-form-pw-req';

                        for (var i = 0; i < validations.length; i++) {
                            var validation = validations[i];
                            var fullSelector = parent + " " + validation.selector;
                            toggleClass(fullSelector, validation.fn(password), 'is-valid');
                        }
                        var isValid = $(parent + ' li').length === $(parent + ' .is-valid').length;
                        toggleClass(parent + ' .valid-password', !isValid, 'hide');
                        toggleClass(parent + ' ul', isValid, 'hide');
                    });
        }
    };
})();;
var SCSAuth = (function () {
    var URLS = {
        DASHBOARD_URL: "/member",
        LOGIN: "/auth/posttologin",
        FORGOTPASSWORD: "/auth/posttoforgotpassword"
    };
    var UX_TYPES = {
        SINGLECARE: "singlecare",
        INCARERX: "incaresavings",
        WALMART: "wm"
    };

    // Auth services -- Modal Controller
    var scService = function(data, url, callback) {
        $.ajax({
            url: url,
            dataType: 'JSON',
            contentType: 'application/json; charset=utf-8',
            type: 'POST',
            data: JSON.stringify(data)
        })
        .done(function (responseContract) {
            if (typeof callback !== 'undefined') {
                callback(responseContract);
            }
        })
        .fail(function (err) {

            // Temporary Hack until we get rid of modals. See comment in HandleAntiForgeryError.cs
            if (err.responseText === '|| BOOM HACKALAKA ||') {
                $('#send-coupon').hide();
                SCSMessages.update("Another was login was detected. Please try again after the page refreshes.", "", "");
                window.location.reload();
            }
            else {
                SCSMessages.update("There was a server error. Please try again.", "", "");
                if (typeof callback !== 'undefined') {
                    callback({ Error: "There was a server error.", ErrorDetails: [err], Success: false });
                }
            }
        });
    };
    var scServiceNonJson = function (data, url, callback) {
        //this method is used when the datatype is not JSON
        $.ajax({
            url: url,
            type: 'POST',
            data: data
        })
        .done(function (responseContract) {
            if (typeof callback !== 'undefined') {
                callback(responseContract);
            }
        })
        .fail(function (err) {
            SCSMessages.update("There was a server error. Please try again.", "", "");
            callback({ Error: "There was a server error.", ErrorDetails: [err], Success: false });
        });
    };

    return {
        UX_TYPES: UX_TYPES,
        URLS: URLS,
        SESSION_EXPIRED:
            "For security reasons, your session expires after 60 minutes of inactivity, and you can only be logged into one device at a time.",
        scService: scService,
        scServiceNonJson: scServiceNonJson,
    };
})();;
var SCSGeolocationHelper = (function () {
    var ERRORS = {
        "browser": "We're sorry, geolocation is not available in your browser.",
        "location": "We're sorry, we were unable to geolocate your position"
    };
    var showError = true;
    var GEOCODER = function() {
        return (typeof google != "undefined") ? new google.maps.Geocoder() : undefined;
    };

    var extractZipCode = function(results) {
        for (var i = 0; i < results.length; i++) {
            for (var j = 0; j < results[i].address_components.length; j++) {
                for (var k = 0; k < results[i].address_components[j].types.length; k++) {
                    if (results[i].address_components[j].types[k] === "postal_code") {
                        return results[i].address_components[j].short_name;
                    }
                }
            }
        }
        return "";
    };

    var geocodeCallback = function(results, status) {
        if (status === google.maps.GeocoderStatus.OK && results.length) {
            var postal = extractZipCode(results);
            if (!SCSHelper.stringIsNullOrEmpty(postal)) {
                $('.near-me').removeClass('error');
                $('.sc-nearme .zip-box').removeClass('error');
                $('.modal-footer input[type="text"]').val(postal);
                vmSearchBar.zipValue = postal;
                vmSearchBar.validateZip();
                showError = false;
            }
        }
    };

    var successfulPositionCallback = function (position) {
        var latlng = {
            lat: position.coords.latitude,
            lng: position.coords.longitude
        };
        var geocoder = GEOCODER();
        if (geocoder != undefined) {
            geocoder.geocode({ 'location': latlng }, geocodeCallback);
        }
        else {
            SCSGeolocationHelper.showError = false;
            var latlng = position.coords.latitude + "," +position.coords.longitude;
            $.ajax({
                dataType: "json",
                type: "POST",
                url: "/google-map-geolocation",
                data: { latlng: latlng }
            })
            .done(function (data) {
                googleMapGeoCallback(data);
            })
            .fail(function () {
                SCNotify.page("There was an error with locating you.", SCNotify.TYPES.ERROR);
            });
        }            
    };

    var googleMapGeoCallback = function (resp) {
        if (resp.status = "OK" && resp.results.length) {
            var postal = extractZipCode(resp.results);
            if (!SCSHelper.stringIsNullOrEmpty(postal)) {
                vmSearchBar.zipValue = postal;
                vmSearchBar.validateZip();
            }
        }
        else {
            SCNotify.page("There was an error with locating you.", SCNotify.TYPES.ERROR);
        }
    };

    var failurePosition = function () {
        this.showError = true;
    };

    var setGeolocationBtn = function() {
        $('.location-btn')
            .click(function(e) {
                if ("geolocation" in navigator) {
                    navigator.geolocation.getCurrentPosition(
                        successfulPositionCallback,
                        failurePosition);
                } else {
                    window.alert(ERRORS.browser);
                    SCSGeolocationHelper.showError = false;
                }
                if (SCSGeolocationHelper.showError) {
                    window.alert(ERRORS.location);
                }
            });
    };

    return {
        setGeolocationBtn: setGeolocationBtn,
        initGeoBtn: function() {
            setTimeout(function() {
                    setGeolocationBtn();
                },
                1000);
        }
    };
})();;
var SCModal = (function() {
    var open = function(modalID, modalRender) {
        $('body').addClass('sc-modal-open');
        $('#' + modalID).addClass('sc-modal-show');
        if (typeof modalRender === 'function') {
            modalRender();
        }
    };

    var close = function(modalID, modalRender) {
        $('body').removeClass('sc-modal-open');
        $('#' + modalID).removeClass('sc-modal-show');
        if (typeof modalRender === 'function') {
            modalRender();
        }
    };

    var init = function(openRender, closeRender) {
        $('.sc-modal-link')
            .each(function() {
                var modalID = $(this).attr('data-modal-id');
                $(this)
                    .on('click',
                        function() {
                            open(modalID, openRender);
                            return false;
                        });
            });

        $('.sc-modal')
            .each(function() {
                var closeLinks = $(this).find('.sc-modal-close-link'),
                    modalID = $(this).attr('id');

                closeLinks.on('click',
                    function() {
                        close(modalID, closeRender);
                        return false;
                    });

                // Closes modal when clicking outside the box
                $(this)
                    .on('click',
                        function(event) {
                            if ($(event.target).hasClass('sc-modal-dialog') ||
                                $(event.target).hasClass('sc-modal-content')) {
                                close(modalID, closeRender);
                            }
                        });
            });

        // Closes modal when pressing the "Esc" key
        $(document)
            .keyup(function(e) {
                openModal = $('.sc-modal.sc-modal-show');
                if (openModal.length > 0) {
                    modalID = openModal.attr('id');
                    if (e.keyCode === 27) { // Esc key
                        close(modalID, closeRender);
                    }
                }
            });
    };

    return {
        open: open,
        close: close,
        init: init
    }
})(document);;
/*
    SingleCare forms validation lib
        - binds all <form> elements in _public, _member, _provider
        - validates on DOM elements with data-attribute "validate"
        - toggles submit button "disabled" state (if completed & valid)
        - toggles ("valid", null, "invalid") class states (for css) on input element
        - appends <span class="label-error"> with error message underneath input
        
        EXAMPLE: 
            <input data-validate="required,email" />
            
            ** custom error message **
            <input data-validate="email" data-error-message="Please choose a legit email" />
*/

var SCSForms = (function () {
    var ERROR_LABEL = 'span.label-error';
    var STATES = {
        INVALID: 'invalid',
        VALID: 'valid'
    };
    var VALIDATORS = {
        alphabetical: {
            fn: function (value) {
                return SCSHelper.isAlphabetical(value);
            },
            message: 'This value may only contain letters, dashes or apostrophes.',
        },
        alphanumeric: {
            fn: function (value) {
                return SCSHelper.isAlphanumeric(value);
            },
            message: 'This value may only contain letters and numbers.',
        },
        birthdate: {
            fn: function (value) {
                return SCSHelper.isValidDate(value);
            },
            message: 'Please enter a valid birthdate (MM/DD/YYYY).',
        },
        creditcard: {
            fn: function (value) {
                return SCSHelper.isValidCCFormat(value);
            },
            message: 'Please enter a valid credit card number.',
        },
        creditcarddate: {
            fn: function (value) {
                return SCSHelper.isValidCreditCardExpirationDate(value);
            },
            message: 'Please enter a valid expiration date.',
        },
        couponprice: {
            fn: function (value) {
                return SCSHelper.isValidCurrencyAmount(value);
            },
            message: 'Please enter a valid coupon price.'
        },
        currencyamount: {
            fn: function (value) {
                return SCSHelper.isValidCurrencyAmount(value);
            },
            message: 'Please enter a valid currency amount.'
        },
        cvv: {
            fn: function (value) {
                return SCSHelper.isValidCVVFormat(value);
            },
            message: 'Please enter a valid code.',
        },
        deliverableemail: {
            fn: function (value) {
                return SCSHelper.isVerifiedEmail(value);
            },
            message: 'The email address you entered is invalid. Please try another.',
        },
        digits: {
            fn: function (value) {
                return !isNaN(value);
            },
            message: 'This value must contain numbers only.',
        },
        dropdownrequired: {
            fn: function (value) {
                return value !== "-1" && value !== "" && value !== "0" && value !== "Select" && value !== "---";
            },
            message: 'This input is required.',
        },
        email: {
            fn: function (value) {
                return SCSHelper.isValidEmail(value);
            },
            message: 'Please enter a valid email.',
        },
        FTINnumber: {
            fn: function (value) {
                return SCSHelper.isValidFTIN(value);
            },
            message: 'FTIN must contain nine digits.'
        },
        groupnumber: {
            fn: function (value) {
                return SCSHelper.isValidGroupNumber(value);
            },
            message: 'Group number must have six characters.'
        },
        html5dateField: {
            fn: function (value) {
                return SCSHelper.isValidDate(value, false, true);
            },
            message: 'Please enter a valid date (MM/DD/YYYY).'
        },
        matches: {
            fn: function(value, elementId) {
                return SCSHelper.matchesTo(value, elementId);
            },
            message: 'This value must match.'
        },
        membername: {
            fn: function (value) {
                return SCSHelper.isValidName(value);
            },
            message: 'Invalid name (try complete names containing letters, dashes or apostrophes).',
        },
        membernumber: {
            fn: function (value) {
                return SCSHelper.isValidMemberNumber(value);
            },
            message: 'Member number must have nine characters.'
        },
        wmauthnumber: {
            fn: function (value) {
                return SCSHelper.isValidMemberNumber(value);
            },
            message: 'Invalid auth number.'
        },
        NPInumber: {
            fn: function (value) {
                return SCSHelper.isValidNPI(value);
            },
            message: 'NPI must contain ten digits.'
        },
        over18: {
            fn: function (value) {
                return SCSHelper.isValidDate(value, true);
            },
            message: 'Please confirm your birthdate. Members must be at least 18 years old.',
        },
        password: {
            fn: function (value) {
                return SCSHelper.isValidPassword(value);
            },
            message: 'This password does not meet the criteria. Please try again.',
        },
        passwordlite: {
            fn: function (value) {
                return SCSHelper.isValidPasswordLite(value);
            },
            message: 'This password does not meet the criteria. Please try again.',
        },
        phonenumber: {
            fn: function (value) {
                return SCSHelper.isValidPhoneNumber(value);
            },
            message: 'Phone number must be ten digits and include area code.',
        },
        purchasedate: {
            fn: function (value) {
                return SCSHelper.isValidDate(value);
            },
            message: 'Please enter a valid purchase date (MM/DD/YYYY).',
        },
        purchaseprice: {
            fn: function (value) {
                return SCSHelper.isValidCurrencyAmount(value);
            },
            message: 'Please enter a valid purchase price.'
        },
        required: {
            fn: function(value) {
                return !SCSHelper.stringIsNullOrEmpty(value);
            },
            message: 'This value is required.'
        },
        zipcode: {
            fn: function(value) {
                return SCSHelper.isValidZip(value);
            },
            message: 'Please enter a valid zip code.',
        },
        address: {
            fn: function (value) {
                return SCSHelper.isValidAddress(value);
            },
            message: 'Please enter a valid address.'
        }
    };

    var setState = function(selector, isValid) {
        isValid
            ? $(selector).removeClass(STATES.INVALID).addClass(STATES.VALID)
            : $(selector).removeClass(STATES.VALID).addClass(STATES.INVALID);
    };

    var setNeutral = function(selector) {
        if (typeof selector === 'undefined') {
            selector = this;
        };
        $(selector)
            .removeClass(STATES.VALID)
            .removeClass(STATES.INVALID)
            .siblings(ERROR_LABEL)
            .remove();
    };

    var setInvalid = function(selector, msg) {
        var $element = $(selector);
        var $label = $element.siblings(ERROR_LABEL);
        if ($label.length === 0) {
            $label = $('<span class="label-error"></span>');
            $element.after($label);
        }
        var message = $element.data('error-message') || msg;
        $label.text(message);
        $element
            .removeClass(STATES.VALID)
            .addClass(STATES.INVALID)
            .on('change',
                function() {
                    setNeutral(selector);
                });
    };

    var setValid = function(selector) {
        setNeutral(selector);
        $(selector).addClass(STATES.VALID);
    };
    
    var validateInput = function(element, dispatchSuccessOnly) {
        var $element = $(element);
        if (typeof $element.data('validate') === 'undefined') return;

        var value = $element.val();
        var keys = $element.data('validate').split(",");

        var validator, key, isValid;
        for (var i = 0; i < keys.length; i++) {
            key = keys[i].trim();
            validator = VALIDATORS[key];
            if (typeof validator === 'undefined' || validator === null) continue;

            switch (key) {
                case 'matches':
                    isValid = validator.fn(value, $element.data('match-to'));
                    break;
                case 'deliverableemail':
                    isValid = dispatchSuccessOnly ? true : validator.fn(value);
                    break;
                default:
                    isValid = validator.fn(value);
                    break;
            }
            if (!isValid) break;
        }
        // if input is not required and is empty, explicitly set as valid;
        if (keys.indexOf('required') === -1 && !VALIDATORS.required.fn(value)) {
            isValid = true;
        }

        var silentInvalidState = !isValid && dispatchSuccessOnly; /* avoids marking input as invalid if e.g. user is still typing */
        if (!silentInvalidState) {
            isValid
                ? setValid(element)
                : setInvalid(element, validator.message);
        }
        return isValid;
    };

    var filterFauxFormElements = function (elements) {
        elements = $(elements).filter(function () {
            return $(this).parents('#faux-form').length === 0;
        });

        return elements;
    }

    var formIsValid = function (form) {

        var inputs = $(form)
            .find('[data-validate]');

        if ($(form).is('#faux-form') === false) {
            inputs = filterFauxFormElements(inputs);
        }

        var isValid = true;
        for (var i = 0; i < inputs.length; i++) {
            if (!validateInput(inputs[i], true)) {
                isValid = false;
                break;
            }
        }
        return isValid;
    };

    var formIsComplete = function (form) {
        var requiredInputs = $(form)
            .find('[data-validate]')
            .filter(function() {
                return $(this).data('validate').indexOf('required') > -1;
            });

        if ($(form).is('#faux-form') === false) {
            requiredInputs = filterFauxFormElements(requiredInputs);
        }

        var requiredValue;
        for (var i = 0; i < requiredInputs.length; i++) {
            requiredValue = $(requiredInputs[i]).val();
            if (SCSHelper.stringIsNullOrEmpty(requiredValue)) {
                return false;
            }
        };
        var radioRows = $(form)
            .find('.sc-form-row')
            .has('.sc-form__radio [data-validate]');

        for (var j = 0; j < radioRows.length; j++) {
            if ($(radioRows[j]).find('input[type=radio]:checked').length === 0) {
                return false;
            }
        }
        return true;
    };

    var setSubmittable = function (form, submitButton) {
        var isValid = formIsComplete(form) && formIsValid(form);
        setState(form, isValid);
        var $submit = $(form).find(submitButton);
        SCSHelper.setDisabled($submit, !isValid);
    };

    var formatInput = function(selector) {
        var format = $(selector).data('format');
        switch (format) {
        case "date":
            $(selector).formance('format_mm_dd_yyyy');
            break;
        case "expirationdate":
            $(selector).formance('format_credit_card_expiry');
            break;
        case "cc":
            $(selector).formance('format_credit_card_number');
            break;
        case "cvv":
            $(selector).formance('format_credit_card_cvc');
            break;
        case "phone":
            $(selector).formance('format_phone_number');
            break;
        }
    };

    var _init = function(form, submitButton) {
        $(form)
            .find('[data-validate]')
            .unbind()
            .on('blur',
                function() {
                    validateInput(this);
                })
            .on('keyup',
                function() {
                    validateInput(this, true);
                });

        $(form)
            .ready(function() {
                $(form)
                    .find('[data-format]')
                    .map(function () {
                        formatInput(this);
                    });
            });

        $(form)
            .ready(function() {
                setSubmittable(form, submitButton);
            })
            .on('focus keyup change input blur', function() {
                setSubmittable(form, submitButton);
            })
            .on('submit',
                function(event) {
                    if (!formIsValid(form)) {
                        event.preventDefault();
                    }
                });
    }

    var init = function(form) {
        _init(form, '[type=submit]');
        _init('#faux-form', '#faux-submit');
    };

    var initAll = function(selector) {
        $(selector)
            .map(function() {
                init(this);
            });
        $('.allow-number-only').on('keydown', SCSHelper.allowNumbersAndHyphensOnly);
    };

    return {
        VALIDATORS: VALIDATORS,
        STATES: STATES,
        validateInput: validateInput,
        formIsValid: formIsValid,
        init: init,
        initAll: initAll,
        setSubmittable: setSubmittable
    };
})();;
/*
    Global wrapper for SCS services
*/ 
var SCS = (function () {
    var apiToken = '',
        userId = '',
        impersonateUserId = '',
        prefix = '',
        env = '',
        partner = '',
        partnerPassword = '',
        SERVICES = {

            'ProviderService': 'ProviderService.svc/',
            'MemberService': 'MemberService.svc/',
            'VisitService': 'VisitService.svc/',
            'BillingService': 'BillingService.svc/',
            'ContactService': 'ContactService.svc/',
            'LocationService': 'LocationService.svc/',
            'TransactionService': 'TransactionService.svc/',
            'WorkflowService': 'WorkflowService.svc/',
            'PBMService': 'PBMService.svc/'
        },
        SERVICES_WEBAPI = {
            'PBMWebAPI': 'api/pbm/'
        };

    var stringIsNullOrEmpty = SCSStringHelper.stringIsNullOrEmpty;
    function call(service, method, obj, callback, sync) {
        var contentType = "application/json; charset=utf-8";
        sync = sync || false;
        if (stringIsNullOrEmpty(env)) {
            env = window.AppSettings.ServiceURL;
            partner = window.AppSettings.DefaultPartnerUser;
            partnerPassword = window.AppSettings.DefaultPartnerPassword;
            if (sync) {
                return callSCS(service, method, obj, callback, sync);
            }
            else {
                callSCS(service, method, obj, callback);
            }
        } else {
            if (sync) {
                return callSCS(service, method, obj, callback, sync);
            }
            else {
                callSCS(service, method, obj, callback);
            }
        }
    }

    function callWebApi(service, method, obj, callback, sync) {
        var contentType = "application/json; charset=utf-8";
        sync = sync || false;
        if (stringIsNullOrEmpty(env)) {
            var uri = window.AppSettings.WebAPIUrlBase + service + method;
            $.ajax({
                url: uri,
                dataType: 'JSON',
                type: "POST",
                contentType: "application/json; charset=utf-8",
                data: JSON.stringify(obj.Value)
            }).done(function (data) {
                if (typeof callback !== 'undefined') {
                    callback(data);
                }
            }).fail(function (err) {
                callback({ Errors: ["There was a server error."], ErrorDetails: [err], Success: false });
            });
        }
    }

    function callSCS(service, method, obj, callback, sync) {
        sync = sync || false;
        if (stringIsNullOrEmpty(prefix)) prefix = '/services/v1_0/' + window.SERVICE_LEVEL + '/';
        var uri = prefix + service + method;
        if (!stringIsNullOrEmpty(apiToken) && !stringIsNullOrEmpty(userId)) {
            if (obj.Authentication != null && !stringIsNullOrEmpty(obj.Authentication.ImpersonateUserId)) {
                impersonateUserId = obj.Authentication.ImpersonateUserId;
            }
            if (typeof obj.Authentication === "undefined") obj.Authentication = {};

            obj.Authentication.ApiToken = apiToken;
            obj.Authentication.UserId = userId;
            if (!stringIsNullOrEmpty(impersonateUserId) && service != 'PBMService.svc/')
                obj.Authentication.ImpersonateUserId = impersonateUserId;
        } else if (!stringIsNullOrEmpty(SCSCookie.get("usertoken"))) {
            var vals = SCSCookie.get("usertoken").split('!');
            userId = vals[0];
            apiToken = vals[1];

            if (typeof obj.Authentication === "undefined") obj.Authentication = {};
            obj.Authentication.ApiToken = apiToken;
            obj.Authentication.UserId = userId;
        }
        if (!stringIsNullOrEmpty(SCSCookie.get("cs-cookie")) && stringIsNullOrEmpty(obj.Authentication.ImpersonateUserId) && service != 'PBMService.svc/') {
            obj.Authentication.ImpersonateUserId = SCSCookie.get("cs-cookie");
        }

        if (typeof XDomainRequest != "undefined") {
            var xhr = new XDomainRequest();
            xhr.open('POST', env + uri);
            callback = callback || function() {};
            xhr.onload = function () {
                callback(JSON.parse(xhr.responseText));
            };

            xhr.onerror = function () {
                SCSMessages.update("There was a server error. Please try again.", "", "");
                callback({ Errors: ["There was a server error."], ErrorDetails: [], Success: false });
            };

            xhr.send(JSON.stringify(obj));
        } else {
            if (sync) {
                return $.ajax({
                    url: env + uri,
                    dataType: 'JSON',
                    contentType: 'application/json; charset=utf-8',
                    type: 'POST',
                    async: !sync,
                    data: JSON.stringify(obj)
                }).responseText;
            } else {
                $.ajax({
                    url: env + uri,
                    dataType: 'JSON',
                    contentType: 'application/json; charset=utf-8',
                    type: 'POST',
                    data: JSON.stringify(obj)
                }).done(function (responseContract) {
                    if (typeof callback !== 'undefined') {
                        callback(responseContract);
                    }
                }).fail(function (err) {
                    // There appears to be an issue with Firefox properly handling/aborting an
                    // ajax call when a page is being unloaded so only going to show the
                    // alert if we get a responseJSON during the error otherwise hide the error 
                    // and just do the callback so the calling code will handle the failure
                    // properly.
                    if (err.responseJSON) {
                        SCSMessages.update("There was a server error. Please try again.", "", "");
                    }
                    callback({ Errors: ["There was a server error."], ErrorDetails: [err], Success: false });
                });
            }
        }
    }

    var cookie = SCSCookie.get("usertoken");
    if (!stringIsNullOrEmpty(cookie)) {
        var vals = cookie.split('!');
        userId = vals[0];
        apiToken = vals[1];
    }
    window.SCMemberId = userId;
    var cs = SCSCookie.get("cs-cookie");
    if (!stringIsNullOrEmpty(cs)) {
        impersonateUserId = cs;
    }

    // public
    return {
        call: call,
        callWebApi: callWebApi,
        SERVICES: SERVICES,
        SERVICES_WEBAPI: SERVICES_WEBAPI
    };
})();;
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2014 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/master/LICENSE
 */

// vim: ts=4 sts=4 sw=4 expandtab

// Add semicolon to prevent IIFE from being passed as argument to concatenated code.
;

// UMD (Universal Module Definition)
// see https://github.com/umdjs/umd/blob/master/returnExports.js
(function (root, factory) {
    'use strict';
    /*global define, exports, module */
    if (typeof define === 'function' && define.amd) {
        // AMD. Register as an anonymous module.
        define(factory);
    } else if (typeof exports === 'object') {
        // Node. Does not work with strict CommonJS, but
        // only CommonJS-like enviroments that support module.exports,
        // like Node.
        module.exports = factory();
    } else {
        // Browser globals (root is window)
        root.returnExports = factory();
    }
}(this, function () {

/**
 * Brings an environment as close to ECMAScript 5 compliance
 * as is possible with the facilities of erstwhile engines.
 *
 * Annotated ES5: http://es5.github.com/ (specific links below)
 * ES5 Spec: http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf
 * Required reading: http://javascriptweblog.wordpress.com/2011/12/05/extending-javascript-natives/
 */

// Shortcut to an often accessed properties, in order to avoid multiple
// dereference that prices universally.
var ArrayPrototype = Array.prototype;
var ObjectPrototype = Object.prototype;
var FunctionPrototype = Function.prototype;
var StringPrototype = String.prototype;
var NumberPrototype = Number.prototype;
var array_slice = ArrayPrototype.slice;
var array_splice = ArrayPrototype.splice;
var array_push = ArrayPrototype.push;
var array_unshift = ArrayPrototype.unshift;
var call = FunctionPrototype.call;

// Having a toString local variable name breaks in Opera so use to_string.
var to_string = ObjectPrototype.toString;

var isFunction = function (val) {
    return to_string.call(val) === '[object Function]';
};
var isRegex = function (val) {
    return to_string.call(val) === '[object RegExp]';
};
var isArray = function isArray(obj) {
    return to_string.call(obj) === '[object Array]';
};
var isString = function isString(obj) {
    return to_string.call(obj) === '[object String]';
};
var isArguments = function isArguments(value) {
    var str = to_string.call(value);
    var isArgs = str === '[object Arguments]';
    if (!isArgs) {
        isArgs = !isArray(value) &&
          value !== null &&
          typeof value === 'object' &&
          typeof value.length === 'number' &&
          value.length >= 0 &&
          isFunction(value.callee);
    }
    return isArgs;
};

/* inlined from http://npmjs.com/define-properties */
var defineProperties = (function (has) {
  var supportsDescriptors = Object.defineProperty && (function () {
      try {
          Object.defineProperty({}, 'x', {});
          return true;
      } catch (e) { /* this is ES3 */
          return false;
      }
  }());

  // Define configurable, writable and non-enumerable props
  // if they don't exist.
  var defineProperty;
  if (supportsDescriptors) {
      defineProperty = function (object, name, method, forceAssign) {
          if (!forceAssign && (name in object)) { return; }
          Object.defineProperty(object, name, {
              configurable: true,
              enumerable: false,
              writable: true,
              value: method
          });
      };
  } else {
      defineProperty = function (object, name, method, forceAssign) {
          if (!forceAssign && (name in object)) { return; }
          object[name] = method;
      };
  }
  return function defineProperties(object, map, forceAssign) {
      for (var name in map) {
          if (has.call(map, name)) {
            defineProperty(object, name, map[name], forceAssign);
          }
      }
  };
}(ObjectPrototype.hasOwnProperty));

//
// Util
// ======
//

// ES5 9.4
// http://es5.github.com/#x9.4
// http://jsperf.com/to-integer

function toInteger(num) {
    var n = +num;
    if (n !== n) { // isNaN
        n = 0;
    } else if (n !== 0 && n !== (1 / 0) && n !== -(1 / 0)) {
        n = (n > 0 || -1) * Math.floor(Math.abs(n));
    }
    return n;
}

function isPrimitive(input) {
    var type = typeof input;
    return input === null ||
        type === 'undefined' ||
        type === 'boolean' ||
        type === 'number' ||
        type === 'string';
}

function toPrimitive(input) {
    var val, valueOf, toStr;
    if (isPrimitive(input)) {
        return input;
    }
    valueOf = input.valueOf;
    if (isFunction(valueOf)) {
        val = valueOf.call(input);
        if (isPrimitive(val)) {
            return val;
        }
    }
    toStr = input.toString;
    if (isFunction(toStr)) {
        val = toStr.call(input);
        if (isPrimitive(val)) {
            return val;
        }
    }
    throw new TypeError();
}

var ES = {
    // ES5 9.9
    // http://es5.github.com/#x9.9
    ToObject: function (o) {
        /*jshint eqnull: true */
        if (o == null) { // this matches both null and undefined
            throw new TypeError("can't convert " + o + ' to object');
        }
        return Object(o);
    },
    ToUint32: function ToUint32(x) {
        return x >>> 0;
    }
};

//
// Function
// ========
//

// ES-5 15.3.4.5
// http://es5.github.com/#x15.3.4.5

var Empty = function Empty() {};

defineProperties(FunctionPrototype, {
    bind: function bind(that) { // .length is 1
        // 1. Let Target be the this value.
        var target = this;
        // 2. If IsCallable(Target) is false, throw a TypeError exception.
        if (!isFunction(target)) {
            throw new TypeError('Function.prototype.bind called on incompatible ' + target);
        }
        // 3. Let A be a new (possibly empty) internal list of all of the
        //   argument values provided after thisArg (arg1, arg2 etc), in order.
        // XXX slicedArgs will stand in for "A" if used
        var args = array_slice.call(arguments, 1); // for normal call
        // 4. Let F be a new native ECMAScript object.
        // 11. Set the [[Prototype]] internal property of F to the standard
        //   built-in Function prototype object as specified in 15.3.3.1.
        // 12. Set the [[Call]] internal property of F as described in
        //   15.3.4.5.1.
        // 13. Set the [[Construct]] internal property of F as described in
        //   15.3.4.5.2.
        // 14. Set the [[HasInstance]] internal property of F as described in
        //   15.3.4.5.3.
        var bound;
        var binder = function () {

            if (this instanceof bound) {
                // 15.3.4.5.2 [[Construct]]
                // When the [[Construct]] internal method of a function object,
                // F that was created using the bind function is called with a
                // list of arguments ExtraArgs, the following steps are taken:
                // 1. Let target be the value of F's [[TargetFunction]]
                //   internal property.
                // 2. If target has no [[Construct]] internal method, a
                //   TypeError exception is thrown.
                // 3. Let boundArgs be the value of F's [[BoundArgs]] internal
                //   property.
                // 4. Let args be a new list containing the same values as the
                //   list boundArgs in the same order followed by the same
                //   values as the list ExtraArgs in the same order.
                // 5. Return the result of calling the [[Construct]] internal
                //   method of target providing args as the arguments.

                var result = target.apply(
                    this,
                    args.concat(array_slice.call(arguments))
                );
                if (Object(result) === result) {
                    return result;
                }
                return this;

            } else {
                // 15.3.4.5.1 [[Call]]
                // When the [[Call]] internal method of a function object, F,
                // which was created using the bind function is called with a
                // this value and a list of arguments ExtraArgs, the following
                // steps are taken:
                // 1. Let boundArgs be the value of F's [[BoundArgs]] internal
                //   property.
                // 2. Let boundThis be the value of F's [[BoundThis]] internal
                //   property.
                // 3. Let target be the value of F's [[TargetFunction]] internal
                //   property.
                // 4. Let args be a new list containing the same values as the
                //   list boundArgs in the same order followed by the same
                //   values as the list ExtraArgs in the same order.
                // 5. Return the result of calling the [[Call]] internal method
                //   of target providing boundThis as the this value and
                //   providing args as the arguments.

                // equiv: target.call(this, ...boundArgs, ...args)
                return target.apply(
                    that,
                    args.concat(array_slice.call(arguments))
                );

            }

        };

        // 15. If the [[Class]] internal property of Target is "Function", then
        //     a. Let L be the length property of Target minus the length of A.
        //     b. Set the length own property of F to either 0 or L, whichever is
        //       larger.
        // 16. Else set the length own property of F to 0.

        var boundLength = Math.max(0, target.length - args.length);

        // 17. Set the attributes of the length own property of F to the values
        //   specified in 15.3.5.1.
        var boundArgs = [];
        for (var i = 0; i < boundLength; i++) {
            boundArgs.push('$' + i);
        }

        // XXX Build a dynamic function with desired amount of arguments is the only
        // way to set the length property of a function.
        // In environments where Content Security Policies enabled (Chrome extensions,
        // for ex.) all use of eval or Function contructor throws an exception.
        // However in all of these environments Function.prototype.bind exists
        // and so this code will never be executed.
        bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this, arguments); }')(binder);

        if (target.prototype) {
            Empty.prototype = target.prototype;
            bound.prototype = new Empty();
            // Clean up dangling references.
            Empty.prototype = null;
        }

        // TODO
        // 18. Set the [[Extensible]] internal property of F to true.

        // TODO
        // 19. Let thrower be the [[ThrowTypeError]] function Object (13.2.3).
        // 20. Call the [[DefineOwnProperty]] internal method of F with
        //   arguments "caller", PropertyDescriptor {[[Get]]: thrower, [[Set]]:
        //   thrower, [[Enumerable]]: false, [[Configurable]]: false}, and
        //   false.
        // 21. Call the [[DefineOwnProperty]] internal method of F with
        //   arguments "arguments", PropertyDescriptor {[[Get]]: thrower,
        //   [[Set]]: thrower, [[Enumerable]]: false, [[Configurable]]: false},
        //   and false.

        // TODO
        // NOTE Function objects created using Function.prototype.bind do not
        // have a prototype property or the [[Code]], [[FormalParameters]], and
        // [[Scope]] internal properties.
        // XXX can't delete prototype in pure-js.

        // 22. Return F.
        return bound;
    }
});

// _Please note: Shortcuts are defined after `Function.prototype.bind` as we
// us it in defining shortcuts.
var owns = call.bind(ObjectPrototype.hasOwnProperty);

//
// Array
// =====
//

// ES5 15.4.4.12
// http://es5.github.com/#x15.4.4.12
var spliceNoopReturnsEmptyArray = (function () {
    var a = [1, 2];
    var result = a.splice();
    return a.length === 2 && isArray(result) && result.length === 0;
}());
defineProperties(ArrayPrototype, {
    // Safari 5.0 bug where .splice() returns undefined
    splice: function splice(start, deleteCount) {
        if (arguments.length === 0) {
            return [];
        } else {
            return array_splice.apply(this, arguments);
        }
    }
}, !spliceNoopReturnsEmptyArray);

var spliceWorksWithEmptyObject = (function () {
    var obj = {};
    ArrayPrototype.splice.call(obj, 0, 0, 1);
    return obj.length === 1;
}());
defineProperties(ArrayPrototype, {
    splice: function splice(start, deleteCount) {
        if (arguments.length === 0) { return []; }
        var args = arguments;
        this.length = Math.max(toInteger(this.length), 0);
        if (arguments.length > 0 && typeof deleteCount !== 'number') {
            args = array_slice.call(arguments);
            if (args.length < 2) {
                args.push(this.length - start);
            } else {
                args[1] = toInteger(deleteCount);
            }
        }
        return array_splice.apply(this, args);
    }
}, !spliceWorksWithEmptyObject);

// ES5 15.4.4.12
// http://es5.github.com/#x15.4.4.13
// Return len+argCount.
// [bugfix, ielt8]
// IE < 8 bug: [].unshift(0) === undefined but should be "1"
var hasUnshiftReturnValueBug = [].unshift(0) !== 1;
defineProperties(ArrayPrototype, {
    unshift: function () {
        array_unshift.apply(this, arguments);
        return this.length;
    }
}, hasUnshiftReturnValueBug);

// ES5 15.4.3.2
// http://es5.github.com/#x15.4.3.2
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/isArray
defineProperties(Array, { isArray: isArray });

// The IsCallable() check in the Array functions
// has been replaced with a strict check on the
// internal class of the object to trap cases where
// the provided function was actually a regular
// expression literal, which in V8 and
// JavaScriptCore is a typeof "function".  Only in
// V8 are regular expression literals permitted as
// reduce parameters, so it is desirable in the
// general case for the shim to match the more
// strict and common behavior of rejecting regular
// expressions.

// ES5 15.4.4.18
// http://es5.github.com/#x15.4.4.18
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/array/forEach

// Check failure of by-index access of string characters (IE < 9)
// and failure of `0 in boxedString` (Rhino)
var boxedString = Object('a');
var splitString = boxedString[0] !== 'a' || !(0 in boxedString);

var properlyBoxesContext = function properlyBoxed(method) {
    // Check node 0.6.21 bug where third parameter is not boxed
    var properlyBoxesNonStrict = true;
    var properlyBoxesStrict = true;
    if (method) {
        method.call('foo', function (_, __, context) {
            if (typeof context !== 'object') { properlyBoxesNonStrict = false; }
        });

        method.call([1], function () {
            'use strict';
            properlyBoxesStrict = typeof this === 'string';
        }, 'x');
    }
    return !!method && properlyBoxesNonStrict && properlyBoxesStrict;
};

defineProperties(ArrayPrototype, {
    forEach: function forEach(fun /*, thisp*/) {
        var object = ES.ToObject(this),
            self = splitString && isString(this) ? this.split('') : object,
            thisp = arguments[1],
            i = -1,
            length = self.length >>> 0;

        // If no callback function or if callback is not a callable function
        if (!isFunction(fun)) {
            throw new TypeError(); // TODO message
        }

        while (++i < length) {
            if (i in self) {
                // Invoke the callback function with call, passing arguments:
                // context, property value, property key, thisArg object
                // context
                fun.call(thisp, self[i], i, object);
            }
        }
    }
}, !properlyBoxesContext(ArrayPrototype.forEach));

// ES5 15.4.4.19
// http://es5.github.com/#x15.4.4.19
// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/map
defineProperties(ArrayPrototype, {
    map: function map(fun /*, thisp*/) {
        var object = ES.ToObject(this),
            self = splitString && isString(this) ? this.split('') : object,
            length = self.length >>> 0,
            result = Array(length),
            thisp = arguments[1];

        // If no callback function or if callback is not a callable function
        if (!isFunction(fun)) {
            throw new TypeError(fun + ' is not a function');
        }

        for (var i = 0; i < length; i++) {
            if (i in self) {
                result[i] = fun.call(thisp, self[i], i, object);
            }
        }
        return result;
    }
}, !properlyBoxesContext(ArrayPrototype.map));

// ES5 15.4.4.20
// http://es5.github.com/#x15.4.4.20
// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/filter
defineProperties(ArrayPrototype, {
    filter: function filter(fun /*, thisp */) {
        var object = ES.ToObject(this),
            self = splitString && isString(this) ? this.split('') : object,
            length = self.length >>> 0,
            result = [],
            value,
            thisp = arguments[1];

        // If no callback function or if callback is not a callable function
        if (!isFunction(fun)) {
            throw new TypeError(fun + ' is not a function');
        }

        for (var i = 0; i < length; i++) {
            if (i in self) {
                value = self[i];
                if (fun.call(thisp, value, i, object)) {
                    result.push(value);
                }
            }
        }
        return result;
    }
}, !properlyBoxesContext(ArrayPrototype.filter));

// ES5 15.4.4.16
// http://es5.github.com/#x15.4.4.16
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/every
defineProperties(ArrayPrototype, {
    every: function every(fun /*, thisp */) {
        var object = ES.ToObject(this),
            self = splitString && isString(this) ? this.split('') : object,
            length = self.length >>> 0,
            thisp = arguments[1];

        // If no callback function or if callback is not a callable function
        if (!isFunction(fun)) {
            throw new TypeError(fun + ' is not a function');
        }

        for (var i = 0; i < length; i++) {
            if (i in self && !fun.call(thisp, self[i], i, object)) {
                return false;
            }
        }
        return true;
    }
}, !properlyBoxesContext(ArrayPrototype.every));

// ES5 15.4.4.17
// http://es5.github.com/#x15.4.4.17
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/some
defineProperties(ArrayPrototype, {
    some: function some(fun /*, thisp */) {
        var object = ES.ToObject(this),
            self = splitString && isString(this) ? this.split('') : object,
            length = self.length >>> 0,
            thisp = arguments[1];

        // If no callback function or if callback is not a callable function
        if (!isFunction(fun)) {
            throw new TypeError(fun + ' is not a function');
        }

        for (var i = 0; i < length; i++) {
            if (i in self && fun.call(thisp, self[i], i, object)) {
                return true;
            }
        }
        return false;
    }
}, !properlyBoxesContext(ArrayPrototype.some));

// ES5 15.4.4.21
// http://es5.github.com/#x15.4.4.21
// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/reduce
var reduceCoercesToObject = false;
if (ArrayPrototype.reduce) {
    reduceCoercesToObject = typeof ArrayPrototype.reduce.call('es5', function (_, __, ___, list) { return list; }) === 'object';
}
defineProperties(ArrayPrototype, {
    reduce: function reduce(fun /*, initial*/) {
        var object = ES.ToObject(this),
            self = splitString && isString(this) ? this.split('') : object,
            length = self.length >>> 0;

        // If no callback function or if callback is not a callable function
        if (!isFunction(fun)) {
            throw new TypeError(fun + ' is not a function');
        }

        // no value to return if no initial value and an empty array
        if (!length && arguments.length === 1) {
            throw new TypeError('reduce of empty array with no initial value');
        }

        var i = 0;
        var result;
        if (arguments.length >= 2) {
            result = arguments[1];
        } else {
            do {
                if (i in self) {
                    result = self[i++];
                    break;
                }

                // if array contains no values, no initial value to return
                if (++i >= length) {
                    throw new TypeError('reduce of empty array with no initial value');
                }
            } while (true);
        }

        for (; i < length; i++) {
            if (i in self) {
                result = fun.call(void 0, result, self[i], i, object);
            }
        }

        return result;
    }
}, !reduceCoercesToObject);

// ES5 15.4.4.22
// http://es5.github.com/#x15.4.4.22
// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/reduceRight
var reduceRightCoercesToObject = false;
if (ArrayPrototype.reduceRight) {
    reduceRightCoercesToObject = typeof ArrayPrototype.reduceRight.call('es5', function (_, __, ___, list) { return list; }) === 'object';
}
defineProperties(ArrayPrototype, {
    reduceRight: function reduceRight(fun /*, initial*/) {
        var object = ES.ToObject(this),
            self = splitString && isString(this) ? this.split('') : object,
            length = self.length >>> 0;

        // If no callback function or if callback is not a callable function
        if (!isFunction(fun)) {
            throw new TypeError(fun + ' is not a function');
        }

        // no value to return if no initial value, empty array
        if (!length && arguments.length === 1) {
            throw new TypeError('reduceRight of empty array with no initial value');
        }

        var result, i = length - 1;
        if (arguments.length >= 2) {
            result = arguments[1];
        } else {
            do {
                if (i in self) {
                    result = self[i--];
                    break;
                }

                // if array contains no values, no initial value to return
                if (--i < 0) {
                    throw new TypeError('reduceRight of empty array with no initial value');
                }
            } while (true);
        }

        if (i < 0) {
            return result;
        }

        do {
            if (i in self) {
                result = fun.call(void 0, result, self[i], i, object);
            }
        } while (i--);

        return result;
    }
}, !reduceRightCoercesToObject);

// ES5 15.4.4.14
// http://es5.github.com/#x15.4.4.14
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf
var hasFirefox2IndexOfBug = Array.prototype.indexOf && [0, 1].indexOf(1, 2) !== -1;
defineProperties(ArrayPrototype, {
    indexOf: function indexOf(sought /*, fromIndex */) {
        var self = splitString && isString(this) ? this.split('') : ES.ToObject(this),
            length = self.length >>> 0;

        if (!length) {
            return -1;
        }

        var i = 0;
        if (arguments.length > 1) {
            i = toInteger(arguments[1]);
        }

        // handle negative indices
        i = i >= 0 ? i : Math.max(0, length + i);
        for (; i < length; i++) {
            if (i in self && self[i] === sought) {
                return i;
            }
        }
        return -1;
    }
}, hasFirefox2IndexOfBug);

// ES5 15.4.4.15
// http://es5.github.com/#x15.4.4.15
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/lastIndexOf
var hasFirefox2LastIndexOfBug = Array.prototype.lastIndexOf && [0, 1].lastIndexOf(0, -3) !== -1;
defineProperties(ArrayPrototype, {
    lastIndexOf: function lastIndexOf(sought /*, fromIndex */) {
        var self = splitString && isString(this) ? this.split('') : ES.ToObject(this),
            length = self.length >>> 0;

        if (!length) {
            return -1;
        }
        var i = length - 1;
        if (arguments.length > 1) {
            i = Math.min(i, toInteger(arguments[1]));
        }
        // handle negative indices
        i = i >= 0 ? i : length - Math.abs(i);
        for (; i >= 0; i--) {
            if (i in self && sought === self[i]) {
                return i;
            }
        }
        return -1;
    }
}, hasFirefox2LastIndexOfBug);

//
// Object
// ======
//

// ES5 15.2.3.14
// http://es5.github.com/#x15.2.3.14

// http://whattheheadsaid.com/2010/10/a-safer-object-keys-compatibility-implementation
var hasDontEnumBug = !({'toString': null}).propertyIsEnumerable('toString'),
    hasProtoEnumBug = function () {}.propertyIsEnumerable('prototype'),
    hasStringEnumBug = !owns('x', '0'),
    dontEnums = [
        'toString',
        'toLocaleString',
        'valueOf',
        'hasOwnProperty',
        'isPrototypeOf',
        'propertyIsEnumerable',
        'constructor'
    ],
    dontEnumsLength = dontEnums.length;

defineProperties(Object, {
    keys: function keys(object) {
        var isFn = isFunction(object),
            isArgs = isArguments(object),
            isObject = object !== null && typeof object === 'object',
            isStr = isObject && isString(object);

        if (!isObject && !isFn && !isArgs) {
            throw new TypeError('Object.keys called on a non-object');
        }

        var theKeys = [];
        var skipProto = hasProtoEnumBug && isFn;
        if ((isStr && hasStringEnumBug) || isArgs) {
            for (var i = 0; i < object.length; ++i) {
                theKeys.push(String(i));
            }
        }

        if (!isArgs) {
            for (var name in object) {
                if (!(skipProto && name === 'prototype') && owns(object, name)) {
                    theKeys.push(String(name));
                }
            }
        }

        if (hasDontEnumBug) {
            var ctor = object.constructor,
                skipConstructor = ctor && ctor.prototype === object;
            for (var j = 0; j < dontEnumsLength; j++) {
                var dontEnum = dontEnums[j];
                if (!(skipConstructor && dontEnum === 'constructor') && owns(object, dontEnum)) {
                    theKeys.push(dontEnum);
                }
            }
        }
        return theKeys;
    }
});

var keysWorksWithArguments = Object.keys && (function () {
    // Safari 5.0 bug
    return Object.keys(arguments).length === 2;
}(1, 2));
var originalKeys = Object.keys;
defineProperties(Object, {
    keys: function keys(object) {
        if (isArguments(object)) {
            return originalKeys(ArrayPrototype.slice.call(object));
        } else {
            return originalKeys(object);
        }
    }
}, !keysWorksWithArguments);

//
// Date
// ====
//

// ES5 15.9.5.43
// http://es5.github.com/#x15.9.5.43
// This function returns a String value represent the instance in time
// represented by this Date object. The format of the String is the Date Time
// string format defined in 15.9.1.15. All fields are present in the String.
// The time zone is always UTC, denoted by the suffix Z. If the time value of
// this object is not a finite Number a RangeError exception is thrown.
var negativeDate = -62198755200000;
var negativeYearString = '-000001';
var hasNegativeDateBug = Date.prototype.toISOString && new Date(negativeDate).toISOString().indexOf(negativeYearString) === -1;

defineProperties(Date.prototype, {
    toISOString: function toISOString() {
        var result, length, value, year, month;
        if (!isFinite(this)) {
            throw new RangeError('Date.prototype.toISOString called on non-finite value.');
        }

        year = this.getUTCFullYear();

        month = this.getUTCMonth();
        // see https://github.com/es-shims/es5-shim/issues/111
        year += Math.floor(month / 12);
        month = (month % 12 + 12) % 12;

        // the date time string format is specified in 15.9.1.15.
        result = [month + 1, this.getUTCDate(), this.getUTCHours(), this.getUTCMinutes(), this.getUTCSeconds()];
        year = (
            (year < 0 ? '-' : (year > 9999 ? '+' : '')) +
            ('00000' + Math.abs(year)).slice((0 <= year && year <= 9999) ? -4 : -6)
        );

        length = result.length;
        while (length--) {
            value = result[length];
            // pad months, days, hours, minutes, and seconds to have two
            // digits.
            if (value < 10) {
                result[length] = '0' + value;
            }
        }
        // pad milliseconds to have three digits.
        return (
            year + '-' + result.slice(0, 2).join('-') +
            'T' + result.slice(2).join(':') + '.' +
            ('000' + this.getUTCMilliseconds()).slice(-3) + 'Z'
        );
    }
}, hasNegativeDateBug);


// ES5 15.9.5.44
// http://es5.github.com/#x15.9.5.44
// This function provides a String representation of a Date object for use by
// JSON.stringify (15.12.3).
var dateToJSONIsSupported = false;
try {
    dateToJSONIsSupported = (
        Date.prototype.toJSON &&
        new Date(NaN).toJSON() === null &&
        new Date(negativeDate).toJSON().indexOf(negativeYearString) !== -1 &&
        Date.prototype.toJSON.call({ // generic
            toISOString: function () {
                return true;
            }
        })
    );
} catch (e) {
}
if (!dateToJSONIsSupported) {
    Date.prototype.toJSON = function toJSON(key) {
        // When the toJSON method is called with argument key, the following
        // steps are taken:

        // 1.  Let O be the result of calling ToObject, giving it the this
        // value as its argument.
        // 2. Let tv be toPrimitive(O, hint Number).
        var o = Object(this),
            tv = toPrimitive(o),
            toISO;
        // 3. If tv is a Number and is not finite, return null.
        if (typeof tv === 'number' && !isFinite(tv)) {
            return null;
        }
        // 4. Let toISO be the result of calling the [[Get]] internal method of
        // O with argument "toISOString".
        toISO = o.toISOString;
        // 5. If IsCallable(toISO) is false, throw a TypeError exception.
        if (typeof toISO !== 'function') {
            throw new TypeError('toISOString property is not callable');
        }
        // 6. Return the result of calling the [[Call]] internal method of
        //  toISO with O as the this value and an empty argument list.
        return toISO.call(o);

        // NOTE 1 The argument is ignored.

        // NOTE 2 The toJSON function is intentionally generic; it does not
        // require that its this value be a Date object. Therefore, it can be
        // transferred to other kinds of objects for use as a method. However,
        // it does require that any such object have a toISOString method. An
        // object is free to use the argument key to filter its
        // stringification.
    };
}

// ES5 15.9.4.2
// http://es5.github.com/#x15.9.4.2
// based on work shared by Daniel Friesen (dantman)
// http://gist.github.com/303249
var supportsExtendedYears = Date.parse('+033658-09-27T01:46:40.000Z') === 1e15;
var acceptsInvalidDates = !isNaN(Date.parse('2012-04-04T24:00:00.500Z')) || !isNaN(Date.parse('2012-11-31T23:59:59.000Z'));
var doesNotParseY2KNewYear = isNaN(Date.parse('2000-01-01T00:00:00.000Z'));
if (!Date.parse || doesNotParseY2KNewYear || acceptsInvalidDates || !supportsExtendedYears) {
    // XXX global assignment won't work in embeddings that use
    // an alternate object for the context.
    /*global Date: true */
    /*eslint-disable no-undef*/
    Date = (function (NativeDate) {
    /*eslint-enable no-undef*/
        // Date.length === 7
        function Date(Y, M, D, h, m, s, ms) {
            var length = arguments.length;
            if (this instanceof NativeDate) {
                var date = length === 1 && String(Y) === Y ? // isString(Y)
                    // We explicitly pass it through parse:
                    new NativeDate(Date.parse(Y)) :
                    // We have to manually make calls depending on argument
                    // length here
                    length >= 7 ? new NativeDate(Y, M, D, h, m, s, ms) :
                    length >= 6 ? new NativeDate(Y, M, D, h, m, s) :
                    length >= 5 ? new NativeDate(Y, M, D, h, m) :
                    length >= 4 ? new NativeDate(Y, M, D, h) :
                    length >= 3 ? new NativeDate(Y, M, D) :
                    length >= 2 ? new NativeDate(Y, M) :
                    length >= 1 ? new NativeDate(Y) :
                                  new NativeDate();
                // Prevent mixups with unfixed Date object
                date.constructor = Date;
                return date;
            }
            return NativeDate.apply(this, arguments);
        }

        // 15.9.1.15 Date Time String Format.
        var isoDateExpression = new RegExp('^' +
            '(\\d{4}|[+-]\\d{6})' + // four-digit year capture or sign +
                                      // 6-digit extended year
            '(?:-(\\d{2})' + // optional month capture
            '(?:-(\\d{2})' + // optional day capture
            '(?:' + // capture hours:minutes:seconds.milliseconds
                'T(\\d{2})' + // hours capture
                ':(\\d{2})' + // minutes capture
                '(?:' + // optional :seconds.milliseconds
                    ':(\\d{2})' + // seconds capture
                    '(?:(\\.\\d{1,}))?' + // milliseconds capture
                ')?' +
            '(' + // capture UTC offset component
                'Z|' + // UTC capture
                '(?:' + // offset specifier +/-hours:minutes
                    '([-+])' + // sign capture
                    '(\\d{2})' + // hours offset capture
                    ':(\\d{2})' + // minutes offset capture
                ')' +
            ')?)?)?)?' +
        '$');

        var months = [
            0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334, 365
        ];

        function dayFromMonth(year, month) {
            var t = month > 1 ? 1 : 0;
            return (
                months[month] +
                Math.floor((year - 1969 + t) / 4) -
                Math.floor((year - 1901 + t) / 100) +
                Math.floor((year - 1601 + t) / 400) +
                365 * (year - 1970)
            );
        }

        function toUTC(t) {
            return Number(new NativeDate(1970, 0, 1, 0, 0, 0, t));
        }

        // Copy any custom methods a 3rd party library may have added
        for (var key in NativeDate) {
            Date[key] = NativeDate[key];
        }

        // Copy "native" methods explicitly; they may be non-enumerable
        Date.now = NativeDate.now;
        Date.UTC = NativeDate.UTC;
        Date.prototype = NativeDate.prototype;
        Date.prototype.constructor = Date;

        // Upgrade Date.parse to handle simplified ISO 8601 strings
        Date.parse = function parse(string) {
            var match = isoDateExpression.exec(string);
            if (match) {
                // parse months, days, hours, minutes, seconds, and milliseconds
                // provide default values if necessary
                // parse the UTC offset component
                var year = Number(match[1]),
                    month = Number(match[2] || 1) - 1,
                    day = Number(match[3] || 1) - 1,
                    hour = Number(match[4] || 0),
                    minute = Number(match[5] || 0),
                    second = Number(match[6] || 0),
                    millisecond = Math.floor(Number(match[7] || 0) * 1000),
                    // When time zone is missed, local offset should be used
                    // (ES 5.1 bug)
                    // see https://bugs.ecmascript.org/show_bug.cgi?id=112
                    isLocalTime = Boolean(match[4] && !match[8]),
                    signOffset = match[9] === '-' ? 1 : -1,
                    hourOffset = Number(match[10] || 0),
                    minuteOffset = Number(match[11] || 0),
                    result;
                if (
                    hour < (
                        minute > 0 || second > 0 || millisecond > 0 ?
                        24 : 25
                    ) &&
                    minute < 60 && second < 60 && millisecond < 1000 &&
                    month > -1 && month < 12 && hourOffset < 24 &&
                    minuteOffset < 60 && // detect invalid offsets
                    day > -1 &&
                    day < (
                        dayFromMonth(year, month + 1) -
                        dayFromMonth(year, month)
                    )
                ) {
                    result = (
                        (dayFromMonth(year, month) + day) * 24 +
                        hour +
                        hourOffset * signOffset
                    ) * 60;
                    result = (
                        (result + minute + minuteOffset * signOffset) * 60 +
                        second
                    ) * 1000 + millisecond;
                    if (isLocalTime) {
                        result = toUTC(result);
                    }
                    if (-8.64e15 <= result && result <= 8.64e15) {
                        return result;
                    }
                }
                return NaN;
            }
            return NativeDate.parse.apply(this, arguments);
        };

        return Date;
    }(Date));
    /*global Date: false */
}

// ES5 15.9.4.4
// http://es5.github.com/#x15.9.4.4
if (!Date.now) {
    Date.now = function now() {
        return new Date().getTime();
    };
}


//
// Number
// ======
//

// ES5.1 15.7.4.5
// http://es5.github.com/#x15.7.4.5
var hasToFixedBugs = NumberPrototype.toFixed && (
  (0.00008).toFixed(3) !== '0.000' ||
  (0.9).toFixed(0) !== '1' ||
  (1.255).toFixed(2) !== '1.25' ||
  (1000000000000000128).toFixed(0) !== '1000000000000000128'
);

var toFixedHelpers = {
  base: 1e7,
  size: 6,
  data: [0, 0, 0, 0, 0, 0],
  multiply: function multiply(n, c) {
      var i = -1;
      while (++i < toFixedHelpers.size) {
          c += n * toFixedHelpers.data[i];
          toFixedHelpers.data[i] = c % toFixedHelpers.base;
          c = Math.floor(c / toFixedHelpers.base);
      }
  },
  divide: function divide(n) {
      var i = toFixedHelpers.size, c = 0;
      while (--i >= 0) {
          c += toFixedHelpers.data[i];
          toFixedHelpers.data[i] = Math.floor(c / n);
          c = (c % n) * toFixedHelpers.base;
      }
  },
  numToString: function numToString() {
      var i = toFixedHelpers.size;
      var s = '';
      while (--i >= 0) {
          if (s !== '' || i === 0 || toFixedHelpers.data[i] !== 0) {
              var t = String(toFixedHelpers.data[i]);
              if (s === '') {
                  s = t;
              } else {
                  s += '0000000'.slice(0, 7 - t.length) + t;
              }
          }
      }
      return s;
  },
  pow: function pow(x, n, acc) {
      return (n === 0 ? acc : (n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc)));
  },
  log: function log(x) {
      var n = 0;
      while (x >= 4096) {
          n += 12;
          x /= 4096;
      }
      while (x >= 2) {
          n += 1;
          x /= 2;
      }
      return n;
  }
};

defineProperties(NumberPrototype, {
    toFixed: function toFixed(fractionDigits) {
        var f, x, s, m, e, z, j, k;

        // Test for NaN and round fractionDigits down
        f = Number(fractionDigits);
        f = f !== f ? 0 : Math.floor(f);

        if (f < 0 || f > 20) {
            throw new RangeError('Number.toFixed called with invalid number of decimals');
        }

        x = Number(this);

        // Test for NaN
        if (x !== x) {
            return 'NaN';
        }

        // If it is too big or small, return the string value of the number
        if (x <= -1e21 || x >= 1e21) {
            return String(x);
        }

        s = '';

        if (x < 0) {
            s = '-';
            x = -x;
        }

        m = '0';

        if (x > 1e-21) {
            // 1e-21 < x < 1e21
            // -70 < log2(x) < 70
            e = toFixedHelpers.log(x * toFixedHelpers.pow(2, 69, 1)) - 69;
            z = (e < 0 ? x * toFixedHelpers.pow(2, -e, 1) : x / toFixedHelpers.pow(2, e, 1));
            z *= 0x10000000000000; // Math.pow(2, 52);
            e = 52 - e;

            // -18 < e < 122
            // x = z / 2 ^ e
            if (e > 0) {
                toFixedHelpers.multiply(0, z);
                j = f;

                while (j >= 7) {
                    toFixedHelpers.multiply(1e7, 0);
                    j -= 7;
                }

                toFixedHelpers.multiply(toFixedHelpers.pow(10, j, 1), 0);
                j = e - 1;

                while (j >= 23) {
                    toFixedHelpers.divide(1 << 23);
                    j -= 23;
                }

                toFixedHelpers.divide(1 << j);
                toFixedHelpers.multiply(1, 1);
                toFixedHelpers.divide(2);
                m = toFixedHelpers.numToString();
            } else {
                toFixedHelpers.multiply(0, z);
                toFixedHelpers.multiply(1 << (-e), 0);
                m = toFixedHelpers.numToString() + '0.00000000000000000000'.slice(2, 2 + f);
            }
        }

        if (f > 0) {
            k = m.length;

            if (k <= f) {
                m = s + '0.0000000000000000000'.slice(0, f - k + 2) + m;
            } else {
                m = s + m.slice(0, k - f) + '.' + m.slice(k - f);
            }
        } else {
            m = s + m;
        }

        return m;
    }
}, hasToFixedBugs);


//
// String
// ======
//

// ES5 15.5.4.14
// http://es5.github.com/#x15.5.4.14

// [bugfix, IE lt 9, firefox 4, Konqueror, Opera, obscure browsers]
// Many browsers do not split properly with regular expressions or they
// do not perform the split correctly under obscure conditions.
// See http://blog.stevenlevithan.com/archives/cross-browser-split
// I've tested in many browsers and this seems to cover the deviant ones:
//    'ab'.split(/(?:ab)*/) should be ["", ""], not [""]
//    '.'.split(/(.?)(.?)/) should be ["", ".", "", ""], not ["", ""]
//    'tesst'.split(/(s)*/) should be ["t", undefined, "e", "s", "t"], not
//       [undefined, "t", undefined, "e", ...]
//    ''.split(/.?/) should be [], not [""]
//    '.'.split(/()()/) should be ["."], not ["", "", "."]

var string_split = StringPrototype.split;
if (
    'ab'.split(/(?:ab)*/).length !== 2 ||
    '.'.split(/(.?)(.?)/).length !== 4 ||
    'tesst'.split(/(s)*/)[1] === 't' ||
    'test'.split(/(?:)/, -1).length !== 4 ||
    ''.split(/.?/).length ||
    '.'.split(/()()/).length > 1
) {
    (function () {
        var compliantExecNpcg = typeof (/()??/).exec('')[1] === 'undefined'; // NPCG: nonparticipating capturing group

        StringPrototype.split = function (separator, limit) {
            var string = this;
            if (typeof separator === 'undefined' && limit === 0) {
                return [];
            }

            // If `separator` is not a regex, use native split
            if (to_string.call(separator) !== '[object RegExp]') {
                return string_split.call(this, separator, limit);
            }

            var output = [],
                flags = (separator.ignoreCase ? 'i' : '') +
                        (separator.multiline ? 'm' : '') +
                        (separator.extended ? 'x' : '') + // Proposed for ES6
                        (separator.sticky ? 'y' : ''), // Firefox 3+
                lastLastIndex = 0,
                // Make `global` and avoid `lastIndex` issues by working with a copy
                separator2, match, lastIndex, lastLength;
            separator = new RegExp(separator.source, flags + 'g');
            string += ''; // Type-convert
            if (!compliantExecNpcg) {
                // Doesn't need flags gy, but they don't hurt
                separator2 = new RegExp('^' + separator.source + '$(?!\\s)', flags);
            }
            /* Values for `limit`, per the spec:
             * If undefined: 4294967295 // Math.pow(2, 32) - 1
             * If 0, Infinity, or NaN: 0
             * If positive number: limit = Math.floor(limit); if (limit > 4294967295) limit -= 4294967296;
             * If negative number: 4294967296 - Math.floor(Math.abs(limit))
             * If other: Type-convert, then use the above rules
             */
            limit = typeof limit === 'undefined' ?
                -1 >>> 0 : // Math.pow(2, 32) - 1
                ES.ToUint32(limit);
            match = separator.exec(string);
            while (match) {
                // `separator.lastIndex` is not reliable cross-browser
                lastIndex = match.index + match[0].length;
                if (lastIndex > lastLastIndex) {
                    output.push(string.slice(lastLastIndex, match.index));
                    // Fix browsers whose `exec` methods don't consistently return `undefined` for
                    // nonparticipating capturing groups
                    if (!compliantExecNpcg && match.length > 1) {
                        /*eslint-disable no-loop-func */
                        match[0].replace(separator2, function () {
                            for (var i = 1; i < arguments.length - 2; i++) {
                                if (typeof arguments[i] === 'undefined') {
                                    match[i] = void 0;
                                }
                            }
                        });
                        /*eslint-enable no-loop-func */
                    }
                    if (match.length > 1 && match.index < string.length) {
                        array_push.apply(output, match.slice(1));
                    }
                    lastLength = match[0].length;
                    lastLastIndex = lastIndex;
                    if (output.length >= limit) {
                        break;
                    }
                }
                if (separator.lastIndex === match.index) {
                    separator.lastIndex++; // Avoid an infinite loop
                }
                match = separator.exec(string);
            }
            if (lastLastIndex === string.length) {
                if (lastLength || !separator.test('')) {
                    output.push('');
                }
            } else {
                output.push(string.slice(lastLastIndex));
            }
            return output.length > limit ? output.slice(0, limit) : output;
        };
    }());

// [bugfix, chrome]
// If separator is undefined, then the result array contains just one String,
// which is the this value (converted to a String). If limit is not undefined,
// then the output array is truncated so that it contains no more than limit
// elements.
// "0".split(undefined, 0) -> []
} else if ('0'.split(void 0, 0).length) {
    StringPrototype.split = function split(separator, limit) {
        if (typeof separator === 'undefined' && limit === 0) { return []; }
        return string_split.call(this, separator, limit);
    };
}

var str_replace = StringPrototype.replace;
var replaceReportsGroupsCorrectly = (function () {
    var groups = [];
    'x'.replace(/x(.)?/g, function (match, group) {
        groups.push(group);
    });
    return groups.length === 1 && typeof groups[0] === 'undefined';
}());

if (!replaceReportsGroupsCorrectly) {
    StringPrototype.replace = function replace(searchValue, replaceValue) {
        var isFn = isFunction(replaceValue);
        var hasCapturingGroups = isRegex(searchValue) && (/\)[*?]/).test(searchValue.source);
        if (!isFn || !hasCapturingGroups) {
            return str_replace.call(this, searchValue, replaceValue);
        } else {
            var wrappedReplaceValue = function (match) {
                var length = arguments.length;
                var originalLastIndex = searchValue.lastIndex;
                searchValue.lastIndex = 0;
                var args = searchValue.exec(match) || [];
                searchValue.lastIndex = originalLastIndex;
                args.push(arguments[length - 2], arguments[length - 1]);
                return replaceValue.apply(this, args);
            };
            return str_replace.call(this, searchValue, wrappedReplaceValue);
        }
    };
}

// ECMA-262, 3rd B.2.3
// Not an ECMAScript standard, although ECMAScript 3rd Edition has a
// non-normative section suggesting uniform semantics and it should be
// normalized across all browsers
// [bugfix, IE lt 9] IE < 9 substr() with negative value not working in IE
var string_substr = StringPrototype.substr;
var hasNegativeSubstrBug = ''.substr && '0b'.substr(-1) !== 'b';
defineProperties(StringPrototype, {
    substr: function substr(start, length) {
        return string_substr.call(
            this,
            start < 0 ? ((start = this.length + start) < 0 ? 0 : start) : start,
            length
        );
    }
}, hasNegativeSubstrBug);

// ES5 15.5.4.20
// whitespace from: http://es5.github.io/#x15.5.4.20
var ws = '\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003' +
    '\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028' +
    '\u2029\uFEFF';
var zeroWidth = '\u200b';
var wsRegexChars = '[' + ws + ']';
var trimBeginRegexp = new RegExp('^' + wsRegexChars + wsRegexChars + '*');
var trimEndRegexp = new RegExp(wsRegexChars + wsRegexChars + '*$');
var hasTrimWhitespaceBug = StringPrototype.trim && (ws.trim() || !zeroWidth.trim());
defineProperties(StringPrototype, {
    // http://blog.stevenlevithan.com/archives/faster-trim-javascript
    // http://perfectionkills.com/whitespace-deviations/
    trim: function trim() {
        if (typeof this === 'undefined' || this === null) {
            throw new TypeError("can't convert " + this + ' to object');
        }
        return String(this).replace(trimBeginRegexp, '').replace(trimEndRegexp, '');
    }
}, hasTrimWhitespaceBug);

// ES-5 15.1.2.2
if (parseInt(ws + '08') !== 8 || parseInt(ws + '0x16') !== 22) {
    /*global parseInt: true */
    parseInt = (function (origParseInt) {
        var hexRegex = /^0[xX]/;
        return function parseIntES5(str, radix) {
            str = String(str).trim();
            if (!Number(radix)) {
                radix = hexRegex.test(str) ? 16 : 10;
            }
            return origParseInt(str, radix);
        };
    }(parseInt));
}

}));
;
/*
    Global wrapper for custom helper objects
*/
var SCSHelper = (function () {
    var GLOBAL_HELPERS = [
        SCSDateHelper,
        //SCSZipHelper,
        SCSMessages,
        SCSMiscHelper,
        SCSStringHelper,
        SCSPasswordValidationHelper,
        SCSValidationHelper,
        SCSAuth,
        SCSUserAgentHelper,
        SCSWindowHelper
    ];
    var helper = new Object();
    // merge all methods into single object
    for (var i in GLOBAL_HELPERS) {
        var helperObj = GLOBAL_HELPERS[i];
        for (var fn in helperObj) { helper[fn] = helperObj[fn]; }
    }
    return helper;
})();

SCSHelper.setTrackerNameGlobal();
window.area = document.getElementById('Area').value;

String.prototype.isEmpty = function () {
    return (this.length === 0 || !this.trim());
};

// Global Device Variables
var isiPad = /iPad/i.test(navigator.userAgent);
var isSafari = /^((?!Chrome).)*Safari/i.test(navigator.userAgent);

$(document).ready(function () {
    
    if (isSafari && !SCSHelper.isMobileUser()) { // Fix for safari desktop issue with transitions
        $(".sc-menu-mobile, #main-wrapper").addClass("no-transitions");
    }

    /*
       Does nothing but break the history cache for Safari & Firefox
       The back button uses the stored state of the DOM from memory
       causing unexpected behavior with Vue components.
    */
    window.onpageshow = function (event) {
        if (event.persisted) {
            window.location.reload();
        }
    };

    //~TODO Verify we can remove all of the tracking pixels on partner sites.
    if (SCSHelper.getParameterByName("MarketingPixel") !== "false") {
        $("div[data-singlecare-partial=true]").each(function (index, item) {
            var url = $(item).data("singlecare-url");
            if (url && url.length > 0) {
                $(item).load(url);
            }
        });
    }

    //append AntiForgeryToken input to Form
    $('body').on('submit', 'form', function () {
        if ($(this).attr("method") && $(this).attr("method").toUpperCase() == "POST"
            && !$(this).find("[name=" + $(antiForgeryToken).attr("name") + "]").length) {
            $(this).append($(antiForgeryToken));
        }
    });

    //append AntiForgeryToken to ajax requests
    $.ajaxSetup({
        headers: { '__RequestVerificationToken': $(antiForgeryToken).val() }
    });

    SCSDateHelper.setTimezoneCookie(false);
});;
(function () {
    if (window.isCSVisitor === true) return;
    var cname = '__utmz';
    var trackingParams = [
        'utm_campaign',
        'utm_medium',
        'utm_source',
        'utm_term',
        'utm_type',
        'utm_content',
        'utm_adgroup',
        'matchtype',
        'ct_Network',
        'SiteTarget',
        'source',
        'subid1',
        'subid2',
        'subid3',
        'ctid',
        'gclid',
        'creative',
        'siteID',
        'msclkid',
        'pos',
        'segments'
    ];
    var medium_default = false;
    var data = '';
    var newDataCount = 0;

    //~TODO Don't use window for this
    var contactReq = {
        PartnerUsername: window.partnerUser ? window.partnerUser :  'Singlecare',
        PartnerPassword: window.partnerPassword ? window.partnerPassword : '564s8734cx@G',
        SendEmail: false,
        SendSMS: false,
        ContactValues: {
            ContactTypeId: 90
        },
        ProspectValues: {
            ProspectTypeId: window.ProspectTypeId || 1
        },
        ContactTrackingData: []
    };

    var referURL = document.referrer,
        fromSocial = false,
        fromSearch = false;

    var socialList = ['facebook', 'instagram', 'linkedin', 'pinterest', 'reddit', 'snapchat', 'tumblr', '/t.co/', 'twitter', 'youtube'],
        searchList = ['ask', 'aol', 'avg', 'bing', 'duckduckgo', 'google', 'msn', 'yahoo'];

    if (!SCSHelper.stringIsNullOrEmpty(referURL)) {
        // has referral url
        for (i = 0; i < socialList.length; i++) {
            if (referURL.match(socialList[i]) && fromSocial == false) {
                fromSocial = true;
            }
        }
        for (i = 0; i < searchList.length; i++) {
            if (referURL.match(searchList[i]) && fromSearch == false) {
                fromSearch = true;
            }
        }
    }

    for (var i = 0; i < trackingParams.length; i++) {
        var name = trackingParams[i];
        var item = '';

        var val = SCSHelper.getParameterByName(name);

        // if url params are available
        if (!SCSHelper.stringIsNullOrEmpty(val)) {
            data += name + '=' + val;
            newDataCount += 1;

            switch (name) {
                case "utm_campaign":
                    contactReq.ContactValues.UTMCampaign = val;
                    break;
                case "utm_medium":
                    contactReq.ContactValues.UTMMedium = val;
                    break;
                case "utm_source":
                    contactReq.ContactValues.UTMSource = val;
                    break;
                case "creative":
                    contactReq.ContactValues.Creative = val;
                    break;
                default:
                    contactReq.ContactTrackingData.push({ Key: name, Value: val });
                    break;
            }
        }
        // if referral domain not available
        else if (SCSHelper.stringIsNullOrEmpty(referURL)) {

            if (name === 'utm_medium') {
                data += name + '=SingleCare';
                medium_default = true;
            }
            else if (name === 'utm_source' && medium_default) {
                data += name + '=direct';
            }
            else {
                data += name + '=' + item;
            }
        }
        // if has referral domain
        else {

            // if url matches social
            if (fromSocial) {
                if (name === 'utm_medium') {
                    data += name + '=SingleCare';
                    medium_default = true;
                }
                else if (name === 'utm_source' && medium_default) {
                    data += name + '=social';
                }
                else {
                    data += name + '=' + item;
                }
            }
            // if url matches search engine
            if (fromSearch) {
                if (name === 'utm_medium') {
                    data += name + '=SingleCare';
                    medium_default = true;
                }
                else if (name === 'utm_source' && medium_default) {
                    data += name + '=organic';
                }
                else {
                    data += name + '=' + item;
                }
            }
            // if referral not from search or social
            //else {
            if (!fromSocial && !fromSearch) {
                if (name === 'utm_medium') {
                    data += name + '=SingleCare';
                    medium_default = true;
                }
                else if (name === 'utm_source' && medium_default) {
                    data += name + '=referral';
                }
                else {
                    data += name + '=' + item;
                }
            }
        }

        if (i !== trackingParams.length - 1) data += "|";
    }

    // if cookie exists, remove any expiration date set from past visits
    if (!SCSHelper.stringIsNullOrEmpty(SCSCookie.get(cname))) {
        var existingCookieData = SCSCookie.get(cname);
        SCSCookie.set(cname, existingCookieData, -1);
    }

    if (newDataCount > 0 || SCSHelper.stringIsNullOrEmpty(SCSCookie.get(cname))) {
        SCSCookie.set(cname, data, -1);
    }

    if (contactReq.ContactTrackingData.length == 0) {
        var utmCookie = SCSCookie.get('__utmz').split('|');

        for (var x = 0; x < utmCookie.length; x++) {
            var utmName = utmCookie[x].split('=')[0];
            var utmVal = utmCookie[x].split('=')[1];
            
            switch (utmName) {
                case "utm_campaign":
                    contactReq.ContactValues.UTMCampaign = utmVal;
                    break;
                case "utm_medium":
                    contactReq.ContactValues.UTMMedium = utmVal;
                    break;
                case "utm_source":
                    contactReq.ContactValues.UTMSource = utmVal;
                    break;
                case "creative":
                    contactReq.ContactValues.Creative = utmVal;
                    break;
                default:
                    contactReq.ContactTrackingData.push({ Key: utmName, Value: utmVal });
                    break;
            }
        }
    }


    if (SCSHelper.stringIsNullOrEmpty(SCSCookie.get('activation-contact')) && SCSHelper.stringIsNullOrEmpty(SCSCookie.get('RxExclusiveProspectCookie')) ) {
        SCS.call(SCS.SERVICES.ContactService, 'AddRawContactRequest', contactReq, function (resp) {
            if (resp.Success) {
                var contact = resp.Contacts[0];
                var actData = contact.ContactId + "|" + contact.MemberNumber + "|" + contact.GroupNumber + "|" + resp.ProspectId;
                SCSCookie.set('activation-contact', actData);
            }
        });
    }
 })();;
(function(window, $) {
    /**
     * Use: <img data-src="<link>" class="async-image" />
     */
    var CLASS_NAME = 'async-image';
    var viewPortHeight = document.documentElement.clientHeight;
    var img, range;
    var loadImages = function () {
        range = window.pageYOffset + 2 * viewPortHeight; // load images that are positioned within 2vh of scroll position;
        $('.' + CLASS_NAME)
            .map(function() {
                img = $(this);
                if (img.offset().top <= range) {
                    img.attr('src', img.data('src'))
                      .attr('srcset', img.data('srcset'))
                      .removeClass(CLASS_NAME);
                }
            });
    };
    loadImages();
    $(window).on('scroll', loadImages);
})(window, jQuery);;
// Generated by CoffeeScript 1.6.2
(function() {
  var $, cardFromNumber, cardFromType, cards, defaultFormat, formatBackCardNumber, formatBackDateDDMMYYYY, formatBackDateYYYYMMDD, formatBackExpiry, formatBackOntarioDriversLicenseNumber, formatBackOntarioOutdoorsCardNumber, formatBackOntarioPhotoHealthCardNumber, formatBackPhoneNumber, formatBackPostalCode, formatBackTimeYYMM, formatBackUkSortCode, formatCardNumber, formatDateDDMMYYYY, formatDateYYYYMMDD, formatExpiry, formatForwardDateDDMMYYYY, formatForwardDateYYYYMMDD, formatForwardExpiry, formatForwardSlashDateDDMMYYYY, formatForwardSlashDateYYYYMMDD, formatForwardSlashExpiry, formatForwardSlashTimeYYMM, formatForwardTimeYYMM, formatForwardUkSortCode, formatOntarioDriversLicenseNumber, formatOntarioOutdoorsCardNumber, formatOntarioPhotoHealthCardNumber, formatPasteOntarioDriversLicenseNumber, formatPasteOntarioOutdoorsCardNumber, formatPasteOntarioPhotoHealthCardNumber, formatPastePhoneNumber, formatPastePostalCode, formatPhoneNumber, formatPostalCode, formatTimeYYMM, formatUkSortCode, hasTextSelected, luhnCheck, parseCreditCardExpiry, parseDateDDMMYYYY, parseTimeYYMM, parse_date_yyyy_mm_dd, reFormatCardNumber, reFormatPhoneNumber, restrictAlphaNumeric, restrictCVC, restrictCardNumber, restrictDateDDMMYYYY, restrictDateYYYYMMDD, restrictExpiry, restrictNumeric, restrictOntarioDriversLicenseNumber, restrictOntarioOutdoorsCardNumber, restrictOntarioPhotoHealthCardNumber, restrictPhoneNumber, restrictPostalCode, restrictTimeYYMM, restrictUkSortCode, setCardType,
    __slice = [].slice,
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  $ = jQuery;

  $.formance = {};

  $.formance.fn = {};

  $.fn.formance = function() {
    var args, method;

    method = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    return $.formance.fn[method].apply(this, args);
  };

  restrictNumeric = function(e) {
    var $target, input;

    $target = $(e.target);
    if (e.metaKey || e.ctrlKey) {
      return true;
    }
    if (e.which === 32) {
      return false;
    }
    if (e.which === 0) {
      return true;
    }
    if (e.which < 33) {
      return true;
    }
    input = String.fromCharCode(e.which);
    return !!/[\d\s]/.test(input);
  };

  restrictAlphaNumeric = function(e) {
    var $target, input;

    $target = $(e.target);
    if (e.metaKey || e.ctrlKey) {
      return true;
    }
    if (e.which === 32) {
      return false;
    }
    if (e.which === 0) {
      return true;
    }
    if (e.which < 33) {
      return true;
    }
    input = String.fromCharCode(e.which);
    return !!/[\d\sa-zA-Z0-9]/.test(input);
  };

  hasTextSelected = function($target) {
    var _ref;

    if (($target.prop('selectionStart') != null) && $target.prop('selectionStart') !== $target.prop('selectionEnd')) {
      return true;
    }
    if (typeof document !== "undefined" && document !== null ? (_ref = document.selection) != null ? typeof _ref.createRange === "function" ? _ref.createRange().text : void 0 : void 0 : void 0) {
      return true;
    }
    return false;
  };

  $.formance.fn.restrictNumeric = function() {
    this.on('keypress', restrictNumeric);
    return this;
  };

  $.formance.fn.restrictAlphaNumeric = function() {
    this.on('keypress', restrictAlphaNumeric);
    return this;
  };

  $.formance.fn.hasTextSelected = hasTextSelected;

  $ = jQuery;

  hasTextSelected = $.formance.fn.hasTextSelected;

  defaultFormat = /(\d{1,4})/g;

  cards = [
    {
      type: 'maestro',
      pattern: /^(5018|5020|5038|6304|6759|676[1-3])/,
      format: defaultFormat,
      length: [12, 13, 14, 15, 16, 17, 18, 19],
      cvcLength: [3],
      luhn: true
    }, {
      type: 'dinersclub',
      pattern: /^(36|38|30[0-5])/,
      format: defaultFormat,
      length: [14],
      cvcLength: [3],
      luhn: true
    }, {
      type: 'laser',
      pattern: /^(6706|6771|6709)/,
      format: defaultFormat,
      length: [16, 17, 18, 19],
      cvcLength: [3],
      luhn: true
    }, {
      type: 'jcb',
      pattern: /^35/,
      format: defaultFormat,
      length: [16],
      cvcLength: [3],
      luhn: true
    }, {
      type: 'unionpay',
      pattern: /^62/,
      format: defaultFormat,
      length: [16, 17, 18, 19],
      cvcLength: [3],
      luhn: false
    }, {
      type: 'discover',
      pattern: /^(6011|65|64[4-9]|622)/,
      format: defaultFormat,
      length: [16],
      cvcLength: [3],
      luhn: true
    }, {
      type: 'mastercard',
      pattern: /^5[1-5]/,
      format: defaultFormat,
      length: [16],
      cvcLength: [3],
      luhn: true
    }, {
      type: 'amex',
      pattern: /^3[47]/,
      format: /(\d{1,4})(\d{1,6})?(\d{1,5})?/,
      length: [15],
      cvcLength: [3, 4],
      luhn: true
    }, {
      type: 'visa',
      pattern: /^4/,
      format: defaultFormat,
      length: [13, 14, 15, 16],
      cvcLength: [3],
      luhn: true
    }
  ];

  cardFromNumber = function(num) {
    var card, _i, _len;

    num = (num + '').replace(/\D/g, '');
    for (_i = 0, _len = cards.length; _i < _len; _i++) {
      card = cards[_i];
      if (card.pattern.test(num)) {
        return card;
      }
    }
  };

  cardFromType = function(type) {
    var card, _i, _len;

    for (_i = 0, _len = cards.length; _i < _len; _i++) {
      card = cards[_i];
      if (card.type === type) {
        return card;
      }
    }
  };

  restrictCVC = function(e) {
    var $target, digit, val;

    $target = $(e.currentTarget);
    digit = String.fromCharCode(e.which);
    if (!/^\d+$/.test(digit)) {
      return;
    }
    val = $target.val() + digit;
    return val.length <= 4;
  };

  $.formance.fn.format_credit_card_cvc = function() {
    this.formance('restrictNumeric');
    this.on('keypress', restrictCVC);
    return this;
  };

  $.formance.fn.validate_credit_card_cvc = function() {
    var cvc, type, _ref, _ref1;

    type = $(this).data('credit_card_type');
    cvc = $(this).val();
    cvc = $.trim(cvc);
    if (!/^\d+$/.test(cvc)) {
      return false;
    }
    if (type) {
      return _ref = cvc.length, __indexOf.call((_ref1 = cardFromType(type)) != null ? _ref1.cvcLength : void 0, _ref) >= 0;
    } else {
      return cvc.length >= 3 && cvc.length <= 4;
    }
  };

  $ = jQuery;

  hasTextSelected = $.formance.fn.hasTextSelected;

  restrictExpiry = function(e) {
    var $target, digit, value;

    $target = $(e.currentTarget);
    digit = String.fromCharCode(e.which);
    if (!/^\d+$/.test(digit)) {
      return;
    }
    if (hasTextSelected($target)) {
      return;
    }
    value = $target.val() + digit;
    value = value.replace(/\D/g, '');
    if (value.length > 6) {
      return false;
    }
  };

  formatExpiry = function(e) {
    var $target, digit, val;

    digit = String.fromCharCode(e.which);
    if (!/^\d+$/.test(digit)) {
      return;
    }
    $target = $(e.currentTarget);
    val = $target.val() + digit;
    if (/^\d$/.test(val) && (val !== '0' && val !== '1')) {
      e.preventDefault();
      return $target.val("0" + val + " / ");
    } else if (/^\d\d$/.test(val)) {
      e.preventDefault();
      return $target.val("" + val + " / ");
    }
  };

  formatForwardExpiry = function(e) {
    var $target, digit, val;

    digit = String.fromCharCode(e.which);
    if (!/^\d+$/.test(digit)) {
      return;
    }
    $target = $(e.currentTarget);
    val = $target.val();
    if (/^\d\d$/.test(val)) {
      return $target.val("" + val + " / ");
    }
  };

  formatForwardSlashExpiry = function(e) {
    var $target, slash, val;

    slash = String.fromCharCode(e.which);
    if (slash !== '/') {
      return;
    }
    $target = $(e.currentTarget);
    val = $target.val();
    if (/^\d$/.test(val) && val !== '0') {
      return $target.val("0" + val + " / ");
    }
  };

  formatBackExpiry = function(e) {
    var $target, value;

    if (e.meta) {
      return;
    }
    $target = $(e.currentTarget);
    value = $target.val();
    if (e.which !== 8) {
      return;
    }
    if (($target.prop('selectionStart') != null) && $target.prop('selectionStart') !== value.length) {
      return;
    }
    if (/\d(\s|\/)+$/.test(value)) {
      e.preventDefault();
      return $target.val(value.replace(/\d(\s|\/)*$/, ''));
    } else if (/\s\/\s?\d?$/.test(value)) {
      e.preventDefault();
      return $target.val(value.replace(/\s\/\s?\d?$/, ''));
    }
  };

  $.formance.fn.format_credit_card_expiry = function() {
    this.formance('restrictNumeric');
    this.on('keypress', restrictExpiry);
    this.on('keypress', formatExpiry);
    this.on('keypress', formatForwardSlashExpiry);
    this.on('keypress', formatForwardExpiry);
    this.on('keydown', formatBackExpiry);
    return this;
  };

  parseCreditCardExpiry = function(expiry_string) {
    var month, prefix, val, year, _ref;

    val = expiry_string.replace(/\s/g, '');
    _ref = val.split('/', 2), month = _ref[0], year = _ref[1];
    if ((year != null ? year.length : void 0) === 2 && /^\d+$/.test(year)) {
      prefix = (new Date).getFullYear();
      prefix = prefix.toString().slice(0, 2);
      year = prefix + year;
    }
    month = parseInt(month, 10);
    year = parseInt(year, 10);
    return {
      month: month,
      year: year
    };
  };

  $.formance.fn.val_credit_card_expiry = function() {
    var expiry;

    expiry = parseCreditCardExpiry(this.val());
    if ((expiry.month == null) || isNaN(expiry.month)) {
      return false;
    }
    if ((expiry.year == null) || isNaN(expiry.year)) {
      return false;
    }
    return new Date(expiry.year, expiry.month - 1);
  };

  $.formance.fn.validate_credit_card_expiry = function() {
    var currentTime, expiry, expiry_date, month, prefix, year, _ref;

    expiry_date = parseCreditCardExpiry(this.val());
    month = expiry_date.month;
    year = expiry_date.year;
    if (typeof month === 'object' && 'month' in month) {
      _ref = month, month = _ref.month, year = _ref.year;
    }
    if (!(month && year)) {
      return false;
    }
    month = $.trim(month);
    year = $.trim(year);
    if (!/^\d+$/.test(month)) {
      return false;
    }
    if (!/^\d+$/.test(year)) {
      return false;
    }
    if (!(parseInt(month, 10) <= 12)) {
      return false;
    }
    if (year.length === 2) {
      prefix = (new Date).getFullYear();
      prefix = prefix.toString().slice(0, 2);
      year = prefix + year;
    }
    expiry = new Date(year, month);
    currentTime = new Date;
    expiry.setMonth(expiry.getMonth() - 1);
    expiry.setMonth(expiry.getMonth() + 1, 1);
    return expiry > currentTime;
  };

  $ = jQuery;

  hasTextSelected = $.formance.fn.hasTextSelected;

  defaultFormat = /(\d{1,4})/g;

  cards = [
    {
      type: 'maestro',
      pattern: /^(5018|5020|5038|6304|6759|676[1-3])/,
      format: defaultFormat,
      length: [12, 13, 14, 15, 16, 17, 18, 19],
      cvcLength: [3],
      luhn: true
    }, {
      type: 'dinersclub',
      pattern: /^(36|38|30[0-5])/,
      format: defaultFormat,
      length: [14],
      cvcLength: [3],
      luhn: true
    }, {
      type: 'laser',
      pattern: /^(6706|6771|6709)/,
      format: defaultFormat,
      length: [16, 17, 18, 19],
      cvcLength: [3],
      luhn: true
    }, {
      type: 'jcb',
      pattern: /^35/,
      format: defaultFormat,
      length: [16],
      cvcLength: [3],
      luhn: true
    }, {
      type: 'unionpay',
      pattern: /^62/,
      format: defaultFormat,
      length: [16, 17, 18, 19],
      cvcLength: [3],
      luhn: false
    }, {
      type: 'discover',
      pattern: /^(6011|65|64[4-9]|622)/,
      format: defaultFormat,
      length: [16],
      cvcLength: [3],
      luhn: true
    }, {
      type: 'mastercard',
      pattern: /^5[1-5]/,
      format: defaultFormat,
      length: [16],
      cvcLength: [3],
      luhn: true
    }, {
      type: 'amex',
      pattern: /^3[47]/,
      format: /(\d{1,4})(\d{1,6})?(\d{1,5})?/,
      length: [15],
      cvcLength: [3, 4],
      luhn: true
    }, {
      type: 'visa',
      pattern: /^4/,
      format: defaultFormat,
      length: [13, 14, 15, 16],
      cvcLength: [3],
      luhn: true
    }
  ];

  cardFromNumber = function(num) {
    var card, _i, _len;

    num = (num + '').replace(/\D/g, '');
    for (_i = 0, _len = cards.length; _i < _len; _i++) {
      card = cards[_i];
      if (card.pattern.test(num)) {
        return card;
      }
    }
  };

  cardFromType = function(type) {
    var card, _i, _len;

    for (_i = 0, _len = cards.length; _i < _len; _i++) {
      card = cards[_i];
      if (card.type === type) {
        return card;
      }
    }
  };

  luhnCheck = function(num) {
    var digit, digits, odd, sum, _i, _len;

    odd = true;
    sum = 0;
    digits = (num + '').split('').reverse();
    for (_i = 0, _len = digits.length; _i < _len; _i++) {
      digit = digits[_i];
      digit = parseInt(digit, 10);
      if ((odd = !odd)) {
        digit *= 2;
      }
      if (digit > 9) {
        digit -= 9;
      }
      sum += digit;
    }
    return sum % 10 === 0;
  };

  restrictCardNumber = function(e) {
    var $target, card, digit, value;

    $target = $(e.currentTarget);
    digit = String.fromCharCode(e.which);
    if (!/^\d+$/.test(digit)) {
      return;
    }
    if (hasTextSelected($target)) {
      return;
    }
    value = ($target.val() + digit).replace(/\D/g, '');
    card = cardFromNumber(value);
    if (card) {
      return value.length <= card.length[card.length.length - 1];
    } else {
      return value.length <= 16;
    }
  };

  reFormatCardNumber = function(e) {
    var _this = this;

    return setTimeout(function() {
      var $target, value;

      $target = $(e.currentTarget);
      value = $target.val();
      value = $.formance.formatCardNumber(value);
      return $target.val(value);
    });
  };

  formatCardNumber = function(e) {
    var $target, card, digit, length, re, upperLength, value;

    digit = String.fromCharCode(e.which);
    if (!/^\d+$/.test(digit)) {
      return;
    }
    $target = $(e.currentTarget);
    value = $target.val();
    card = cardFromNumber(value + digit);
    length = (value.replace(/\D/g, '') + digit).length;
    upperLength = 16;
    if (card) {
      upperLength = card.length[card.length.length - 1];
    }
    if (length >= upperLength) {
      return;
    }
    if (($target.prop('selectionStart') != null) && $target.prop('selectionStart') !== value.length) {
      return;
    }
    if (card && card.type === 'amex') {
      re = /^(\d{4}|\d{4}\s\d{6})$/;
    } else {
      re = /(?:^|\s)(\d{4})$/;
    }
    if (re.test(value)) {
      e.preventDefault();
      return $target.val(value + ' ' + digit);
    } else if (re.test(value + digit)) {
      e.preventDefault();
      return $target.val(value + digit + ' ');
    }
  };

  formatBackCardNumber = function(e) {
    var $target, value;

    $target = $(e.currentTarget);
    value = $target.val();
    if (e.meta) {
      return;
    }
    if (e.which !== 8) {
      return;
    }
    if (($target.prop('selectionStart') != null) && $target.prop('selectionStart') !== value.length) {
      return;
    }
    if (/\d\s$/.test(value)) {
      e.preventDefault();
      return $target.val(value.replace(/\d\s$/, ''));
    } else if (/\s\d?$/.test(value)) {
      e.preventDefault();
      return $target.val(value.replace(/\s\d?$/, ''));
    }
  };

  setCardType = function(e) {
    var $target, allTypes, card, cardType, val;

    $target = $(e.currentTarget);
    val = $target.val();
    cardType = $.formance.creditCardType(val) || 'unknown';
    if (!$target.hasClass(cardType)) {
      allTypes = (function() {
        var _i, _len, _results;

        _results = [];
        for (_i = 0, _len = cards.length; _i < _len; _i++) {
          card = cards[_i];
          _results.push(card.type);
        }
        return _results;
      })();
      $target.removeClass('unknown');
      $target.removeClass(allTypes.join(' '));
      $target.addClass(cardType);
      $target.toggleClass('identified', cardType !== 'unknown');
      return $target.trigger('payment.cardType', cardType);
    }
  };

  $.formance.creditCardType = function(num) {
    var _ref;

    if (!num) {
      return null;
    }
    return ((_ref = cardFromNumber(num)) != null ? _ref.type : void 0) || null;
  };

  $.formance.formatCreditCardNumber = function(num) {
    var card, groups, upperLength, _ref;

    card = cardFromNumber(num);
    if (!card) {
      return num;
    }
    upperLength = card.length[card.length.length - 1];
    num = num.replace(/\D/g, '');
    num = num.slice(0, +upperLength + 1 || 9e9);
    if (card.format.global) {
      return (_ref = num.match(card.format)) != null ? _ref.join(' ') : void 0;
    } else {
      groups = card.format.exec(num);
      if (groups != null) {
        groups.shift();
      }
      return groups != null ? groups.join(' ') : void 0;
    }
  };

  $.formance.fn.format_credit_card_number = function() {
    this.formance('restrictNumeric');
    this.on('keypress', restrictCardNumber);
    this.on('keypress', formatCardNumber);
    this.on('keydown', formatBackCardNumber);
    this.on('keyup', setCardType);
    this.on('paste', reFormatCardNumber);
    return this;
  };

  $.formance.fn.validate_credit_card_number = function() {
    var card, num, _ref;

    num = $(this).val();
    num = (num + '').replace(/\s+|-/g, '');
    if (!/^\d+$/.test(num)) {
      return false;
    }
    card = cardFromNumber(num);
    if (!card) {
      return false;
    }
    return (_ref = num.length, __indexOf.call(card.length, _ref) >= 0) && (card.luhn === false || luhnCheck(num));
  };

  $ = jQuery;

  hasTextSelected = $.formance.fn.hasTextSelected;

  restrictDateDDMMYYYY = function(e) {
    var $target, digit, value;

    $target = $(e.currentTarget);
    digit = String.fromCharCode(e.which);
    if (!/^\d+$/.test(digit)) {
      return;
    }
    if (hasTextSelected($target)) {
      return;
    }

    value = $target.val() + digit;
    value = value.replace(/\D/g, '');

    if (value.length > 8) {
      return false;
    }
  };

  formatDateDDMMYYYY = function(e) {
    var $target, digit, old_val, val;

    digit = String.fromCharCode(e.which);
    if (!/^\d+$/.test(digit)) {
      return;
    }
    $target = $(e.currentTarget);
    old_val = $target.val();
    val = old_val + digit;

    if (/^\d$/.test(val) && (digit !== '0' && digit !== '1' && digit !== '2' && digit !== '3')) {
      e.preventDefault();
      return $target.val("0" + val + " / ");
    } else if (/^\d{2}$/.test(val)) {
      e.preventDefault();
      return $target.val("" + val + " / ");
    } else if (/^\d{2}\s\/\s\d$/.test(val) && (digit !== '0' && digit !== '1')) {
      e.preventDefault();
      return $target.val("" + old_val + "0" + digit + " / ");
    } else if (/^\d{2}\s\/\s\d{2}$/.test(val)) {
      e.preventDefault();
      return $target.val("" + val + " / ");
    }
  };

  formatForwardDateDDMMYYYY = function(e) {
    var $target, digit, val;

    digit = String.fromCharCode(e.which);
    if (!/^\d+$/.test(digit)) {
      return;
    }
    $target = $(e.currentTarget);
    val = $target.val();
    if (/^\d{2}$/.test(val) || /^\d{2}\s\/\s\d{2}$/.test(val)) {
      return $target.val("" + val + " / ");
    }
  };

  formatForwardSlashDateDDMMYYYY = function(e) {
    var $target, date, day, month, parse_day, parse_month, slash, val, _ref;

    slash = String.fromCharCode(e.which);
    if (slash !== '/') {
      return;
    }
    $target = $(e.currentTarget);
    val = $target.val();
    parse_day = /^(\d)$/;
    parse_month = /^(\d{2})\s\/\s(\d)$/;
    if (parse_day.test(val) && val !== '0') {
      return $target.val("0" + val + " / ");
    } else if (parse_month.test(val)) {
      _ref = val.match(parse_month), date = _ref[0], day = _ref[1], month = _ref[2];
      if (month !== '0') {
        return $target.val("" + day + " / 0" + month + " / ");
      }
    }
  };

  formatBackDateDDMMYYYY = function(e) {
    var $target, value;

    if (e.meta) {
      return;
    }
    $target = $(e.currentTarget);
    value = $target.val();
    if (e.which !== 8) {
      return;
    }
    if (($target.prop('selectionStart') != null) && $target.prop('selectionStart') !== value.length) {
      return;
    }
    if (/\d(\s|\/)+$/.test(value)) {
      e.preventDefault();
      return $target.val(value.replace(/\d(\s|\/)*$/, ''));
    } else if (/\s\/\s?\d?$/.test(value)) {
      e.preventDefault();
      return $target.val(value.replace(/\s\/\s?\d?$/, ''));
    }
  };

  $.formance.fn.format_dd_mm_yyyy = function() {
    this.formance('restrictNumeric');
    this.on('keypress', restrictDateDDMMYYYY);
    this.on('keypress', formatDateDDMMYYYY);
    this.on('keypress', formatForwardSlashDateDDMMYYYY);
    this.on('keypress', formatForwardDateDDMMYYYY);
    this.on('keydown', formatBackDateDDMMYYYY);
    return this;
  };

  restrictDateMMDDYYYY = function (e) {
      var $target, digit, value;

      $target = $(e.currentTarget);
      digit = String.fromCharCode(e.which);
      if (!/^\d+$/.test(digit)) {
          return;
      }
      if (hasTextSelected($target)) {
          return;
      }

      value = $target.val() + digit;
      value = value.replace(/\D/g, '');

      if (value.length > 8) {
          return false;
      }
  };

  formatDateMMDDYYYY = function (e) {
      var $target, digit, old_val, val;

      digit = String.fromCharCode(e.which);
      if (!/^\d+$/.test(digit)) {
          return;
      }

      $target = $(e.currentTarget);
      old_val = $target.val();
      val = old_val + digit;

      if (/^\d$/.test(val) && (digit !== '0' && digit !== '1')) {
          e.preventDefault();
          return $target.val("0" + val + " / ");
      } else if (/^\d{2}$/.test(val)) {
          e.preventDefault();
          return $target.val("" + val + " / ");
      } else if (/^\d{2}\s\/\s\d$/.test(val) && (digit !== '0' && digit !== '1' && digit !== '2' && digit !== '3')) {
          e.preventDefault();
          return $target.val("" + old_val + "0" + digit + " / ");
      } else if (/^\d{2}\s\/\s\d{2}$/.test(val)) {
          e.preventDefault();
          return $target.val("" + val + " / ");
      }
  };

  formatForwardDateMMDDYYYY = function (e) {
      var $target, digit, val;

      digit = String.fromCharCode(e.which);
      if (!/^\d+$/.test(digit)) {
          return;
      }
      $target = $(e.currentTarget);
      val = $target.val();
      if (/^\d{2}$/.test(val) || /^\d{2}\s\/\s\d{2}$/.test(val)) {
          return $target.val("" + val + " / ");
      }
      e.stopImmediatePropagation();
  };

  formatForwardSlashDateMMDDYYYY = function (e) {
      var $target, date, day, month, parse_day, parse_month, slash, val, _ref;

      slash = String.fromCharCode(e.which);
      if (slash !== '/') {
          return;
      }

      $target = $(e.currentTarget);
      val = $target.val();
      parse_month = /^(\d{2})$/;
      parse_day = /^(\d{2})\s\/\s(\d{2})$/;
      if (parse_day.test(val) && val !== '0') {
          return $target.val("0" + val + " / ");
      } else if (parse_month.test(val)) {
          _ref = val.match(parse_month), day = _ref[0], month = _ref[2];
          if (month !== '0') {
              return $target.val("" + day + " / 0" + month + " / ");
          }
      }
  };

  formatBackDateMMDDYYYY = function (e) {
      var $target, value;

      if (e.meta) {
          return;
      }
      $target = $(e.currentTarget);
      value = $target.val();

      if (e.which !== 8) {
          return;
      }
      if (($target.prop('selectionStart') != null) && $target.prop('selectionStart') !== value.length) {
          return;
      }
      if (/\d(\s|\/)+$/.test(value)) {
          e.preventDefault();
          return $target.val(value.replace(/\d(\s|\/)*$/, ''));
      } else if (/\s\/\s?\d?$/.test(value)) {
          e.preventDefault();
          return $target.val(value.replace(/\s\/\s?\d?$/, ''));
      }
  };

  $.formance.fn.format_mm_dd_yyyy = function () {
      this.formance('restrictNumeric');
      this.on('keypress', restrictDateMMDDYYYY);
      this.on('keypress', formatDateMMDDYYYY);
      this.on('keypress', formatForwardSlashDateMMDDYYYY);
      this.on('keypress', formatForwardDateMMDDYYYY);
      this.on('keydown', formatBackDateMMDDYYYY);
      return this;
  };

  parseDateMMDDYYYY = function (date_string) {
      var day, month, year, _ref;

      _ref = date_string != null ? date_string.replace(/\s/g, '').split('/', 3) : [NaN, NaN, NaN], day = _ref[1], month = _ref[0], year = _ref[2];
      if (!((year != null) && year.length === 4)) {
          year = NaN;
      }
      day = parseInt(day, 10);
      month = parseInt(month, 10);
      year = parseInt(year, 10);
      return {
          day: day,
          month: month,
          year: year
      };
  };

  parseDateDDMMYYYY = function(date_string) {
    var day, month, year, _ref;

    _ref = date_string != null ? date_string.replace(/\s/g, '').split('/', 3) : [NaN, NaN, NaN], day = _ref[0], month = _ref[1], year = _ref[2];
    if (!((year != null) && year.length === 4)) {
      year = NaN;
    }
    day = parseInt(day, 10);
    month = parseInt(month, 10);
    year = parseInt(year, 10);
    return {
      day: day,
      month: month,
      year: year
    };
  };

  $.formance.fn.val_dd_mm_yyyy = function() {
    var date;

    date = parseDateDDMMYYYY(this.val());
    if ((date.day == null) || isNaN(date.day)) {
      return false;
    }
    if ((date.month == null) || isNaN(date.month)) {
      return false;
    }
    if ((date.year == null) || isNaN(date.year)) {
      return false;
    }
    return new Date(date.year, date.month - 1, date.day);
  };

  $.formance.fn.val_mm_dd_yyyy = function () {
      var date;

      date = parseDateMMDDYYYY(this.val());
      if ((date.day == null) || isNaN(date.day)) {
          return false;
      }
      if ((date.month == null) || isNaN(date.month)) {
          return false;
      }
      if ((date.year == null) || isNaN(date.year)) {
          return false;
      }
      return new Date(date.year, date.month - 1, date.day);
  };

  $.formance.fn.validate_dd_mm_yyyy = function() {
    var date, date_dict;

    date_dict = parseDateDDMMYYYY(this.val());
    date = this.formance('val_dd_mm_yyyy');
    if (!((date != null) && date instanceof Date)) {
      return false;
    }
    if (date.getDate() !== date_dict.day) {
      return false;
    }
    if (date.getMonth() + 1 !== date_dict.month) {
      return false;
    }
    if (date.getFullYear() !== date_dict.year) {
      return false;
    }
    return true;
  };

  $.formance.fn.validate_mm_dd_yyyy = function () {
      var date, date_dict;

      date_dict = parseDateMMDDYYYY(this.val());
      date = this.formance('val_mm_dd_yyyy');
      if (!((date != null) && date instanceof Date)) {
          return false;
      }
      if (date.getDate() !== date_dict.day) {
          return false;
      }
      if (date.getMonth() + 1 !== date_dict.month) {
          return false;
      }
      if (date.getFullYear() !== date_dict.year) {
          return false;
      }
      return true;
  };

  $ = jQuery;

  hasTextSelected = $.formance.fn.hasTextSelected;

  $.formance.fn.format_email = function() {
    return this;
  };

  $.formance.fn.validate_email = function() {
    var $this, algorithms, val, validator;

    algorithms = {
      simple: /^\S+@\S+$/,
      complex: /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\ ".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA -Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
    };
    $this = $(this);
    val = $this.val();
    if (val == null) {
      return false;
    }
    validator = $this.data('formance_algorithm');
    if ((validator != null) && validator in algorithms) {
      return algorithms[validator].test(val);
    }
    return algorithms['simple'].test(val);
  };

  $ = jQuery;

  $.formance.fn.format_number = function() {
    var length;

    length = $(this).data('formance_length');
    if (length != null) {
      $(this).attr('maxLength', length);
    }
    this.formance('restrictNumeric');
    return this;
  };

  $.formance.fn.validate_number = function() {
    var $this, length, val;

    $this = $(this);
    val = $this.val();
    length = $this.data('formance_length');
    if ((length != null) && (typeof length === 'number') && (val.length !== length)) {
      return false;
    }
    if ((length != null) && typeof length === 'string' && length !== '') {
      if (isNaN(parseInt(length, 10))) {
        return false;
      }
      if (val.length !== parseInt(length, 10)) {
        return false;
      }
    }
    return /^\d+$/.test(val);
  };

  $ = jQuery;

  hasTextSelected = $.formance.fn.hasTextSelected;

  restrictOntarioDriversLicenseNumber = function(e) {
    var $target, char, value;

    $target = $(e.currentTarget);
    char = String.fromCharCode(e.which);
    if (!/^[a-zA-Z\d]+$/.test(char)) {
      return;
    }
    if (hasTextSelected($target)) {
      return;
    }
    value = $target.val() + char;
    value = value.replace(/[^a-zA-Z\d]/g, '');
    if (value.length > 15) {
      return false;
    }
  };

  formatOntarioDriversLicenseNumber = function(e) {
    var $target, char, old_val, val;

    char = String.fromCharCode(e.which);
    if (!/^[a-zA-Z\d]+$/.test(char)) {
      return;
    }
    $target = $(e.currentTarget);
    old_val = $target.val();
    val = old_val + char.toUpperCase();
    if (old_val === '') {
      e.preventDefault();
      if (/^[A-Za-z]$/.test(val)) {
        return $target.val(val);
      }
    } else if (/^[A-Za-z]\d{0,3}$/.test(old_val)) {
      e.preventDefault();
      if (/^[A-Za-z]\d{4}$/.test(val)) {
        val = "" + val + " - ";
      }
      if (/^[A-Za-z]\d{0,4}[\s|\-]*$/.test(val)) {
        return $target.val(val);
      }
    } else if (/^[A-Za-z]\d{4}[\s|\-]*\d{0,4}$/.test(old_val)) {
      e.preventDefault();
      if (/^[A-Za-z]\d{4}[\s|\-]*\d{5}$/.test(val)) {
        val = "" + val + " - ";
      }
      if (/^[A-Za-z]\d{4}[\s|\-]*\d{0,5}[\s|\-]*$/.test(val)) {
        return $target.val(val);
      }
    }
  };

  formatBackOntarioDriversLicenseNumber = function(e) {
    var $target, value;

    if (e.meta) {
      return;
    }
    $target = $(e.currentTarget);
    value = $target.val();
    if (e.which !== 8) {
      return;
    }
    if (($target.prop('selectionStart') != null) && $target.prop('selectionStart') !== value.length) {
      return;
    }
    if (/\d(\s|\-)+$/.test(value)) {
      e.preventDefault();
      return $target.val(value.replace(/\d(\s|\-)+$/, ''));
    }
  };

  formatPasteOntarioDriversLicenseNumber = function(e) {
    var _this = this;

    return setTimeout(function() {
      var $target, first5, full, last5, middle5, val, _ref;

      $target = $(e.currentTarget);
      val = $target.val();
      _ref = val.match(/^([A-Za-z\d]{5})[\s|\-]*(\d{5})[\s|\-]*(\d{5})$/), full = _ref[0], first5 = _ref[1], middle5 = _ref[2], last5 = _ref[3];
      return $target.val("" + first5 + " - " + middle5 + " - " + last5);
    });
  };

  $.formance.fn.format_ontario_drivers_license_number = function() {
    this.formance('restrictAlphaNumeric');
    this.on('keypress', restrictOntarioDriversLicenseNumber);
    this.on('keypress', formatOntarioDriversLicenseNumber);
    this.on('keydown', formatBackOntarioDriversLicenseNumber);
    this.on('paste', formatPasteOntarioDriversLicenseNumber);
    return this;
  };

  $.formance.fn.validate_ontario_drivers_license_number = function() {
    var regex, val;

    val = $(this).val();
    if (val == null) {
      return false;
    }
    val = val.replace(/[\s|\-]/g, '');
    if (!/^[a-zA-Z\d]+$/.test()) {
      return false;
    }
    regex = /^[A-Za-z]\d{4}[\s|\-]*\d{5}[\s|\-]*\d{5}$/;
    return regex.test(val);
  };

  $ = jQuery;

  hasTextSelected = $.formance.fn.hasTextSelected;

  restrictOntarioOutdoorsCardNumber = function(e) {
    var $target, digit, value;

    $target = $(e.currentTarget);
    digit = String.fromCharCode(e.which);
    if (!/^\d+$/.test(digit)) {
      return;
    }
    if (hasTextSelected($target)) {
      return;
    }
    value = $target.val() + digit;
    value = value.replace(/\D/g, '');
    if (value.length > 15) {
      return false;
    }
  };

  formatOntarioOutdoorsCardNumber = function(e) {
    var $target, digit, old_val, val;

    digit = String.fromCharCode(e.which);
    if (!/^\d+$/.test(digit)) {
      return;
    }
    $target = $(e.currentTarget);
    old_val = $target.val();
    val = $target.val() + digit;
    if (old_val === '') {
      e.preventDefault();
      val = /^7$/.test(val) ? "708158 " : "708158 " + val;
      return $target.val(val);
    } else if (/^\d{5}$/.test(old_val)) {
      e.preventDefault();
      if (/^\d{6}$/.test(val)) {
        val = "" + val + " ";
      }
      if (/^\d{6}\s*$/.test(val)) {
        return target.val(val);
      }
    }
  };

  formatBackOntarioOutdoorsCardNumber = function(e) {
    var $target, value;

    if (e.meta) {
      return;
    }
    $target = $(e.currentTarget);
    value = $target.val();
    if (e.which !== 8) {
      return;
    }
    if (($target.prop('selectionStart') != null) && $target.prop('selectionStart') !== value.length) {
      return;
    }
    if (/708158\s+$/.test(value)) {
      e.preventDefault();
      return $target.val(value.replace(/708158\s+$/, ''));
    }
  };

  formatPasteOntarioOutdoorsCardNumber = function(e) {
    var _this = this;

    return setTimeout(function() {
      var $target, first6, full, last9, val, _ref;

      $target = $(e.currentTarget);
      val = $target.val();
      _ref = val.match(/^(\d{6})\s*(\d{9})$/), full = _ref[0], first6 = _ref[1], last9 = _ref[2];
      return $target.val("" + first6 + " " + last9);
    });
  };

  $.formance.fn.format_ontario_outdoors_card_number = function() {
    this.formance('restrictNumeric');
    this.on('keypress', restrictOntarioOutdoorsCardNumber);
    this.on('keypress', formatOntarioOutdoorsCardNumber);
    this.on('keydown', formatBackOntarioOutdoorsCardNumber);
    this.on('paste', formatPasteOntarioOutdoorsCardNumber);
    return this;
  };

  $.formance.fn.validate_ontario_outdoors_card_number = function() {
    var regex, val;

    val = $(this).val();
    if (val == null) {
      return false;
    }
    val = val.replace(/\s/g, '');
    if (!/^\d+$/.test(val)) {
      return false;
    }
    regex = /^708158\s*\d{9}$/;
    return regex.test(val);
  };

  $ = jQuery;

  hasTextSelected = $.formance.fn.hasTextSelected;

  restrictOntarioPhotoHealthCardNumber = function(e) {
    var $target, char, value;

    $target = $(e.currentTarget);
    char = String.fromCharCode(e.which);
    if (!/^[a-zA-Z\d]+$/.test(char)) {
      return;
    }
    if (hasTextSelected($target)) {
      return;
    }
    value = $target.val() + char;
    value = value.replace(/[^a-zA-Z\d]/g, '');
    if (value.length > 12) {
      return false;
    }
  };

  formatOntarioPhotoHealthCardNumber = function(e) {
    var $target, char, old_val, val;

    char = String.fromCharCode(e.which);
    if (!/^[a-zA-Z\d]+$/.test(char)) {
      return;
    }
    $target = $(e.currentTarget);
    old_val = $target.val();
    val = old_val + char.toUpperCase();
    if (/^\d{0,3}$/.test(old_val)) {
      e.preventDefault();
      if (/^\d{4}$/.test(val)) {
        val = "" + val + " - ";
      }
      if (/^\d{0,4}[\s|\-]*$/.test(val)) {
        return $target.val(val);
      }
    } else if (/^\d{4}[\s|\-]*\d{0,2}$/.test(old_val)) {
      e.preventDefault();
      if (/^\d{4}[\s|\-]*\d{3}$/.test(val)) {
        val = "" + val + " - ";
      }
      if (/^\d{4}[\s|\-]*\d{0,3}[\s|\-]*$/.test(val)) {
        return $target.val(val);
      }
    } else if (/^\d{4}[\s|\-]*\d{3}[\s|\-]*\d{0,2}$/.test(old_val)) {
      e.preventDefault();
      if (/^\d{4}[\s|\-]*\d{3}[\s|\-]*\d{3}$/.test(val)) {
        val = "" + val + " - ";
      }
      if (/^\d{4}[\s|\-]*\d{3}[\s|\-]*\d{0,3}[\s|\-]*$/.test(val)) {
        return $target.val(val);
      }
    } else if (/^\d{4}[\s|\-]*\d{3}[\s|\-]*\d{3}[\s|\-]*[A-Za-z]{0,1}$/.test(old_val)) {
      e.preventDefault();
      if (/^\d{4}[\s|\-]*\d{3}[\s|\-]*\d{3}[\s|\-]*[A-Za-z]{0,2}$/.test(val)) {
        return $target.val(val);
      }
    }
  };

  formatBackOntarioPhotoHealthCardNumber = function(e) {
    var $target, value;

    if (e.meta) {
      return;
    }
    $target = $(e.currentTarget);
    value = $target.val();
    if (e.which !== 8) {
      return;
    }
    if (($target.prop('selectionStart') != null) && $target.prop('selectionStart') !== value.length) {
      return;
    }
    if (/\d(\s|\-)+$/.test(value)) {
      e.preventDefault();
      return $target.val(value.replace(/\d(\s|\-)+$/, ''));
    }
  };

  formatPasteOntarioPhotoHealthCardNumber = function(e) {
    var _this = this;

    return setTimeout(function() {
      var $target, first4, full, last2, second3, third3, val, _ref;

      $target = $(e.currentTarget);
      val = $target.val();
      _ref = val.match(/^(\d{4})[\s|\-]*(\d{3})[\s|\-]*(\d{3})[\s|\-]*([A-Za-z]{2})$/), full = _ref[0], first4 = _ref[1], second3 = _ref[2], third3 = _ref[3], last2 = _ref[4];
      return $target.val("" + first4 + " - " + second3 + " - " + third3 + " - " + last2);
    });
  };

  $.formance.fn.format_ontario_photo_health_card_number = function() {
    this.formance('restrictAlphaNumeric');
    this.on('keypress', restrictOntarioPhotoHealthCardNumber);
    this.on('keypress', formatOntarioPhotoHealthCardNumber);
    this.on('keydown', formatBackOntarioPhotoHealthCardNumber);
    this.on('paste', formatPasteOntarioPhotoHealthCardNumber);
    return this;
  };

  $.formance.fn.validate_ontario_photo_health_card_number = function() {
    var regex, val;

    val = $(this).val();
    if (val == null) {
      return false;
    }
    val = val.replace(/[\s|\-]/g, '');
    if (!/^[a-zA-Z\d]+$/.test()) {
      return false;
    }
    regex = /^\d{4}[\s|\-]*\d{3}[\s|\-]*\d{3}[\s|\-]*[A-Za-z]{2}$/;
    return regex.test(val);
  };

  $ = jQuery;

  hasTextSelected = $.formance.fn.hasTextSelected;

  reFormatPhoneNumber = function(phoneNumberString) {
    var areaCode, first3, last4, phoneNumber, text, _ref;

    phoneNumber = phoneNumberString.replace(/\D/g, '').match(/^(\d{0,3})?(\d{0,3})?(\d{0,4})?$/);
    _ref = phoneNumber, phoneNumber = _ref[0], areaCode = _ref[1], first3 = _ref[2], last4 = _ref[3];
    text = '';
    if (areaCode != null) {
      text += "(" + areaCode;
    }
    if ((areaCode != null ? areaCode.length : void 0) === 3) {
      text += ") ";
    }
    if (first3 != null) {
      text += "" + first3;
    }
    if ((first3 != null ? first3.length : void 0) === 3) {
      text += " - ";
    }
    if (last4 != null) {
      text += "" + last4;
    }
    return text;
  };

  restrictPhoneNumber = function(e) {
    var $target, digit, value;

    $target = $(e.currentTarget);
    digit = String.fromCharCode(e.which);
    if (!/^\d+$/.test(digit)) {
      return;
    }
    if (hasTextSelected($target)) {
      return;
    }
    value = $target.val() + digit;
    value = value.replace(/\D/g, '');
    if (value.length > 10) {
      return false;
    }
  };

  formatPhoneNumber = function(e) {
    var $target, digit, text, val;

    digit = String.fromCharCode(e.which);
    if (!/^\d+$/.test(digit)) {
      return;
    }
    $target = $(e.currentTarget);
    val = $target.val() + digit;
    try{
        text = reFormatPhoneNumber(val);
    } catch (e) {
        return $target.val();
    }
    e.preventDefault();
    return $target.val(text);
  };

  formatBackPhoneNumber = function(e) {
    var $target, value;

    if (e.meta) {
      return;
    }
    $target = $(e.currentTarget);
    value = $target.val();
    if (e.which !== 8) {
      return;
    }
    if (($target.prop('selectionStart') != null) && $target.prop('selectionStart') !== value.length) {
      return;
    }
    if (/\(\d$/.test(value)) {
      e.preventDefault();
      return $target.val('');
    } else if (/\d\)(\s)+$/.test(value)) {
      e.preventDefault();
      return $target.val(value.replace(/\d\)(\s)*$/, ''));
    } else if (/\d(\s|\-)+$/.test(value)) {
      e.preventDefault();
      return $target.val(value.replace(/\d(\s|\-)+$/, ''));
    }
  };

  formatPastePhoneNumber = function(e) {
    var _this = this;

    return setTimeout(function() {
      var $target, text, val;

      $target = $(e.currentTarget);
      val = $target.val();
      text = reFormatPhoneNumber(val);
      return $target.val(text);
    });
  };

  $.formance.fn.format_phone_number = function() {
    this.formance('restrictNumeric');
    this.on('keypress', restrictPhoneNumber);
    this.on('keypress', formatPhoneNumber);
    this.on('keydown', formatBackPhoneNumber);
    this.on('paste', formatPastePhoneNumber);
    return this;
  };

  $.formance.fn.validate_phone_number = function() {
    var val;

    val = $(this).val();
    if (val == null) {
      return false;
    }
    val = val.replace(/\(|\)|\s+|-/g, '');
    if (!/^\d+$/.test(val)) {
      return false;
    }
    return val.replace(/\D/g, '').length === 10;
  };

  $ = jQuery;

  hasTextSelected = $.formance.fn.hasTextSelected;

  restrictPostalCode = function(e) {
    var $target, char, value;

    $target = $(e.currentTarget);
    char = String.fromCharCode(e.which);
    if (!/^[a-zA-Z\d]+$/.test(char)) {
      return;
    }
    if (hasTextSelected($target)) {
      return;
    }
    value = $target.val() + char;
    value = value.replace(/[^a-zA-Z\d]/g, '');
    if (value.length > 6) {
      return false;
    }
  };

  formatPostalCode = function(e) {
    var $target, char, old_val, val;

    char = String.fromCharCode(e.which);
    if (!/^[a-zA-Z\d]+$/.test(char)) {
      return;
    }
    $target = $(e.currentTarget);
    old_val = $target.val();
    val = old_val + char.toUpperCase();
    if (old_val === '') {
      e.preventDefault();
      if (/^[ABCEFGHJKLMNPRSTVXY]$/.test(val)) {
        return $target.val(val);
      }
    } else if (/^[ABCEFGHJKLMNPRSTVXY]$/.test(old_val)) {
      e.preventDefault();
      if (/^[ABCEFGHJKLMNPRSTVXY][0-9]$/.test(val)) {
        return $target.val(val);
      }
    } else if (/^[ABCEFGHJKLMNPRSTVXY][0-9]$/.test(old_val)) {
      e.preventDefault();
      if (/^[ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ]$/.test(val)) {
        return $target.val("" + val + " ");
      }
    } else if (/^[ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ]\s$/.test(old_val)) {
      e.preventDefault();
      if (/^[ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ]\s?[0-9]$/.test(val)) {
        return $target.val(val);
      }
    } else if (/^[ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ]\s?[0-9]$/.test(old_val)) {
      e.preventDefault();
      if (/^[ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ]\s?[0-9][ABCEFGHJKLMNPRSTVWXYZ]$/.test(val)) {
        return $target.val(val);
      }
    } else if (/^[ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ]\s?[0-9][ABCEFGHJKLMNPRSTVWXYZ]$/.test(old_val)) {
      e.preventDefault();
      if (/^[ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ]\s?[0-9][ABCEFGHJKLMNPRSTVWXYZ][0-9]$/.test(val)) {
        return $target.val(val);
      }
    }
  };

  formatBackPostalCode = function(e) {
    var $target, value;

    if (e.meta) {
      return;
    }
    $target = $(e.currentTarget);
    value = $target.val();
    if (e.which !== 8) {
      return;
    }
    if (($target.prop('selectionStart') != null) && $target.prop('selectionStart') !== value.length) {
      return;
    }
    if (/[ABCEFGHJKLMNPRSTVWXYZ](\s)+$/.test(value)) {
      e.preventDefault();
      return $target.val(value.replace(/[ABCEFGHJKLMNPRSTVWXYZ](\s)*$/, ''));
    }
  };

  formatPastePostalCode = function(e) {
    var _this = this;

    return setTimeout(function() {
      var $target, first_part, full, second_part, val, _ref;

      $target = $(e.currentTarget);
      val = $target.val();
      _ref = val.match(/^([ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ])\s?([0-9][ABCEFGHJKLMNPRSTVWXYZ][0-9])$/), full = _ref[0], first_part = _ref[1], second_part = _ref[2];
      return $target.val("" + first_part + " " + second_part);
    });
  };

  $.formance.fn.format_postal_code = function() {
    this.formance('restrictAlphaNumeric');
    this.on('keypress', restrictPostalCode);
    this.on('keypress', formatPostalCode);
    this.on('keydown', formatBackPostalCode);
    this.on('paste', formatPastePostalCode);
    return this;
  };

  $.formance.fn.validate_postal_code = function() {
    var val;

    val = $(this).val();
    if (val == null) {
      return false;
    }
    val = val.replace(/\s+/g, '');
    if (!/^[a-zA-Z\d]+$/.test(val)) {
      return false;
    }
    val = val.replace(/[^a-zA-Z\d]/g, '');
    return /^[ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ]\s?[0-9][ABCEFGHJKLMNPRSTVWXYZ][0-9]$/.test(val.toUpperCase());
  };

  $ = jQuery;

  hasTextSelected = $.formance.fn.hasTextSelected;

  restrictTimeYYMM = function(e) {
    var $target, digit, value;

    $target = $(e.currentTarget);
    digit = String.fromCharCode(e.which);
    if (!/^\d+$/.test(digit)) {
      return;
    }
    if (hasTextSelected($target)) {
      return;
    }
    value = $target.val() + digit;
    value = value.replace(/\D/g, '');
    if (value.length > 4) {
      return false;
    }
  };

  formatTimeYYMM = function(e) {
    var $target, digit, old_val, val;

    digit = String.fromCharCode(e.which);
    if (!/^\d+$/.test(digit)) {
      return;
    }
    $target = $(e.currentTarget);
    old_val = $target.val();
    val = old_val + digit;
    if (/^\d{2}$/.test(val)) {
      e.preventDefault();
      return $target.val("" + val + " / ");
    } else if (/^\d{2}\s\/\s\d{1}$/.test(val) && (digit !== '0' && digit !== '1')) {
      e.preventDefault();
      return $target.val("" + old_val + "0" + digit);
    }
  };

  formatForwardTimeYYMM = function(e) {
    var $target, digit, val;

    digit = String.fromCharCode(e.which);
    if (!/^\d+$/.test(digit)) {
      return;
    }
    $target = $(e.currentTarget);
    val = $target.val();
    if (/^\d{2}$/.test(val)) {
      return $target.val("" + val + " / ");
    }
  };

  formatForwardSlashTimeYYMM = function(e) {
    var $target, parse_year, slash, val;

    slash = String.fromCharCode(e.which);
    if (slash !== '/') {
      return;
    }
    $target = $(e.currentTarget);
    val = $target.val();
    parse_year = /^(\d)$/;
    if (parse_year.test(val) && val.length === 2 || val.length === 1) {
      return $target.val("0" + val + " / ");
    }
  };

  formatBackTimeYYMM = function(e) {
    var $target, value;

    if (e.meta) {
      return;
    }
    $target = $(e.currentTarget);
    value = $target.val();
    if (e.which !== 8) {
      return;
    }
    if (($target.prop('selectionStart') != null) && $target.prop('selectionStart') !== value.length) {
      return;
    }
    if (/\d(\s|\/)+$/.test(value)) {
      e.preventDefault();
      return $target.val(value.replace(/\d(\s|\/)*$/, ''));
    } else if (/\s\/\s?\d?$/.test(value)) {
      e.preventDefault();
      return $target.val(value.replace(/\s\/\s?\d?$/, ''));
    }
  };

  $.formance.fn.format_time_yy_mm = function() {
    this.formance("restrictNumeric");
    this.on("keypress", restrictTimeYYMM);
    this.on("keypress", formatTimeYYMM);
    this.on("keypress", formatForwardTimeYYMM);
    this.on("keypress", formatForwardSlashTimeYYMM);
    this.on("keydown", formatBackTimeYYMM);
    return this;
  };

  parseTimeYYMM = function(time_string) {
    var months, years, _ref;

    _ref = time_string != null ? time_string.replace(/\s/g, '').split('/', 2) : [NaN, NaN], years = _ref[0], months = _ref[1];
    months = parseInt(months, 10);
    years = parseInt(years, 10);
    return {
      years: years,
      months: months
    };
  };

  $.formance.fn.val_time_yy_mm = function() {
    var time;

    time = parseTimeYYMM(this.val());
    if ((time.years == null) || isNaN(time.years)) {
      return false;
    }
    if ((time.months == null) || isNaN(time.months)) {
      return false;
    }
    return time;
  };

  $.formance.fn.validate_time_yy_mm = function() {
    var time, time_dict, time_yymm;

    time_dict = parseTimeYYMM(this.val());
    time = this.formance("val_time_yy_mm");
    time_yymm = $(this).val();
    if (time.months !== time_dict.months) {
      return false;
    }
    if (time.years !== time_dict.years) {
      return false;
    }
    if (/^(\d{1}[\d{1}]*)[\s\/]*(\d{1}[\d{1}]*)[\s\/]*$/.test(time_yymm)) {
      return true;
    }
    return false;
  };

  $ = jQuery;

  hasTextSelected = $.formance.fn.hasTextSelected;

  restrictUkSortCode = function(e) {
    var $target, digit, value;

    $target = $(e.currentTarget);
    digit = String.fromCharCode(e.which);
    if (!/^\d+$/.test(digit)) {
      return;
    }
    if (hasTextSelected($target)) {
      return;
    }
    value = $target.val() + digit;
    value = value.replace(/\D/g, '');
    if (value.length > 6) {
      return false;
    }
  };

  formatForwardUkSortCode = function(e) {
    var $target, digit, val;

    digit = String.fromCharCode(e.which);
    if (!/^\d+$/.test(digit)) {
      return;
    }
    $target = $(e.currentTarget);
    val = $target.val();
    if (/^\d{2}$/.test(val) || /^\d{2}\s\-\s\d{2}$/.test(val)) {
      return $target.val("" + val + " - ");
    }
  };

  formatBackUkSortCode = function(e) {
    var $target, value;

    if (e.meta) {
      return;
    }
    $target = $(e.currentTarget);
    value = $target.val();
    if (e.which !== 8) {
      return;
    }
    if (($target.prop('selectionStart') != null) && $target.prop('selectionStart') !== value.length) {
      return;
    }
    if (/\d(\s|\-)+$/.test(value)) {
      e.preventDefault();
      return $target.val(value.replace(/\d(\s|\-)+$/, ''));
    } else if (/\s\-\s?\d?$/.test(value)) {
      e.preventDefault();
      return $target.val(value.replace(/\s\-\s?\d?$/, ''));
    }
  };

  formatUkSortCode = function(e) {
    var $target, digit, old_val, val;

    digit = String.fromCharCode(e.which);
    if (!/^\d+$/.test(digit)) {
      return;
    }
    $target = $(e.currentTarget);
    old_val = $target.val();
    val = old_val + digit;
    if (/^\d{2}$/.test(val)) {
      e.preventDefault();
      return $target.val("" + val + " - ");
    } else if (/^\d{2}\s\-\s\d{2}$/.test(val)) {
      e.preventDefault();
      return $target.val("" + val + " - ");
    }
  };

  $.formance.fn.format_uk_sort_code = function(e) {
    this.formance("restrictNumeric");
    this.on("keypress", restrictUkSortCode);
    this.on("keypress", formatUkSortCode);
    this.on("keypress", formatForwardUkSortCode);
    this.on("keydown", formatBackUkSortCode);
    return this;
  };

  $.formance.fn.validate_uk_sort_code = function() {
    var sortCode;

    sortCode = $(this).val();
    if (/^(\d{2})[\s\-]*(\d{2})[\s\-]*(\d{2})[\s]*$/.test(sortCode)) {
      return true;
    }
    return false;
  };

  $ = jQuery;

  hasTextSelected = $.formance.fn.hasTextSelected;

  restrictDateYYYYMMDD = function(e) {
    var $target, digit, value;

    $target = $(e.currentTarget);
    digit = String.fromCharCode(e.which);
    if (!/^\d+$/.test(digit)) {
      return;
    }
    if (hasTextSelected($target)) {
      return;
    }
    value = $target.val() + digit;
    value = value.replace(/\D/g, '');
    if (value.length > 8) {
      return false;
    }
  };

  formatDateYYYYMMDD = function(e) {
    var $target, digit, old_val, val;

    digit = String.fromCharCode(e.which);
    if (!/^\d+$/.test(digit)) {
      return;
    }
    $target = $(e.currentTarget);
    old_val = $target.val();
    val = old_val + digit;
    if (/^\d{4}$/.test(val)) {
      e.preventDefault();
      return $target.val("" + val + " / ");
    } else if (/^\d{4}\s\/\s\d$/.test(val) && (digit !== '0' && digit !== '1')) {
      e.preventDefault();
      return $target.val("" + old_val + "0" + digit + " / ");
    } else if (/^\d{4}\s\/\s\d{2}$/.test(val)) {
      e.preventDefault();
      return $target.val("" + val + " / ");
    } else if (/^\d{4}\s\/\s\d{2}\s\/\s\d$/.test(val) && (digit !== '0' && digit !== '1' && digit !== '2' && digit !== '3')) {
      e.preventDefault();
      return $target.val("" + old_val + "0" + digit);
    }
  };

  formatForwardDateYYYYMMDD = function(e) {
    var $target, digit, val;

    digit = String.fromCharCode(e.which);
    if (!/^\d+$/.test(digit)) {
      return;
    }
    $target = $(e.currentTarget);
    val = $target.val();
    if (/^\d{4}$/.test(val) || /^\d{4}\s\/\s\d{2}$/.test(val)) {
      return $target.val("" + val + " / ");
    }
  };

  formatForwardSlashDateYYYYMMDD = function(e) {
    var $target, date, month, parse_month, slash, val, year, _ref;

    slash = String.fromCharCode(e.which);
    if (slash !== '/') {
      return;
    }
    $target = $(e.currentTarget);
    val = $target.val();
    parse_month = /^(\d{4})\s\/\s(\d)$/;
    if (parse_month.test(val)) {
      _ref = val.match(parse_month), date = _ref[0], year = _ref[1], month = _ref[2];
      if (month !== '0') {
        return $target.val("" + year + " / 0" + month + " / ");
      }
    }
  };

  formatBackDateYYYYMMDD = function(e) {
    var $target, value;

    if (e.meta) {
      return;
    }
    $target = $(e.currentTarget);
    value = $target.val();
    if (e.which !== 8) {
      return;
    }
    if (($target.prop('selectionStart') != null) && $target.prop('selectionStart') !== value.length) {
      return;
    }
    if (/\d(\s|\/)+$/.test(value)) {
      e.preventDefault();
      return $target.val(value.replace(/\d(\s|\/)*$/, ''));
    } else if (/\s\/\s?\d?$/.test(value)) {
      e.preventDefault();
      return $target.val(value.replace(/\s\/\s?\d?$/, ''));
    }
  };

  $.formance.fn.format_yyyy_mm_dd = function() {
    this.formance('restrictNumeric');
    this.on('keypress', restrictDateYYYYMMDD);
    this.on('keypress', formatDateYYYYMMDD);
    this.on('keypress', formatForwardSlashDateYYYYMMDD);
    this.on('keypress', formatForwardDateYYYYMMDD);
    this.on('keydown', formatBackDateYYYYMMDD);
    return this;
  };

  parse_date_yyyy_mm_dd = function(date_string) {
    var day, month, year, _ref;

    _ref = date_string != null ? date_string.replace(/\s/g, '').split('/', 3) : [NaN, NaN, NaN], year = _ref[0], month = _ref[1], day = _ref[2];
    if (!((year != null) && year.length === 4)) {
      year = NaN;
    }
    day = parseInt(day, 10);
    month = parseInt(month, 10);
    year = parseInt(year, 10);
    return {
      day: day,
      month: month,
      year: year
    };
  };

  $.formance.fn.val_yyyy_mm_dd = function() {
    var date;

    date = parse_date_yyyy_mm_dd(this.val());
    if ((date.day == null) || isNaN(date.day)) {
      return false;
    }
    if ((date.month == null) || isNaN(date.month)) {
      return false;
    }
    if ((date.year == null) || isNaN(date.year)) {
      return false;
    }
    return new Date(date.year, date.month - 1, date.day);
  };

  $.formance.fn.validate_yyyy_mm_dd = function() {
    var date, date_dict;

    date_dict = parse_date_yyyy_mm_dd(this.val());
    date = this.formance('val_yyyy_mm_dd');
    if (!((date != null) && date instanceof Date)) {
      return false;
    }
    if (date.getDate() !== date_dict.day) {
      return false;
    }
    if (date.getMonth() + 1 !== date_dict.month) {
      return false;
    }
    if (date.getFullYear() !== date_dict.year) {
      return false;
    }
    return true;
  };

}).call(this);
;
var SearchResultApi = (function () {
    return {
        getUrl: function (type, seoname, postal, id, query) {
            var url = "";
            var ux = window.scUx || SCSHelper.UX_TYPES.SINGLECARE;
            var pageUrl;
            if (window.isMember) url += "/member";
            switch (type) {
                case "condition":                    
                    url += "/conditions/" + query;
                    break;
                case "hardware":
                    url += "/hardware/" + seoname;
                    break;
                case "location":
                    url += "/practices/" + seoname;
                    break;
                case "more_location":
                    pageUrl = (window.area === "Member") ? "/detail-search" : "/health-provider-discounts";
                    url += pageUrl + "/locations/" + postal + "/" + query ;
                    break;
                case "more_specialty":
                    var urlPrefix = (window.area === "Member") ? "" : "/health-provider-discounts";
                    pageUrl = (window.area === "Member") ? "/specialties" : "/all-specialties";
                    url += urlPrefix + pageUrl + query ;
                    break;
                case "more_provider":
                    pageUrl = (window.area === "Member") ? "/detail-search" : "/health-provider-discounts";
                    url += pageUrl + "/providers/" + postal + "/" + query ;
                    break;
                case "more_symptom":
                case "more_prescription":
                    return false;
                case "prescription":
                    var rxPrefix;
                    var zip = postal || vmLocation.currentLocation.zipcode || window.DEFAULT_RX_ZIP;
                    switch (window.baseUrl) {
                        case "/":
                            rxPrefix = "prescription";
                            break;
                        default:
                            rxPrefix = ux;
                            break;
                    }
                    url += "/" + rxPrefix + "/" + seoname + "?q=" + query;
                    return url;
                    break;
                case "prescriber":
                case "provider":
                    url += "/doctors/" + seoname ;
                    break;
                case "reason":
                    url += "/reason/" + seoname ;
                    break;
                case "specialty":
                    pageUrl = (window.area === "Member") ? "/detail-search" : "/health-provider-discounts";
                    url += pageUrl + "/specialties/" + postal + "/" + id ;
                    break;
            }
            return url += "?q=" + query;
        },
        highlightQuery: function (name, query) {
            if (/See all/.test(name)) return name;
            var cleanedQuery = query.replace(/[^a-z0-9\s]/gi, '');
            var r = new RegExp(cleanedQuery, 'i');
            var strongMatch = name.toLowerCase().indexOf(query.toLowerCase().trim());
            if (strongMatch > -1) {
                // stronger match, including symbols
                var splitName = name.split(''); // function
                var leftPad = splitName.slice(0, strongMatch).join('');
                var hightlightedName = splitName.slice(strongMatch, strongMatch + query.length).join('');
                var rightRemainder = splitName.slice(leftPad.length + query.length).join('');
                return leftPad + "<b>" + hightlightedName + "</b>" + rightRemainder;
            }
            if (r.test(name)) {
                // soft match without symbols
                var replaceWith = r.exec(name)[0];
                return name.replace(new RegExp(cleanedQuery, 'i'), "<b>" + replaceWith + "</b>");
            }
            return name;
        }
    }
})();


/* 
* Razor Directives
*   rztext: allow razor initial rendering
*   rzinit: destroy node when vue.js takes over
*/
Vue.directive('rztext', {
    update: function (el, binding) {
        el.innerHTML = binding.value;
    }
});

Vue.directive('rzinit', {
    bind: function(el) {
        el.innerHTML = null;
    }
});


/*
* Filters
* currency: format for pricing across the site "$1,234,567.89"
*/

var vmPriceFormat = {
    filters: {
        currency: function (price) {
            if (price === undefined || price == null) return "";
            price = price.toString().replace(/,/g, "");
            if (parseFloat(price) > 999) {
                price = parseFloat(price).toFixed(0);
            }

            // Add commas
            price = price.replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,");
            return '$' + price;
        },
        twoDecimals: function (number) {
            if (number === undefined || number == null) return "";

            // Validate number and round to 2 decimals
            number = (parseFloat(number.toString().replace(/,/g, "")) || 0);
            return number.toFixed(2);
        },
        maxTwoDecimals: function (number) {
            if (number === undefined || number == null) return "";

            // Validate number and round to max 2 decimals
            number = (parseFloat(number.toString().replace(/,/g, "")) || 0);
            if (number != parseInt(number)) {
                // Round up 2 decimals (pricing issues whith regular rounding)
                return (Math.ceil(number * 100) / 100).toFixed(2);
            }
            return number;
        },
        round: function (number) {
            number = (parseFloat(number.toString().replace(/,/g, "")) || 0);
            return number.toFixed(0);
        },
        validPrice: function(price) {
            return Number(price) > 0 ? price : null;
        }
    }
}

var vmNavigationHelper = {
    computed: {
        forceReload: function() {
            return window.forceReloadOnUpdate;
        }    
    },
    methods: {
        navigateTo: function(target) {
            //force reload if target-url is same as current page
            if (this.forceReload ||
                SCSHelper.stringIsNullOrEmpty(target) ||
                window.location.pathname.indexOf(target) > -1 ||
                target === window.location.href) {
                window.location.reload(true); // skipCache=true i.e. force reload
            } else {
                window.location.href = target;
            }
        }
    }
};


var vmGACoupons = {
    filters: {
        gaRxPriceLP: function (action, label) {
            try {
                if (typeof ga !== 'undefined') {
                    if (typeof trackerName == 'undefined') {
                        trackerName = window.ga.getAll()[0].get('name');
                    }
                    ga(trackerName + '.send', 'event', 'Rx Price LP', action, label);
                }
            } catch (e) {
                Loggly.log({
                    'level': Loggly.LEVELS.ERROR,
                    metadata: {
                        'message': "Unable to load analytics on Price Coupon " + e
                    }
                });
            }
        },
    }
};
/**
 * Location store: 
 *  - loads on every page
 *  - needs to store queue of location objects
 *  - toggle the hidden state input
 *  - sync location w backend
 */

var LocationObject = (function () {
    var init = function(zipcode, city, state, lat, long, ipAddress) {
        return {
            zipcode: zipcode,
            city: city,
            state: state,
            lat: lat,
            long: long,
            ipAddress: ipAddress ? ipAddress : "0.0.0.0"
        };
    };
    return {
        init: init,
        serialize: function (locationObject) {
            return [
                locationObject.zipcode,
                locationObject.city,
                locationObject.state,
                locationObject.lat,
                locationObject.long,
                locationObject.ipAddress
            ].join(',');
        },
        deserialize: function (serializedInput) {
            var props = serializedInput.split(',');
            return init(props[0], props[1], props[2], props[3], props[4], props[5]);
        }
    };
})();

Vue.component('locationResult',
{
    template: '#locationItem',
    props: ["zipcode"],
    methods: {
        onClick: function () {
            vmLocation.moveUpStoredZipcode(this.zipcode);
        }
    }
});

var VmLocation = Vue.extend({
    mixins: [vmNavigationHelper],
    data: function() {
        return {
            zipcode: '',
            showLocations: false,
            invalid: false,
            reset: false,
            tryIp: false,
            locations: [],
            postProcessingHook: function() {},
            LOCATION_COOKIE: 'scLocationStore',
            module: {
                showForm: false,
                mainCopy: "Enter your location",
                target: '',
                isLoading: false,
                forceShowForm: false,
                forceSubmit: false,
            }
        };
    },
    created: function () {
        this.loadStoredLocations();
    },
    computed: {
        currentLocation: function() {
            return this.locations[0];
        },
        asLatLong: function () {
            return {
                lat: this.currentLocation.lat,
                long: this.currentLocation.long
            };
        },
        isEmpty: function() {
            return this.locations.length === 0;
        },
    },
    methods: {
        addLocation: function (location) {
            if (this.alreadyStored(location.zipcode) > -1) {
                return this.moveUpStoredZipcode(location.zipcode);
            }
            this.zipcode = location.zipcode;
            this.locations.unshift(location);
            this.locations.splice(5);
            this.storeLocation();
        },
        alreadyStored: function (zipcode) {
            for (var i = 0; i < this.locations.length; i++) {
                var location = this.locations[i];
                if (location.zipcode === zipcode) {
                    return i;
                }
            }
            return -1;
        },
        callLocationService: function (dataObj) {
            SCS.call(
                SCS.SERVICES.MemberService,
                'GetIPLocation',
                dataObj,
                this.processZipcodeResponse);
        },
        loadStoredLocations: function () {
            var cookie = SCSCookie.get(this.LOCATION_COOKIE);
            var locations = cookie.split('|')
                .map(function (loc) {
                    return LocationObject.deserialize(loc);
                });
            this.locations = locations;
        },
        moveUpStoredZipcode: function (zipcode) {
            var index = this.alreadyStored(zipcode);
            var newLocation = this.locations.splice(index, 1)[0];
            this.locations.unshift(newLocation);
            this.zipcode = this.currentLocation.zipcode;
            this.storeLocation();
        },
        navigateToPostalCode: function (postalCode) {
            params = SCSMiscHelper.getQueryParams(window.location.href);
            if (this.zipcode) {
                params["zipcode"] = this.zipcode;
            }
            var paramsString = SCSMiscHelper.createURLParams(params);
            window.location = "?" + paramsString;
        },
        onBlur: function () {
            this.showLocations = false;
            if (!this.validateZipcode(this.zipcode)) {
                this.zipcode = this.currentLocation.zipcode;
            } else if (this.zipcode !== this.currentLocation.zipcode) {
                this.reset = true;
                this.tryZipcode(this.zipcode, true);
            }
        },
        onChange: function () {
            if (this.validateZipcode(this.zipcode)) {
                this.tryZipcode(this.zipcode, true);
            }
        },
        onEnter: function () {
            if (!this.isEmpty) {
                this.onBlur();
                // TODO: move this to vue directives
                $('#locationbar').blur();
                $('#searchbar').focus();
            }
        },
        onFocus: function () {
            if (this.locations.length > 1) {
                this.showLocations = true;
            }
        },
        processZipcodeResponse: function (resp) {
            var self = window.vmLocation;
            if (resp.Success && resp.IPLocation !== null && resp.IPLocation.PostalCode !== null && resp.IPLocation.PostalCode.length > 0) {
                var lc = resp.IPLocation;
                var location = LocationObject.init(
                    lc.PostalCode,
                    lc.City,
                    lc.Region,
                    lc.Latitude,
                    lc.Longitude);
                self.invalid = false;
                self.addLocation(location);
            } else {
                self.invalid = true;
                vmLocation.module.isLoading = false;
                if (self.reset && !self.isEmpty) {
                    self.zipcode = self.currentLocation.zipcode;
                    self.reset = false;
                    self.invalid = false;
                }
            }
            self.postProcessingHook();
            if (self.tryIp) {
                self.invalid = false;
                self.tryIp = false;
            }
        },
        reloadPage: function () {
            if (this.zipcode && SCSMiscHelper.getParameterByName("zipcode")) {
                this.navigateToPostalCode(this.zipcode);
            } else {
                this.navigateTo(window.location.href);
            }
        },
        storeLocation: function () {
            var serializedLocations = this.locations
                .map(function (loc) {
                    return LocationObject.serialize(loc);
                })
                .splice(0, 5)
                .join('|');
            SCSCookie.set(this.LOCATION_COOKIE, serializedLocations);
        },
        tryZipcode: function (zipcode, shouldReload) {
            if (this.alreadyStored(zipcode) > -1) {
                this.invalid = false;
                this.moveUpStoredZipcode(zipcode);
                this.module.isLoading = false;
                if (shouldReload === true) {
                    this.postProcessingHook();
                }
            }
            else {
                this.callLocationService({ ZipCode: zipcode });
            }
        },
        validateZipcode: function (zipcode) {
            var isValidZip = SCSHelper.isValidZip(zipcode);
            this.invalid = !isValidZip;
            return isValidZip;
        }
    }
});

/**
* Mixin API to hook into vmLocation
*  - exposes properties to child via "computed"
*
*  TODO: remove showForm, mainCopy after new search
*/
var vmLocationApiMixin = {
    mixins: [vmNavigationHelper],
    created: function() {
        this.showForm = vmLocation.isEmpty;
    },
    computed: {
        zipcode: {
            get: function() {
                return vmLocation.zipcode;
            },
            set: function(val) {
                vmLocation.zipcode = val;
            }
        },
        showForm: {
            get: function() {
                return vmLocation.module.showForm || vmLocation.module.forceShowForm;
                
            },
            set: function(val) {
                vmLocation.module.showForm = val;
            }
        },
        hasLocation: function () {
            return !vmLocation.isEmpty;
        },
        mainCopy: function() {
            return vmLocation.module.mainCopy;
        },
        displayLocation: function () {
            var loc = vmLocation.currentLocation;
            return loc.city + ", " + loc.state;
        },
        locationInvalid: function () {
            return vmLocation.invalid;
        },
        locationIsLoading: {
            get: function() {
                return vmLocation.module.isLoading;
            },
            set: function(val) {
                vmLocation.module.isLoading = val;
            }
        }
    },
    methods: {
        onLocationSubmit: function () {
            this.locationIsLoading = true;
            if (!vmLocation.module.forceSubmit && this.zipcode === vmLocation.currentLocation.zipcode) {
                this.showForm = false;
                this.locationIsLoading = false;
            } else if (vmLocation.validateZipcode(this.zipcode)) {
                vmLocation.tryZipcode(this.zipcode, true);
            } else {
                this.locationIsLoading = false;
            }
        }
    }
};

var VmLocationModuleWrapper = Vue.extend({
    mixins: [vmLocationApiMixin],
    data: function () {
        return {};
    },
});

SCSMiscHelper.initVueObjects([
    {
        id: 'location',
        VueClass: VmLocation,
        name: 'vmLocation'
    },
    {
        id: 'locationModuleWrapper',
        VueClass: VmLocationModuleWrapper,
        name: 'vmLocationModuleWrapper'
    }
]);;
var QueryStore = (function() {
    var QUERY_COOKIE = "sc-query";

    var store = function(value, type) {
        var serialized = "value=" + value + "&type=" + type;
        SCSCookie.set(QUERY_COOKIE, serialized, 5);
    };

    return {
        store: store,
        load: function() {
            var storedQuery = SCSCookie.get(QUERY_COOKIE);
            var query = {
                value: '',
                type: '',
            };
            if (storedQuery !== undefined && storedQuery !== null) {
                var values = storedQuery.split('&')
                    .map(function(v) {
                        return v.split('=')[1];
                    });
                query.value = values[0];
                query.type = values[1];
            }
            return query;
        },
        storeQuery: function (serviceArea, query, rawName) {
            var value, type;
            if (/more_/.test(serviceArea)) {
                value = query;
                type = SCSCookie.PAGE_TYPES.ANY;
            } else {
                value = rawName;
                type = serviceArea;
            }
            try {
                // remove after new search is implemented
                window.vmSearch.query = value;
            } catch (e) {
                // error
            }
            QueryStore.store(value, type);
        }
    };
})();

var conditionPreLoader = function () {
    function loadDefaultConditionPreLoader() {
        var conditionDefaultArray = new Array;
        conditionDefaultArray.push(
            { "hit_type": "condition", "display_name": "Hypertension", "seo_name": "hypertension" },
            { "hit_type": "condition", "display_name": "Pain", "seo_name": "pain" },
            { "hit_type": "condition", "display_name": "Wound Care", "seo_name": "wound-care" },
            { "hit_type": "condition", "display_name": "HIV", "seo_name": "hiv" },
            { "hit_type": "condition", "display_name": "Nutritional Deficiency", "seo_name": "nutritional-deficiency" }
        );
        return conditionDefaultArray;
    }
    var conditionPreLoaderArray = new Array;

    $.ajax({
        async: false,
        url: '/top-conditions',
        dataType: "json",
        type: "GET",
        contentType: "application/json; charset=utf-8",
        success: function (data) {
            if (data.Result.length > 0) {
                for (var i = 0; i < 5; i++) {
                    conditionPreLoaderArray.push({
                        hit_type: "condition",
                        display_name: data.Result[i].ConditionName,
                        seo_name: data.Result[i].SEOName
                    });            
                }
            }
            else {
                conditionPreLoaderArray = loadDefaultConditionPreLoader();
            }
        },
        error: function () {
            conditionPreLoaderArray = loadDefaultConditionPreLoader();
        }
    });
    return conditionPreLoaderArray;
};

// Temporary values while we hook this up to a service
//These could eventually go into the searchViewModel OR a predefined AJAX calls in services.js
var popularSearchItems = {
    //condition: conditionPreLoader(),
    dental: [
        { "hit_type": "reason", "_id": "10191", "_score": 6.9224043, "id": 191, "display_name": "Cavity Filling", "seo_name": "cavity-filling", "is_synonym": 0, "is_active": 1, "is_deleted": 0, "create_date": null, "modified_date": "2017-02-16T18:20:11.537Z", "boost_factor": 0.0, "location": { "lat": 0.0, "lon": 0.0 } },
        { "hit_type": "reason", "_id": "10001", "_score": 5.7633457, "id": 1, "display_name": "Dental Exam, Adult", "seo_name": "dental-exam-adult", "is_synonym": 0, "is_active": 1, "is_deleted": 0, "create_date": null, "modified_date": "2017-03-13T14:55:39.247Z", "boost_factor": 0.0, "location": { "lat": 0.0, "lon": 0.0 } },
        { "hit_type": "reason", "_id": "10185", "_score": 6.342449, "id": 185, "display_name": "Dental Implant", "seo_name": "dental-implant", "is_synonym": 0, "is_active": 1, "is_deleted": 0, "create_date": "2016-08-04T17:46:05.737Z", "modified_date": "2016-08-04T17:46:05.737Z", "boost_factor": 0.0, "location": { "lat": 0.0, "lon": 0.0 } },
        { "hit_type": "reason", "_id": "10180", "_score": 8.037615, "id": 180, "display_name": "Dentures", "seo_name": "dentures", "is_synonym": 0, "is_active": 1, "is_deleted": 0, "create_date": null, "modified_date": "2017-02-21T23:10:08.510Z", "boost_factor": 0.0, "location": { "lat": 0.0, "lon": 0.0 } },
        { "hit_type": "reason", "_id": "10122", "_score": 6.359345, "id": 122, "display_name": "Teeth whitening", "seo_name": "teeth-whitening", "is_synonym": 0, "is_active": 1, "is_deleted": 0, "create_date": null, "modified_date": "2017-05-22T20:16:55.047Z", "boost_factor": 0.0, "location": { "lat": 0.0, "lon": 0.0 } }
    ],
    prescription: [
        { "hit_type": "prescription", "_id": "4.990603695E10", "_score": 8.054039, "id": "Zetia (ezetimibe)", "ndc": "49884022811", "display_name": "Zetia (ezetimibe)", "seo_name": "zetia", "is_active": 1, "is_deleted": 0, "boost_factor": 0.09935554008242449, "create_date": "2017-06-14T06:00:51.743Z", "modified_date": "2017-06-14T06:00:51.743Z", "location": { "lat": 0.0, "lon": 0.0 } },
        { "hit_type": "prescription", "_id": "5.0480060971E10", "_score": 10.67049, "id": "Xarelto", "ndc": "50458057930", "display_name": "Xarelto", "seo_name": "xarelto", "is_active": 1, "is_deleted": 0, "boost_factor": 0.17846813597274483, "create_date": "2017-06-14T06:00:51.743Z", "modified_date": "2017-06-14T06:00:51.743Z", "location": { "lat": 0.0, "lon": 0.0 } },
        { "hit_type": "prescription", "_id": "5.9439013727E10", "_score": 12.258181, "id": "Vyvanse", "ndc": "59417010710", "display_name": "Vyvanse", "seo_name": "vyvanse", "is_active": 1, "is_deleted": 0, "boost_factor": 0.5167452549398772, "create_date": "2017-06-14T06:00:51.743Z", "modified_date": "2017-06-14T06:00:51.743Z", "location": { "lat": 0.0, "lon": 0.0 } },
        { "hit_type": "prescription", "_id": "1.91409036E8", "_score": 10.017357, "id": "Victoza", "ndc": "00169406013", "display_name": "Victoza", "seo_name": "victoza", "is_active": 1, "is_deleted": 0, "boost_factor": 0.05707300471770154, "create_date": "2017-06-14T06:00:51.743Z", "modified_date": "2017-06-14T06:00:51.743Z", "location": { "lat": 0.0, "lon": 0.0 } },
        { "hit_type": "prescription", "_id": "9.1424181E7", "_score": 16.25632, "id": "Viagra", "ndc": "00069422030", "display_name": "Viagra", "seo_name": "viagra", "is_active": 1, "is_deleted": 0, "boost_factor": 1.2876006104270463, "create_date": "2017-06-14T06:00:51.743Z", "modified_date": "2017-06-14T06:00:51.743Z", "location": { "lat": 0.0, "lon": 0.0 } }
    ],
    reason: [
        { "hit_type": "reason", "_id": "10001", "_score": 5.7633457, "id": 1, "display_name": "Dental Exam, Adult", "seo_name": "dental-exam-adult", "is_synonym": 0, "is_active": 1, "is_deleted": 0, "create_date": null, "modified_date": "2017-03-13T14:55:39.247Z", "boost_factor": 0.0, "location": { "lat": 0.0, "lon": 0.0 } },
        { "hit_type": "reason", "_id": "10199", "_score": 6.7964697, "id": 199, "display_name": "Eye exam", "seo_name": "eye-exam", "is_synonym": 0, "is_active": 1, "is_deleted": 0, "create_date": null, "modified_date": "2017-03-17T19:26:27.987Z", "boost_factor": 0.0, "location": { "lat": 0.0, "lon": 0.0 } },
        { "hit_type": "reason", "_id": "10185", "_score": 6.342449, "id": 185, "display_name": "Dental Implant", "seo_name": "dental-implant", "is_synonym": 0, "is_active": 1, "is_deleted": 0, "create_date": "2016-08-04T17:46:05.737Z", "modified_date": "2016-08-04T17:46:05.737Z", "boost_factor": 0.0, "location": { "lat": 0.0, "lon": 0.0 } },
        { "hit_type": "reason", "_id": "10191", "_score": 6.9224043, "id": 191, "display_name": "Cavity Filling", "seo_name": "cavity-filling", "is_synonym": 0, "is_active": 1, "is_deleted": 0, "create_date": null, "modified_date": "2017-02-16T18:20:11.537Z", "boost_factor": 0.0, "location": { "lat": 0.0, "lon": 0.0 } },

    ],
    vision: [
        { "hit_type": "reason", "_id": "10199", "_score": 6.7964697, "id": 199, "display_name": "Eye exam", "seo_name": "eye-exam", "is_synonym": 0, "is_active": 1, "is_deleted": 0, "create_date": null, "modified_date": "2017-03-17T19:26:27.987Z", "boost_factor": 0.0, "location": { "lat": 0.0, "lon": 0.0 } },
        { "hit_type": "hardware", "_id": "10205", "_score": 6.023199, "id": 205, "display_name": "Eyeglasses", "seo_name": "eyeglasses", "is_synonym": 0, "is_active": 1, "is_deleted": 0, "create_date": null, "modified_date": "2017-02-16T16:28:20.737Z", "boost_factor": 0.0, "location": { "lat": 0.0, "lon": 0.0 } },
        { "hit_type": "reason", "_id": "10204", "_score": 6.637736, "id": 204, "display_name": "Contact lens fitting", "seo_name": "contact-lens-fitting", "is_synonym": 0, "is_active": 1, "is_deleted": 0, "create_date": null, "modified_date": "2017-02-16T16:23:59.770Z", "boost_factor": 0.0, "location": { "lat": 0.0, "lon": 0.0 } },
    ]
};

function addToRecentlyViewed(seoName, name, storeObj) {
    var storeObject = storeObj || new SCSHelper.LocalStorage(window.RecentlyViewedDrugsKey);
    if (storeObject.StorageExists()) {
        var val = storeObject.Get();
        var existsItemIndex = _.findIndex(val,
            function (e) { return e.SeoName === seoName && e.Name === name; });
        var maxLength = 6;
        if (existsItemIndex === -1) {
            if (val.length === maxLength) {
                val.shift();
            }
        } else {
            val.splice(existsItemIndex, 1);
        }
        val.push({ SeoName: seoName, Name: name });
        storeObject.Set(val);
    }
}

// New search
var webapi = (!window.SearchSettings) ? {} :  {
    base: window.AppSettings.WebAPIUrlBase,
    indexes: window.SearchSettings.indexes,
    popular: (popularSearchItems[window.SearchSettings.popular]),
    query: window.AppSettings.WebAPIUrlElasticSearch + window.AppSettings.WebAPIUrlElasticSearchQueryOrdered,
    topDrugs: window.SearchSettings.topDrugs,
    showZipcode: window.SearchSettings.showZipcode,
    serviceAreas: window.SearchSettings.serviceAreas 
};

var vmSearchBar = !document.getElementById('vm-search') ? {} : new Vue({
    el: "#vm-search",
    mixins: [vmLocationApiMixin],
    computed: {
        forceReload: function ()  {
            return false;
        },
        searchOpen: function () {
            return (this.searchFocus || this.searchHover);
        },
        zipOpen: function () {
            return (this.zipFocus || this.zipHover);
        },
        lastZip: function () {
            try {
                return this.locations[0].zipcode || 0;
            } catch(e){}
            return  0;
        },
        queryMatchesSpecialty: function () {
            if (this.params.Indexes != "prescriptions") {
                return !_.isEmpty(this.itemSpecialty);
            }
        }
    },
    data: {
        items: [],
        itemSpecialty: {},
        locations: [],
        loading: false,
        desktopShow: "",
        mobileShow: "",
        params: {
            "Indexes": "",
            "Lat": 0,
            "Lon": 0,
            "MaxResults": 5,
            "Query": "",
            "TenantId": 0
        },
        results: {},
        searchFocus: false,
        searchHover: false,
        searchOptions: {
            POPULAR: 1,
            SUGGESTIONS: 2,
            NO_RESULTS: 3,
            status: 0
        },
        searchIndex: 0,
        showZipcode: true,
        specialties: [],
        storeObject: {},
        validZip: true,
        zipFocus: false,
        zipHover: false,
        zipIndex: 0,
        zipValue: "",
        ignoreKeys: ["ArrowUp","ArrowDown","ArrowRight","ArrowLeft","Enter"] // enter & arrows
    },
    mounted: function () {
        this.locations = vmLocation.locations;
        this.params.Indexes = webapi.indexes;
        this.params.TenantId = window.tenantId;
        this.zipValue = vmLocation.currentLocation.city + ", " + vmLocation.currentLocation.state;
        this.showZipcode = (webapi.showZipcode != undefined )? webapi.showZipcode : true;

        // Avoid redirects after submit
        this.forceReload = false;

        // Set popular items
        this.searchOptions.status = this.searchOptions.POPULAR;
        this.mobileShow = false;

        // Override this method to have more control on the postprocessing hook (added a loading state)
        vmLocation.postProcessingHook = this.locationPostProcessingHook;

        // Get query from url
        // This won't update the results
        // When clicking a link: params.Query should be set with the display_name value
        this.setQueryFromUrl();

        // Load specialties
        this.loadSpecialties();
    },
    methods: {
        clearSearchTerm: function () {
            this.params.Query = "";
            Vue.nextTick(function () {
                document.getElementById("searchbar").focus();
            });
        },
        setQueryFromUrl: function () {
            var query = SCSMiscHelper.getParameterByName("q");
            this.params.Query = query ? query : "";
        },
        getMatchingResults: function () {
            if (!this.params.Query) return;
            this.params.Lat = vmLocation.asLatLong.lat;
            this.params.Lon = vmLocation.asLatLong.long;
            $.ajax({
                url: webapi.base + webapi.query,
                type: "POST",
                dataType: "json",
                crossDomain: true,
                data: $.param(this.params)
            })
            .done(function (data) {
                // Get the results of the data object following the webapi.arrayPath
                vmSearchBar.items = data;
                vmSearchBar.itemSpecialty = vmSearchBar.specialties[vmSearchBar.getMatchedSpecialty(vmSearchBar.params.Query)] || {};
                var hasSpecialty = _.size(vmSearchBar.itemSpecialty) > 0;
                vmSearchBar.searchOptions.status = (vmSearchBar.items.length > 0 || hasSpecialty) ?
                    vmSearchBar.searchOptions.SUGGESTIONS :
                    vmSearchBar.searchOptions.NO_RESULTS;
                
            })
            .fail(function (e) {
                // error
            });
        },
        getUrl: function (type, seoname, postal, id, query) {
            return SearchResultApi.getUrl(type, seoname, postal, id, query);
        },
        highlight: function (value, query) {
            return _.replace(value, query, '<strong>' + query + '</strong>');
        },
        loadSpecialties: function () {
            for (i in webapi.serviceAreas) {
                this.specialties = this.specialties.concat(webapi.serviceAreas[i].BroadSpecialties || []);
            }
        },
        // Override this method to have more control on the postprocessing hook (added a loading state)
        locationPostProcessingHook: function () {
            if (vmLocation.invalid) {
                vmSearchBar.loading = true;
                vmLocation.addLocation(vmLocation.currentLocation);
                vmSearchBar.loading = false;
            } else {
                vmLocation.reloadPage();
            }
        },
        updateQueryStringParameter: function (uri, key, value) {
            var re = new RegExp("([?&])" + key + "=.*?(&|$)", "i");
            var separator = uri.indexOf('?') !== -1 ? "&" : "?";
            if (uri.match(re)) {
                return uri.replace(re, '$1' + key + "=" + value + '$2');
            }
            else {
                return uri + separator + key + "=" + value;
            }
        },
        mobileOpen: function () {
            this.mobileShow = true;
        },
        mobileClose: function () {
            this.mobileShow = false;
        },        
        onKeyupSearch: function (e) {
            if (this.ignoreKeys.indexOf(e.key) > -1) return;
            this.getMatchingResults();
        },       
        onKeyupZip: function (e) {
            if (this.ignoreKeys.indexOf(e.key) > -1) return;
            if (this.zipValue.length > 4) {
                this.validateZip();
            } else {
                this.validZip = true;
                e.preventDefault();
            }
        },
        onChangeZip: function () {
            this.validateZip();
        },
        redirectTo: function (item) {
            var query = this.params.Query;
            vmSearchBar.searchHover = false;
            vmSearchBar.searchFocus = false;
            QueryStore.storeQuery(item.hit_type, item.seo_name, item.id);
            if (item.hit_type === "prescription") {
                this.saveToRecentlyViewedDrugs({ SeoName: item.seo_name, Name: item.display_name.split("(")[0].trim() });
            }
            window.location.href = this.getUrl(item.hit_type, item.seo_name, this.zipcode, item.id, encodeURI(item.display_name));
            this.params.Query = item.display_name;
            this.loading = true;
        },
        saveToRecentlyViewedDrugs: function (item) {
            if (Object.keys(this.storeObject).length === 0) {
                this.storeObject = new SCSHelper.LocalStorage(window.RecentlyViewedDrugsKey);
            }
            addToRecentlyViewed(item.SeoName, item.Name, this.storeObject);
        },
        redirectToSpecialty: function () {
            vmSearchBar.searchHover = false;
            vmSearchBar.searchFocus = false;
            window.location.href = "/detail-search/specialties/" + vmLocation.currentLocation.zipcode + "/" + this.itemSpecialty.BroadSpecialtyId + "/?q=" + this.params.Query;
            this.loading = true;
        },
        validateZip: function () {
            if (this.zipValue == this.lastZip) return;
            if (SCSHelper.isValidZip(this.zipValue)) {
                const elem = this.$refs.zipinput;
                elem.blur();
                this.zipcode = this.zipValue;
                this.validZip = true;
                this.onLocationSubmit();
            } else {
                this.validZip = false;
            }
        },
        submit: function (evt) {
            evt.preventDefault();
            evt.stopPropagation();
            if (this.zipFocus === true) {
                this.$refs.zipinput.blur();
                this.validateZip();
                return;
            }
            this.redirectTo(this.items[this.searchIndex]);
        },
        getMatchedSpecialty: function (query) {
            return _.findIndex(vmSearchBar.specialties, function (item, index) {
                if ((!item) || (_.trim(item)=="")) return false;
                var q = query.toLowerCase().trim();
                var singularName = item.Name.toLowerCase();
                var pluralName = item.PluralName.toLowerCase();
                return (q==singularName || q==pluralName);
            });
        },
        open: function () {
            this.searchFocus = true;
            var mq = window.matchMedia("(min-width: 768px)");
            if (mq.matches) {
                this.desktopShow = true;
                this.mobileShow = false;
            }
            else {
                this.desktopShow = false;
                this.mobileShow = true;
            }
        }
    },
    filters: {
        lowercase: function (value) {
            return (value) ? value.toLowerCase(): value;
        }
    },
    watch: {
        'params.Query': function (value) {
            if (!value) {
                this.searchOptions.status = this.searchOptions.POPULAR;
            }
            this.searchIndex = 0;
        },
        'searchOptions.status': function (value) {
            if (value === this.searchOptions.POPULAR) {
                vmSearchBar.items = [];
                if (window.SearchSettings.popular === "dental" || window.SearchSettings.popular === "vision" || window.SearchSettings.popular === "condition") {
                    vmSearchBar.items = webapi.popular;
                } else {
                    vmSearchBar.items = webapi.topDrugs.Value.map(function(obj) {
                        var rObj = {
                            "ndc": obj.NDC, "display_name": obj.DisplayName, "seo_name": obj.SEOName,
                            "hit_type": "prescription",
                            "_id": "-1",
                            "_score": 0,
                            "id": "",
                            "is_active": 1, "is_deleted": 0,
                            "boost_factor": 0,
                            "create_date": "2017-06-14T06:00:51.743Z",
                            "modified_date": "2017-06-14T06:00:51.743Z",
                           "location": { "lat": 0.0, "lon": 0.0 }
                        };
                        return rObj;
                    });
                }
            }
            this.searchIndex = 0;
        },
        locationInvalid: function (value) {
            if (value) {
                this.validZip = false;
            }
        },
        mobileShow: function (value) {
            $('body').toggleClass("mobile-search-open", value).toggleClass("mobile-search-close", !value);
            if (value) {
                Vue.nextTick(function () {
                    document.getElementById("searchbar").focus();
                });
            }
        },
        desktopShow: function (value) {
            if (value) {
                this.searchFocus = true;
                Vue.nextTick(function () {
                    document.getElementById("searchbar").focus();
                });
            }
            else {
                this.searchFocus = false;
                Vue.nextTick(function () {
                    document.getElementById("searchbar").blur();
                });
            }
        },
        searchIndex: function (value) {
            if (value < 1) {
                this.searchIndex = 0;
                return;
            }
            if (value >= this.items.length) {
                this.searchIndex = this.items.length - 1;
            }
        },
        zipOpen: function (value) {
            if (value) {
                this.searchFocus = false;
                this.searchHover = false;
                this.zipValue = this.zipcode = vmLocation.currentLocation.zipcode;
                this.validZip = true;
            } else {
                if (this.zipValue == vmLocation.currentLocation.zipcode) {
                    this.zipValue = this.displayLocation;
                }
            }
        }
    }
});

var vmRecentlyViewedSection = !document.getElementById('viewed-rx--section')
    ? {}
    : new Vue({
        el: "#viewed-rx--section",
        data: {
            storeObject: {},
            items: []
        },
        mounted: function() {
            this.initRecentlyViewed();
        },
        updated: function () {
            if (this.items.length > 0 && window.getComputedStyle(this.$el).getPropertyValue("display") === "block") {
                this.trackGa("Recently Viewed Drug", "pageview");
            }
            
        },
        methods: {
            initRecentlyViewed: function() {
                if (typeof window.RecentlyViewedDrugsKey != "undefined") {
                    this.storeObject = new SCSHelper.LocalStorage(window.RecentlyViewedDrugsKey);
                    if (this.storeObject.StorageExists()) {
                        this.getRecentlyViewed();
                        if (this.items.length > 0) {
                            $(".home-masthead, .masthead").addClass("show-recent");
                        }
                    }
                }
            },
            getRecentlyViewed: function() {
                this.items = this.storeObject.Get().reverse();
            },
            removeRecentlyViewed: function(index) {
                if (this.items.length > 1) {
                    this.items.splice(index, 1);
                    this.storeObject.Set(this.items.slice().reverse());
                } else {
                    this.clearAll();
                }
            },
            trackGa: function (val, trackType) {
                try {
                    if (typeof window.ga !== 'undefined') {
                        if (typeof trackerName == 'undefined') {
                            trackerName = window.ga.getAll()[0].get('name');
                        }

                        var trackObject = {};
                        if (trackType === "event") {
                            trackObject = {
                                eventCategory: 'Recently Viewed',
                                eventAction: 'click',
                                eventLabel: 'recently viewed click : ' + val,
                                transport: 'beacon'
                            };
                        }
                        else if (trackType === "pageview") {
                            trackObject = {
                                'page_title': val,
                                'page_path': window.location.pathname
                            };
                        }

                        if (_.isEmpty(trackObject))
                            ga(trackerName + '.send', trackType, trackObject);
                       
                    }
                    
                }
                catch (e) {
                    Loggly.log({
                        'level': Loggly.LEVELS.ERROR,
                        metadata: {
                            'message': "Unable to track Recently Viewed Drug " + e
                        }
                    });
                }
            },
            goToRecentlyViewedDrug: function(seoName, event) {
                this.trackGa(seoName, "event");
                window.location.href = '/prescription/' + seoName;
            },
            clearAll: function () {
                this.trackGa("ClearAll", "event");
                this.items = [];
                this.storeObject.Remove();
                $(".home-masthead, .masthead").removeClass("show-recent");
            }
    }
    });;
// paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/
window.log = function f(){ log.history = log.history || []; log.history.push(arguments); if(this.console) { var args = arguments, newarr; args.callee = args.callee.caller; newarr = [].slice.call(args); if (typeof console.log === 'object') log.apply.call(console.log, console, newarr); else console.log.apply(console, newarr);}};

// make it safe to use console.log always
(function(a){function b(){}for(var c="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),d;!!(d=c.pop());){a[d]=a[d]||b;}})
(function(){try{console.log();return window.console;}catch(a){return (window.console={});}}());


// place any jQuery/helper plugins in here, instead of separate, slower script files.


/*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas. Dual MIT/BSD license */
/*! NOTE: If you're already including a window.matchMedia polyfill via Modernizr or otherwise, you don't need this part */
window.matchMedia=window.matchMedia||function(a){"use strict";var c,d=a.documentElement,e=d.firstElementChild||d.firstChild,f=a.createElement("body"),g=a.createElement("div");return g.id="mq-test-1",g.style.cssText="position:absolute;top:-100em",f.style.background="none",f.appendChild(g),function(a){return g.innerHTML='&shy;<style media="'+a+'"> #mq-test-1 { width: 42px; }</style>',d.insertBefore(f,e),c=42===g.offsetWidth,d.removeChild(f),{matches:c,media:a}}}(document);


/* Modernizr 2.6.2 (Custom Build) | MIT & BSD
 * Build: http://modernizr.com/download/#-fontface-backgroundsize-borderimage-borderradius-boxshadow-flexbox-hsla-multiplebgs-opacity-rgba-textshadow-cssanimations-csscolumns-generatedcontent-cssgradients-cssreflections-csstransforms-csstransforms3d-csstransitions-applicationcache-canvas-canvastext-draganddrop-hashchange-history-audio-video-indexeddb-input-inputtypes-localstorage-postmessage-sessionstorage-websockets-websqldatabase-webworkers-geolocation-inlinesvg-smil-svg-svgclippaths-touch-webgl-shiv-mq-cssclasses-addtest-prefixed-teststyles-testprop-testallprops-hasevent-prefixes-domprefixes-load
 */
;window.Modernizr=function(a,b,c){function D(a){j.cssText=a}function E(a,b){return D(n.join(a+";")+(b||""))}function F(a,b){return typeof a===b}function G(a,b){return!!~(""+a).indexOf(b)}function H(a,b){for(var d in a){var e=a[d];if(!G(e,"-")&&j[e]!==c)return b=="pfx"?e:!0}return!1}function I(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:F(f,"function")?f.bind(d||b):f}return!1}function J(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+p.join(d+" ")+d).split(" ");return F(b,"string")||F(b,"undefined")?H(e,b):(e=(a+" "+q.join(d+" ")+d).split(" "),I(e,b,c))}function K(){e.input=function(c){for(var d=0,e=c.length;d<e;d++)u[c[d]]=c[d]in k;return u.list&&(u.list=!!b.createElement("datalist")&&!!a.HTMLDataListElement),u}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),e.inputtypes=function(a){for(var d=0,e,f,h,i=a.length;d<i;d++)k.setAttribute("type",f=a[d]),e=k.type!=="text",e&&(k.value=l,k.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(f)&&k.style.WebkitAppearance!==c?(g.appendChild(k),h=b.defaultView,e=h.getComputedStyle&&h.getComputedStyle(k,null).WebkitAppearance!=="textfield"&&k.offsetHeight!==0,g.removeChild(k)):/^(search|tel)$/.test(f)||(/^(url|email)$/.test(f)?e=k.checkValidity&&k.checkValidity()===!1:e=k.value!=l)),t[a[d]]=!!e;return t}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var d="2.6.2",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k=b.createElement("input"),l=":)",m={}.toString,n=" -webkit- -moz- -o- -ms- ".split(" "),o="Webkit Moz O ms",p=o.split(" "),q=o.toLowerCase().split(" "),r={svg:"http://www.w3.org/2000/svg"},s={},t={},u={},v=[],w=v.slice,x,y=function(a,c,d,e){var f,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),l.appendChild(j);return f=["&#173;",'<style id="s',h,'">',a,"</style>"].join(""),l.id=h,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=g.style.overflow,g.style.overflow="hidden",g.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),g.style.overflow=k),!!i},z=function(b){var c=a.matchMedia||a.msMatchMedia;if(c)return c(b).matches;var d;return y("@media "+b+" { #"+h+" { position: absolute; } }",function(b){d=(a.getComputedStyle?getComputedStyle(b,null):b.currentStyle)["position"]=="absolute"}),d},A=function(){function d(d,e){e=e||b.createElement(a[d]||"div"),d="on"+d;var f=d in e;return f||(e.setAttribute||(e=b.createElement("div")),e.setAttribute&&e.removeAttribute&&(e.setAttribute(d,""),f=F(e[d],"function"),F(e[d],"undefined")||(e[d]=c),e.removeAttribute(d))),e=null,f}var a={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return d}(),B={}.hasOwnProperty,C;!F(B,"undefined")&&!F(B.call,"undefined")?C=function(a,b){return B.call(a,b)}:C=function(a,b){return b in a&&F(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=w.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(w.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(w.call(arguments)))};return e}),s.flexbox=function(){return J("flexWrap")},s.canvas=function(){var a=b.createElement("canvas");return!!a.getContext&&!!a.getContext("2d")},s.canvastext=function(){return!!e.canvas&&!!F(b.createElement("canvas").getContext("2d").fillText,"function")},s.webgl=function(){return!!a.WebGLRenderingContext},s.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:y(["@media (",n.join("touch-enabled),("),h,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=a.offsetTop===9}),c},s.geolocation=function(){return"geolocation"in navigator},s.postmessage=function(){return!!a.postMessage},s.websqldatabase=function(){return!!a.openDatabase},s.indexedDB=function(){return!!J("indexedDB",a)},s.hashchange=function(){return A("hashchange",a)&&(b.documentMode===c||b.documentMode>7)},s.history=function(){return!!a.history&&!!history.pushState},s.draganddrop=function(){var a=b.createElement("div");return"draggable"in a||"ondragstart"in a&&"ondrop"in a},s.websockets=function(){return"WebSocket"in a||"MozWebSocket"in a},s.rgba=function(){return D("background-color:rgba(150,255,150,.5)"),G(j.backgroundColor,"rgba")},s.hsla=function(){return D("background-color:hsla(120,40%,100%,.5)"),G(j.backgroundColor,"rgba")||G(j.backgroundColor,"hsla")},s.multiplebgs=function(){return D("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(j.background)},s.backgroundsize=function(){return J("backgroundSize")},s.borderimage=function(){return J("borderImage")},s.borderradius=function(){return J("borderRadius")},s.boxshadow=function(){return J("boxShadow")},s.textshadow=function(){return b.createElement("div").style.textShadow===""},s.opacity=function(){return E("opacity:.55"),/^0.55$/.test(j.opacity)},s.cssanimations=function(){return J("animationName")},s.csscolumns=function(){return J("columnCount")},s.cssgradients=function(){var a="background-image:",b="gradient(linear,left top,right bottom,from(#9f9),to(white));",c="linear-gradient(left top,#9f9, white);";return D((a+"-webkit- ".split(" ").join(b+a)+n.join(c+a)).slice(0,-a.length)),G(j.backgroundImage,"gradient")},s.cssreflections=function(){return J("boxReflect")},s.csstransforms=function(){return!!J("transform")},s.csstransforms3d=function(){var a=!!J("perspective");return a&&"webkitPerspective"in g.style&&y("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b,c){a=b.offsetLeft===9&&b.offsetHeight===3}),a},s.csstransitions=function(){return J("transition")},s.fontface=function(){var a;return y('@font-face {font-family:"font";src:url("https://")}',function(c,d){var e=b.getElementById("smodernizr"),f=e.sheet||e.styleSheet,g=f?f.cssRules&&f.cssRules[0]?f.cssRules[0].cssText:f.cssText||"":"";a=/src/i.test(g)&&g.indexOf(d.split(" ")[0])===0}),a},s.generatedcontent=function(){var a;return y(["#",h,"{font:0/0 a}#",h,':after{content:"',l,'";visibility:hidden;font:3px/1 a}'].join(""),function(b){a=b.offsetHeight>=3}),a},s.video=function(){var a=b.createElement("video"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),c.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),c.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}catch(d){}return c},s.audio=function(){var a=b.createElement("audio"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),c.mp3=a.canPlayType("audio/mpeg;").replace(/^no$/,""),c.wav=a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),c.m4a=(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,"")}catch(d){}return c},s.localstorage=function(){try{return localStorage.setItem(h,h),localStorage.removeItem(h),!0}catch(a){return!1}},s.sessionstorage=function(){try{return sessionStorage.setItem(h,h),sessionStorage.removeItem(h),!0}catch(a){return!1}},s.webworkers=function(){return!!a.Worker},s.applicationcache=function(){return!!a.applicationCache},s.svg=function(){return!!b.createElementNS&&!!b.createElementNS(r.svg,"svg").createSVGRect},s.inlinesvg=function(){var a=b.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==r.svg},s.smil=function(){return!!b.createElementNS&&/SVGAnimate/.test(m.call(b.createElementNS(r.svg,"animate")))},s.svgclippaths=function(){return!!b.createElementNS&&/SVGClipPath/.test(m.call(b.createElementNS(r.svg,"clipPath")))};for(var L in s)C(s,L)&&(x=L.toLowerCase(),e[x]=s[L](),v.push((e[x]?"":"no-")+x));return e.input||K(),e.addTest=function(a,b){if(typeof a=="object")for(var d in a)C(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,typeof f!="undefined"&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b}return e},D(""),i=k=null,function(a,b){function k(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function l(){var a=r.elements;return typeof a=="string"?a.split(" "):a}function m(a){var b=i[a[g]];return b||(b={},h++,a[g]=h,i[h]=b),b}function n(a,c,f){c||(c=b);if(j)return c.createElement(a);f||(f=m(c));var g;return f.cache[a]?g=f.cache[a].cloneNode():e.test(a)?g=(f.cache[a]=f.createElem(a)).cloneNode():g=f.createElem(a),g.canHaveChildren&&!d.test(a)?f.frag.appendChild(g):g}function o(a,c){a||(a=b);if(j)return a.createDocumentFragment();c=c||m(a);var d=c.frag.cloneNode(),e=0,f=l(),g=f.length;for(;e<g;e++)d.createElement(f[e]);return d}function p(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return r.shivMethods?n(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+l().join().replace(/\w+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(r,b.frag)}function q(a){a||(a=b);var c=m(a);return r.shivCSS&&!f&&!c.hasCSS&&(c.hasCSS=!!k(a,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),j||p(a,c),a}var c=a.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,e=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,f,g="_html5shiv",h=0,i={},j;(function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",f="hidden"in a,j=a.childNodes.length==1||function(){b.createElement("a");var a=b.createDocumentFragment();return typeof a.cloneNode=="undefined"||typeof a.createDocumentFragment=="undefined"||typeof a.createElement=="undefined"}()}catch(c){f=!0,j=!0}})();var r={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:c.shivCSS!==!1,supportsUnknownElements:j,shivMethods:c.shivMethods!==!1,type:"default",shivDocument:q,createElement:n,createDocumentFragment:o};a.html5=r,q(b)}(this,b),e._version=d,e._prefixes=n,e._domPrefixes=q,e._cssomPrefixes=p,e.mq=z,e.hasEvent=A,e.testProp=function(a){return H([a])},e.testAllProps=J,e.testStyles=y,e.prefixed=function(a,b,c){return b?J(a,b,c):J(a,"pfx")},g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+v.join(" "):""),e}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==o.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=p.shift();q=1,a?a.t?m(function(){("c"==a.t?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l=b.createElement(a),o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};1===y[c]&&(r=1,y[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),"img"!=a&&(r||2===y[c]?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i("c"==b?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),1==p.length&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&"[object Opera]"==o.call(a.opera),l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return"[object Array]"==o.call(a)},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},A,B;B=function(a){function b(a){var a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(y[i.url]?i.noexec=!0:y[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),y[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(w(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):w(j)?B(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement("script"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement("link"),j,c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};


/*! Respond.js v1.3.0: min/max-width media query polyfill. (c) Scott Jehl. MIT/GPLv2 Lic. j.mp/respondjs  */
(function(a){"use strict";function x(){u(!0)}var b={};if(a.respond=b,b.update=function(){},b.mediaQueriesSupported=a.matchMedia&&a.matchMedia("only all").matches,!b.mediaQueriesSupported){var q,r,t,c=a.document,d=c.documentElement,e=[],f=[],g=[],h={},i=30,j=c.getElementsByTagName("head")[0]||d,k=c.getElementsByTagName("base")[0],l=j.getElementsByTagName("link"),m=[],n=function(){for(var b=0;l.length>b;b++){var c=l[b],d=c.href,e=c.media,f=c.rel&&"stylesheet"===c.rel.toLowerCase();d&&f&&!h[d]&&(c.styleSheet&&c.styleSheet.rawCssText?(p(c.styleSheet.rawCssText,d,e),h[d]=!0):(!/^([a-zA-Z:]*\/\/)/.test(d)&&!k||d.replace(RegExp.$1,"").split("/")[0]===a.location.host)&&m.push({href:d,media:e}))}o()},o=function(){if(m.length){var b=m.shift();v(b.href,function(c){p(c,b.href,b.media),h[b.href]=!0,a.setTimeout(function(){o()},0)})}},p=function(a,b,c){var d=a.match(/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi),g=d&&d.length||0;b=b.substring(0,b.lastIndexOf("/"));var h=function(a){return a.replace(/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,"$1"+b+"$2$3")},i=!g&&c;b.length&&(b+="/"),i&&(g=1);for(var j=0;g>j;j++){var k,l,m,n;i?(k=c,f.push(h(a))):(k=d[j].match(/@media *([^\{]+)\{([\S\s]+?)$/)&&RegExp.$1,f.push(RegExp.$2&&h(RegExp.$2))),m=k.split(","),n=m.length;for(var o=0;n>o;o++)l=m[o],e.push({media:l.split("(")[0].match(/(only\s+)?([a-zA-Z]+)\s?/)&&RegExp.$2||"all",rules:f.length-1,hasquery:l.indexOf("(")>-1,minw:l.match(/\(\s*min\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:l.match(/\(\s*max\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||"")})}u()},s=function(){var a,b=c.createElement("div"),e=c.body,f=!1;return b.style.cssText="position:absolute;font-size:1em;width:1em",e||(e=f=c.createElement("body"),e.style.background="none"),e.appendChild(b),d.insertBefore(e,d.firstChild),a=b.offsetWidth,f?d.removeChild(e):e.removeChild(b),a=t=parseFloat(a)},u=function(b){var h="clientWidth",k=d[h],m="CSS1Compat"===c.compatMode&&k||c.body[h]||k,n={},o=l[l.length-1],p=(new Date).getTime();if(b&&q&&i>p-q)return a.clearTimeout(r),r=a.setTimeout(u,i),void 0;q=p;for(var v in e)if(e.hasOwnProperty(v)){var w=e[v],x=w.minw,y=w.maxw,z=null===x,A=null===y,B="em";x&&(x=parseFloat(x)*(x.indexOf(B)>-1?t||s():1)),y&&(y=parseFloat(y)*(y.indexOf(B)>-1?t||s():1)),w.hasquery&&(z&&A||!(z||m>=x)||!(A||y>=m))||(n[w.media]||(n[w.media]=[]),n[w.media].push(f[w.rules]))}for(var C in g)g.hasOwnProperty(C)&&g[C]&&g[C].parentNode===j&&j.removeChild(g[C]);for(var D in n)if(n.hasOwnProperty(D)){var E=c.createElement("style"),F=n[D].join("\n");E.type="text/css",E.media=D,j.insertBefore(E,o.nextSibling),E.styleSheet?E.styleSheet.cssText=F:E.appendChild(c.createTextNode(F)),g.push(E)}},v=function(a,b){var c=w();c&&(c.open("GET",a,!0),c.onreadystatechange=function(){4!==c.readyState||200!==c.status&&304!==c.status||b(c.responseText)},4!==c.readyState&&c.send(null))},w=function(){var b=!1;try{b=new a.XMLHttpRequest}catch(c){b=new a.ActiveXObject("Microsoft.XMLHTTP")}return function(){return b}}();n(),b.update=n,a.addEventListener?a.addEventListener("resize",x,!1):a.attachEvent&&a.attachEvent("onresize",x)}})(this);


/*! http://mths.be/placeholder v2.0.7 by @mathias */
;(function(window, document, $) {

	var isInputSupported = 'placeholder' in document.createElement('input');
	var isTextareaSupported = 'placeholder' in document.createElement('textarea');
	var prototype = $.fn;
	var valHooks = $.valHooks;
	var propHooks = $.propHooks;
	var hooks;
	var placeholder;

	if (isInputSupported && isTextareaSupported) {

		placeholder = prototype.placeholder = function() {
			return this;
		};

		placeholder.input = placeholder.textarea = true;

	} else {

		placeholder = prototype.placeholder = function() {
			var $this = this;
			$this
				.filter((isInputSupported ? 'textarea' : ':input') + '[placeholder]')
				.not('.placeholder')
				.bind({
					'focus.placeholder': clearPlaceholder,
					'blur.placeholder': setPlaceholder
				})
				.data('placeholder-enabled', true)
				.trigger('blur.placeholder');
			return $this;
		};

		placeholder.input = isInputSupported;
		placeholder.textarea = isTextareaSupported;

		hooks = {
			'get': function(element) {
				var $element = $(element);

				var $passwordInput = $element.data('placeholder-password');
				if ($passwordInput) {
					return $passwordInput[0].value;
				}

				return $element.data('placeholder-enabled') && $element.hasClass('placeholder') ? '' : element.value;
			},
			'set': function(element, value) {
				var $element = $(element);

				var $passwordInput = $element.data('placeholder-password');
				if ($passwordInput) {
					return $passwordInput[0].value = value;
				}

				if (!$element.data('placeholder-enabled')) {
					return element.value = value;
				}
				if (value == '') {
					element.value = value;
					// Issue #56: Setting the placeholder causes problems if the element continues to have focus.
					if (element != document.activeElement) {
						// We can't use `triggerHandler` here because of dummy text/password inputs :(
						setPlaceholder.call(element);
					}
				} else if ($element.hasClass('placeholder')) {
					clearPlaceholder.call(element, true, value) || (element.value = value);
				} else {
					element.value = value;
				}
				// `set` can not return `undefined`; see http://jsapi.info/jquery/1.7.1/val#L2363
				return $element;
			}
		};

		if (!isInputSupported) {
			valHooks.input = hooks;
			propHooks.value = hooks;
		}
		if (!isTextareaSupported) {
			valHooks.textarea = hooks;
			propHooks.value = hooks;
		}

		$(function() {
			// Look for forms
			$(document).delegate('form', 'submit.placeholder', function() {
				// Clear the placeholder values so they don't get submitted
				var $inputs = $('.placeholder', this).each(clearPlaceholder);
				setTimeout(function() {
					$inputs.each(setPlaceholder);
				}, 10);
			});
		});

		// Clear placeholder values upon page reload
		$(window).bind('beforeunload.placeholder', function() {
			$('.placeholder').each(function() {
				this.value = '';
			});
		});

	}

	function args(elem) {
		// Return an object of element attributes
		var newAttrs = {};
		var rinlinejQuery = /^jQuery\d+$/;
		$.each(elem.attributes, function(i, attr) {
			if (attr.specified && !rinlinejQuery.test(attr.name)) {
				newAttrs[attr.name] = attr.value;
			}
		});
		return newAttrs;
	}

	function clearPlaceholder(event, value) {
		var input = this;
		var $input = $(input);
		if (input.value == $input.attr('placeholder') && $input.hasClass('placeholder')) {
			if ($input.data('placeholder-password')) {
				$input = $input.hide().next().show().attr('id', $input.removeAttr('id').data('placeholder-id'));
				// If `clearPlaceholder` was called from `$.valHooks.input.set`
				if (event === true) {
					return $input[0].value = value;
				}
				$input.focus();
			} else {
				input.value = '';
				$input.removeClass('placeholder');
				input == document.activeElement && input.select();
			}
		}
	}

	function setPlaceholder() {
		var $replacement;
		var input = this;
		var $input = $(input);
		var id = this.id;
		if (input.value == '') {
			if (input.type == 'password') {
				if (!$input.data('placeholder-textinput')) {
					try {
						$replacement = $input.clone().attr({ 'type': 'text' });
					} catch(e) {
						$replacement = $('<input>').attr($.extend(args(this), { 'type': 'text' }));
					}
					$replacement
						.removeAttr('name')
						.data({
							'placeholder-password': $input,
							'placeholder-id': id
						})
						.bind('focus.placeholder', clearPlaceholder);
					$input
						.data({
							'placeholder-textinput': $replacement,
							'placeholder-id': id
						})
						.before($replacement);
				}
				$input = $input.removeAttr('id').hide().prev().attr('id', id).show();
				// Note: `$input[0] != input` now!
			}
			$input.addClass('placeholder');
			$input[0].value = $input.attr('placeholder');
		} else {
			$input.removeClass('placeholder');
		}
	}

}(this, document, jQuery));

/**
 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
 *
 * @version 1.0.1
 * @codingstandard ftlabs-jsv2
 * @copyright The Financial Times Limited [All Rights Reserved]
 * @license MIT License (see LICENSE.txt)
 */

/*jslint browser:true, node:true*/
/*global define, Event, Node*/


/**
 * Instantiate fast-clicking listeners on the specified layer.
 *
 * @constructor
 * @param {Element} layer The layer to listen on
 * @param {Object} options The options to override the defaults
 */
function FastClick(layer, options) {
	'use strict';
	var oldOnClick;

	options = options || {};

	/**
	 * Whether a click is currently being tracked.
	 *
	 * @type boolean
	 */
	this.trackingClick = false;


	/**
	 * Timestamp for when click tracking started.
	 *
	 * @type number
	 */
	this.trackingClickStart = 0;


	/**
	 * The element being tracked for a click.
	 *
	 * @type EventTarget
	 */
	this.targetElement = null;


	/**
	 * X-coordinate of touch start event.
	 *
	 * @type number
	 */
	this.touchStartX = 0;


	/**
	 * Y-coordinate of touch start event.
	 *
	 * @type number
	 */
	this.touchStartY = 0;


	/**
	 * ID of the last touch, retrieved from Touch.identifier.
	 *
	 * @type number
	 */
	this.lastTouchIdentifier = 0;


	/**
	 * Touchmove boundary, beyond which a click will be cancelled.
	 *
	 * @type number
	 */
	this.touchBoundary = options.touchBoundary || 10;


	/**
	 * The FastClick layer.
	 *
	 * @type Element
	 */
	this.layer = layer;

	/**
	 * The minimum time between tap(touchstart and touchend) events
	 *
	 * @type number
	 */
	this.tapDelay = options.tapDelay || 200;

	if (FastClick.notNeeded(layer)) {
		return;
	}

	// Some old versions of Android don't have Function.prototype.bind
	function bind(method, context) {
		return function() { return method.apply(context, arguments); };
	}


	var methods = ['onMouse', 'onClick', 'onTouchStart', 'onTouchMove', 'onTouchEnd', 'onTouchCancel'];
	var context = this;
	for (var i = 0, l = methods.length; i < l; i++) {
		context[methods[i]] = bind(context[methods[i]], context);
	}

	// Set up event handlers as required
	if (deviceIsAndroid) {
		layer.addEventListener('mouseover', this.onMouse, true);
		layer.addEventListener('mousedown', this.onMouse, true);
		layer.addEventListener('mouseup', this.onMouse, true);
	}

	layer.addEventListener('click', this.onClick, true);
	layer.addEventListener('touchstart', this.onTouchStart, false);
	layer.addEventListener('touchmove', this.onTouchMove, false);
	layer.addEventListener('touchend', this.onTouchEnd, false);
	layer.addEventListener('touchcancel', this.onTouchCancel, false);

	// Hack is required for browsers that don't support Event#stopImmediatePropagation (e.g. Android 2)
	// which is how FastClick normally stops click events bubbling to callbacks registered on the FastClick
	// layer when they are cancelled.
	if (!Event.prototype.stopImmediatePropagation) {
		layer.removeEventListener = function(type, callback, capture) {
			var rmv = Node.prototype.removeEventListener;
			if (type === 'click') {
				rmv.call(layer, type, callback.hijacked || callback, capture);
			} else {
				rmv.call(layer, type, callback, capture);
			}
		};

		layer.addEventListener = function(type, callback, capture) {
			var adv = Node.prototype.addEventListener;
			if (type === 'click') {
				adv.call(layer, type, callback.hijacked || (callback.hijacked = function(event) {
					if (!event.propagationStopped) {
						callback(event);
					}
				}), capture);
			} else {
				adv.call(layer, type, callback, capture);
			}
		};
	}

	// If a handler is already declared in the element's onclick attribute, it will be fired before
	// FastClick's onClick handler. Fix this by pulling out the user-defined handler function and
	// adding it as listener.
	if (typeof layer.onclick === 'function') {

		// Android browser on at least 3.2 requires a new reference to the function in layer.onclick
		// - the old one won't work if passed to addEventListener directly.
		oldOnClick = layer.onclick;
		layer.addEventListener('click', function(event) {
			oldOnClick(event);
		}, false);
		layer.onclick = null;
	}
}


/**
 * Android requires exceptions.
 *
 * @type boolean
 */
var deviceIsAndroid = navigator.userAgent.indexOf('Android') > 0;


/**
 * iOS requires exceptions.
 *
 * @type boolean
 */
var deviceIsIOS = /iP(ad|hone|od)/.test(navigator.userAgent);


/**
 * iOS 4 requires an exception for select elements.
 *
 * @type boolean
 */
var deviceIsIOS4 = deviceIsIOS && (/OS 4_\d(_\d)?/).test(navigator.userAgent);


/**
 * iOS 6.0(+?) requires the target element to be manually derived
 *
 * @type boolean
 */
var deviceIsIOSWithBadTarget = deviceIsIOS && (/OS ([6-9]|\d{2})_\d/).test(navigator.userAgent);


/**
 * Determine whether a given element requires a native click.
 *
 * @param {EventTarget|Element} target Target DOM element
 * @returns {boolean} Returns true if the element needs a native click
 */
FastClick.prototype.needsClick = function(target) {
	'use strict';
	switch (target.nodeName.toLowerCase()) {

	// Don't send a synthetic click to disabled inputs (issue #62)
	case 'button':
	case 'select':
	case 'textarea':
		if (target.disabled) {
			return true;
		}

		break;
	case 'input':

		// File inputs need real clicks on iOS 6 due to a browser bug (issue #68)
		if ((deviceIsIOS && target.type === 'file') || target.disabled) {
			return true;
		}

		break;
	case 'label':
	case 'video':
		return true;
	}

	return (/\bneedsclick\b/).test(target.className);
};


/**
 * Determine whether a given element requires a call to focus to simulate click into element.
 *
 * @param {EventTarget|Element} target Target DOM element
 * @returns {boolean} Returns true if the element requires a call to focus to simulate native click.
 */
FastClick.prototype.needsFocus = function(target) {
	'use strict';
	switch (target.nodeName.toLowerCase()) {
	case 'textarea':
		return true;
	case 'select':
		return !deviceIsAndroid;
	case 'input':
		switch (target.type) {
		case 'button':
		case 'checkbox':
		case 'file':
		case 'image':
		case 'radio':
		case 'submit':
			return false;
		}

		// No point in attempting to focus disabled inputs
		return !target.disabled && !target.readOnly;
	default:
		return (/\bneedsfocus\b/).test(target.className);
	}
};


/**
 * Send a click event to the specified element.
 *
 * @param {EventTarget|Element} targetElement
 * @param {Event} event
 */
FastClick.prototype.sendClick = function(targetElement, event) {
	'use strict';
	var clickEvent, touch;

	// On some Android devices activeElement needs to be blurred otherwise the synthetic click will have no effect (#24)
	if (document.activeElement && document.activeElement !== targetElement) {
		document.activeElement.blur();
	}

	touch = event.changedTouches[0];

	// Synthesise a click event, with an extra attribute so it can be tracked
	clickEvent = document.createEvent('MouseEvents');
	clickEvent.initMouseEvent(this.determineEventType(targetElement), true, true, window, 1, touch.screenX, touch.screenY, touch.clientX, touch.clientY, false, false, false, false, 0, null);
	clickEvent.forwardedTouchEvent = true;
	targetElement.dispatchEvent(clickEvent);
};

FastClick.prototype.determineEventType = function(targetElement) {
	'use strict';

	//Issue #159: Android Chrome Select Box does not open with a synthetic click event
	if (deviceIsAndroid && targetElement.tagName.toLowerCase() === 'select') {
		return 'mousedown';
	}

	return 'click';
};


/**
 * @param {EventTarget|Element} targetElement
 */
FastClick.prototype.focus = function(targetElement) {
	'use strict';
	var length;

	// Issue #160: on iOS 7, some input elements (e.g. date datetime) throw a vague TypeError on setSelectionRange. These elements don't have an integer value for the selectionStart and selectionEnd properties, but unfortunately that can't be used for detection because accessing the properties also throws a TypeError. Just check the type instead. Filed as Apple bug #15122724.
	if (deviceIsIOS && targetElement.setSelectionRange && targetElement.type.indexOf('date') !== 0 && targetElement.type !== 'time') {
		length = targetElement.value.length;
		targetElement.setSelectionRange(length, length);
	} else {
		targetElement.focus();
	}
};


/**
 * Check whether the given target element is a child of a scrollable layer and if so, set a flag on it.
 *
 * @param {EventTarget|Element} targetElement
 */
FastClick.prototype.updateScrollParent = function(targetElement) {
	'use strict';
	var scrollParent, parentElement;

	scrollParent = targetElement.fastClickScrollParent;

	// Attempt to discover whether the target element is contained within a scrollable layer. Re-check if the
	// target element was moved to another parent.
	if (!scrollParent || !scrollParent.contains(targetElement)) {
		parentElement = targetElement;
		do {
			if (parentElement.scrollHeight > parentElement.offsetHeight) {
				scrollParent = parentElement;
				targetElement.fastClickScrollParent = parentElement;
				break;
			}

			parentElement = parentElement.parentElement;
		} while (parentElement);
	}

	// Always update the scroll top tracker if possible.
	if (scrollParent) {
		scrollParent.fastClickLastScrollTop = scrollParent.scrollTop;
	}
};


/**
 * @param {EventTarget} targetElement
 * @returns {Element|EventTarget}
 */
FastClick.prototype.getTargetElementFromEventTarget = function(eventTarget) {
	'use strict';

	// On some older browsers (notably Safari on iOS 4.1 - see issue #56) the event target may be a text node.
	if (eventTarget.nodeType === Node.TEXT_NODE) {
		return eventTarget.parentNode;
	}

	return eventTarget;
};


/**
 * On touch start, record the position and scroll offset.
 *
 * @param {Event} event
 * @returns {boolean}
 */
FastClick.prototype.onTouchStart = function(event) {
	'use strict';
	var targetElement, touch, selection;

	// Ignore multiple touches, otherwise pinch-to-zoom is prevented if both fingers are on the FastClick element (issue #111).
	if (event.targetTouches.length > 1) {
		return true;
	}

	targetElement = this.getTargetElementFromEventTarget(event.target);
	touch = event.targetTouches[0];

	if (deviceIsIOS) {

		// Only trusted events will deselect text on iOS (issue #49)
		selection = window.getSelection();
		if (selection.rangeCount && !selection.isCollapsed) {
			return true;
		}

		if (!deviceIsIOS4) {

			// Weird things happen on iOS when an alert or confirm dialog is opened from a click event callback (issue #23):
			// when the user next taps anywhere else on the page, new touchstart and touchend events are dispatched
			// with the same identifier as the touch event that previously triggered the click that triggered the alert.
			// Sadly, there is an issue on iOS 4 that causes some normal touch events to have the same identifier as an
			// immediately preceeding touch event (issue #52), so this fix is unavailable on that platform.
			if (touch.identifier === this.lastTouchIdentifier) {
				event.preventDefault();
				return false;
			}

			this.lastTouchIdentifier = touch.identifier;

			// If the target element is a child of a scrollable layer (using -webkit-overflow-scrolling: touch) and:
			// 1) the user does a fling scroll on the scrollable layer
			// 2) the user stops the fling scroll with another tap
			// then the event.target of the last 'touchend' event will be the element that was under the user's finger
			// when the fling scroll was started, causing FastClick to send a click event to that layer - unless a check
			// is made to ensure that a parent layer was not scrolled before sending a synthetic click (issue #42).
			this.updateScrollParent(targetElement);
		}
	}

	this.trackingClick = true;
	this.trackingClickStart = event.timeStamp;
	this.targetElement = targetElement;

	this.touchStartX = touch.pageX;
	this.touchStartY = touch.pageY;

	// Prevent phantom clicks on fast double-tap (issue #36)
	if ((event.timeStamp - this.lastClickTime) < this.tapDelay) {
		event.preventDefault();
	}

	return true;
};


/**
 * Based on a touchmove event object, check whether the touch has moved past a boundary since it started.
 *
 * @param {Event} event
 * @returns {boolean}
 */
FastClick.prototype.touchHasMoved = function(event) {
	'use strict';
	var touch = event.changedTouches[0], boundary = this.touchBoundary;

	if (Math.abs(touch.pageX - this.touchStartX) > boundary || Math.abs(touch.pageY - this.touchStartY) > boundary) {
		return true;
	}

	return false;
};


/**
 * Update the last position.
 *
 * @param {Event} event
 * @returns {boolean}
 */
FastClick.prototype.onTouchMove = function(event) {
	'use strict';
	if (!this.trackingClick) {
		return true;
	}

	// If the touch has moved, cancel the click tracking
	if (this.targetElement !== this.getTargetElementFromEventTarget(event.target) || this.touchHasMoved(event)) {
		this.trackingClick = false;
		this.targetElement = null;
	}

	return true;
};


/**
 * Attempt to find the labelled control for the given label element.
 *
 * @param {EventTarget|HTMLLabelElement} labelElement
 * @returns {Element|null}
 */
FastClick.prototype.findControl = function(labelElement) {
	'use strict';

	// Fast path for newer browsers supporting the HTML5 control attribute
	if (labelElement.control !== undefined) {
		return labelElement.control;
	}

	// All browsers under test that support touch events also support the HTML5 htmlFor attribute
	if (labelElement.htmlFor) {
		return document.getElementById(labelElement.htmlFor);
	}

	// If no for attribute exists, attempt to retrieve the first labellable descendant element
	// the list of which is defined here: http://www.w3.org/TR/html5/forms.html#category-label
	return labelElement.querySelector('button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea');
};


/**
 * On touch end, determine whether to send a click event at once.
 *
 * @param {Event} event
 * @returns {boolean}
 */
FastClick.prototype.onTouchEnd = function(event) {
	'use strict';
	var forElement, trackingClickStart, targetTagName, scrollParent, touch, targetElement = this.targetElement;

	if (!this.trackingClick) {
		return true;
	}

	// Prevent phantom clicks on fast double-tap (issue #36)
	if ((event.timeStamp - this.lastClickTime) < this.tapDelay) {
		this.cancelNextClick = true;
		return true;
	}

	// Reset to prevent wrong click cancel on input (issue #156).
	this.cancelNextClick = false;

	this.lastClickTime = event.timeStamp;

	trackingClickStart = this.trackingClickStart;
	this.trackingClick = false;
	this.trackingClickStart = 0;

	// On some iOS devices, the targetElement supplied with the event is invalid if the layer
	// is performing a transition or scroll, and has to be re-detected manually. Note that
	// for this to function correctly, it must be called *after* the event target is checked!
	// See issue #57; also filed as rdar://13048589 .
	if (deviceIsIOSWithBadTarget) {
		touch = event.changedTouches[0];

		// In certain cases arguments of elementFromPoint can be negative, so prevent setting targetElement to null
		targetElement = document.elementFromPoint(touch.pageX - window.pageXOffset, touch.pageY - window.pageYOffset) || targetElement;
		targetElement.fastClickScrollParent = this.targetElement.fastClickScrollParent;
	}

	targetTagName = targetElement.tagName.toLowerCase();
	if (targetTagName === 'label') {
		forElement = this.findControl(targetElement);
		if (forElement) {
			this.focus(targetElement);
			if (deviceIsAndroid) {
				return false;
			}

			targetElement = forElement;
		}
	} else if (this.needsFocus(targetElement)) {

		// Case 1: If the touch started a while ago (best guess is 100ms based on tests for issue #36) then focus will be triggered anyway. Return early and unset the target element reference so that the subsequent click will be allowed through.
		// Case 2: Without this exception for input elements tapped when the document is contained in an iframe, then any inputted text won't be visible even though the value attribute is updated as the user types (issue #37).
		if ((event.timeStamp - trackingClickStart) > 100 || (deviceIsIOS && window.top !== window && targetTagName === 'input')) {
			this.targetElement = null;
			return false;
		}

		this.focus(targetElement);
		this.sendClick(targetElement, event);

		// Select elements need the event to go through on iOS 4, otherwise the selector menu won't open.
		// Also this breaks opening selects when VoiceOver is active on iOS6, iOS7 (and possibly others)
		if (!deviceIsIOS || targetTagName !== 'select') {
			this.targetElement = null;
			event.preventDefault();
		}

		return false;
	}

	if (deviceIsIOS && !deviceIsIOS4) {

		// Don't send a synthetic click event if the target element is contained within a parent layer that was scrolled
		// and this tap is being used to stop the scrolling (usually initiated by a fling - issue #42).
		scrollParent = targetElement.fastClickScrollParent;
		if (scrollParent && scrollParent.fastClickLastScrollTop !== scrollParent.scrollTop) {
			return true;
		}
	}

	// Prevent the actual click from going though - unless the target node is marked as requiring
	// real clicks or if it is in the whitelist in which case only non-programmatic clicks are permitted.
	if (!this.needsClick(targetElement)) {
		event.preventDefault();
		this.sendClick(targetElement, event);
	}

	return false;
};


/**
 * On touch cancel, stop tracking the click.
 *
 * @returns {void}
 */
FastClick.prototype.onTouchCancel = function() {
	'use strict';
	this.trackingClick = false;
	this.targetElement = null;
};


/**
 * Determine mouse events which should be permitted.
 *
 * @param {Event} event
 * @returns {boolean}
 */
FastClick.prototype.onMouse = function(event) {
	'use strict';

	// If a target element was never set (because a touch event was never fired) allow the event
	if (!this.targetElement) {
		return true;
	}

	if (event.forwardedTouchEvent) {
		return true;
	}

	// Programmatically generated events targeting a specific element should be permitted
	if (!event.cancelable) {
		return true;
	}

	// Derive and check the target element to see whether the mouse event needs to be permitted;
	// unless explicitly enabled, prevent non-touch click events from triggering actions,
	// to prevent ghost/doubleclicks.
	if (!this.needsClick(this.targetElement) || this.cancelNextClick) {

		// Prevent any user-added listeners declared on FastClick element from being fired.
		if (event.stopImmediatePropagation) {
			event.stopImmediatePropagation();
		} else {

			// Part of the hack for browsers that don't support Event#stopImmediatePropagation (e.g. Android 2)
			event.propagationStopped = true;
		}

		// Cancel the event
		event.stopPropagation();
		event.preventDefault();

		return false;
	}

	// If the mouse event is permitted, return true for the action to go through.
	return true;
};


/**
 * On actual clicks, determine whether this is a touch-generated click, a click action occurring
 * naturally after a delay after a touch (which needs to be cancelled to avoid duplication), or
 * an actual click which should be permitted.
 *
 * @param {Event} event
 * @returns {boolean}
 */
FastClick.prototype.onClick = function(event) {
	'use strict';
	var permitted;

	// It's possible for another FastClick-like library delivered with third-party code to fire a click event before FastClick does (issue #44). In that case, set the click-tracking flag back to false and return early. This will cause onTouchEnd to return early.
	if (this.trackingClick) {
		this.targetElement = null;
		this.trackingClick = false;
		return true;
	}

	// Very odd behaviour on iOS (issue #18): if a submit element is present inside a form and the user hits enter in the iOS simulator or clicks the Go button on the pop-up OS keyboard the a kind of 'fake' click event will be triggered with the submit-type input element as the target.
	if (event.target.type === 'submit' && event.detail === 0) {
		return true;
	}

	permitted = this.onMouse(event);

	// Only unset targetElement if the click is not permitted. This will ensure that the check for !targetElement in onMouse fails and the browser's click doesn't go through.
	if (!permitted) {
		this.targetElement = null;
	}

	// If clicks are permitted, return true for the action to go through.
	return permitted;
};


/**
 * Remove all FastClick's event listeners.
 *
 * @returns {void}
 */
FastClick.prototype.destroy = function() {
	'use strict';
	var layer = this.layer;

	if (deviceIsAndroid) {
		layer.removeEventListener('mouseover', this.onMouse, true);
		layer.removeEventListener('mousedown', this.onMouse, true);
		layer.removeEventListener('mouseup', this.onMouse, true);
	}

	layer.removeEventListener('click', this.onClick, true);
	layer.removeEventListener('touchstart', this.onTouchStart, false);
	layer.removeEventListener('touchmove', this.onTouchMove, false);
	layer.removeEventListener('touchend', this.onTouchEnd, false);
	layer.removeEventListener('touchcancel', this.onTouchCancel, false);
};


/**
 * Check whether FastClick is needed.
 *
 * @param {Element} layer The layer to listen on
 */
FastClick.notNeeded = function(layer) {
	'use strict';
	var metaViewport;
	var chromeVersion;

	// Devices that don't support touch don't need FastClick
	if (typeof window.ontouchstart === 'undefined') {
		return true;
	}

	// Chrome version - zero for other browsers
	chromeVersion = +(/Chrome\/([0-9]+)/.exec(navigator.userAgent) || [,0])[1];

	if (chromeVersion) {

		if (deviceIsAndroid) {
			metaViewport = document.querySelector('meta[name=viewport]');

			if (metaViewport) {
				// Chrome on Android with user-scalable="no" doesn't need FastClick (issue #89)
				if (metaViewport.content.indexOf('user-scalable=no') !== -1) {
					return true;
				}
				// Chrome 32 and above with width=device-width or less don't need FastClick
				if (chromeVersion > 31 && document.documentElement.scrollWidth <= window.outerWidth) {
					return true;
				}
			}

		// Chrome desktop doesn't need FastClick (issue #15)
		} else {
			return true;
		}
	}

	// IE10 with -ms-touch-action: none, which disables double-tap-to-zoom (issue #97)
	if (layer.style.msTouchAction === 'none') {
		return true;
	}

	return false;
};


/**
 * Factory method for creating a FastClick object
 *
 * @param {Element} layer The layer to listen on
 * @param {Object} options The options to override the defaults
 */
FastClick.attach = function(layer, options) {
	'use strict';
	return new FastClick(layer, options);
};


if (typeof define !== 'undefined' && define.amd) {

	// AMD. Register as an anonymous module.
	define(function() {
		'use strict';
		return FastClick;
	});
} else if (typeof module !== 'undefined' && module.exports) {
	module.exports = FastClick.attach;
	module.exports.FastClick = FastClick;
} else {
	window.FastClick = FastClick;
}

/*!
 * selectivizr v1.0.2 - (c) Keith Clark, freely distributable under the terms of the MIT license.
 * selectivizr.com
 */
(function(j){function A(a){return a.replace(B,h).replace(C,function(a,d,b){for(var a=b.split(","),b=0,e=a.length;b<e;b++){var s=D(a[b].replace(E,h).replace(F,h))+o,l=[];a[b]=s.replace(G,function(a,b,c,d,e){if(b){if(l.length>0){var a=l,f,e=s.substring(0,e).replace(H,i);if(e==i||e.charAt(e.length-1)==o)e+="*";try{f=t(e)}catch(k){}if(f){e=0;for(c=f.length;e<c;e++){for(var d=f[e],h=d.className,j=0,m=a.length;j<m;j++){var g=a[j];if(!RegExp("(^|\\s)"+g.className+"(\\s|$)").test(d.className)&&g.b&&(g.b===!0||g.b(d)===!0))h=u(h,g.className,!0)}d.className=h}}l=[]}return b}else{if(b=c?I(c):!v||v.test(d)?{className:w(d),b:!0}:null)return l.push(b),"."+b.className;return a}})}return d+a.join(",")})}function I(a){var c=!0,d=w(a.slice(1)),b=a.substring(0,5)==":not(",e,f;b&&(a=a.slice(5,-1));var l=a.indexOf("(");l>-1&&(a=a.substring(0,l));if(a.charAt(0)==":")switch(a.slice(1)){case "root":c=function(a){return b?a!=p:a==p};break;case "target":if(m==8){c=function(a){function c(){var d=location.hash,e=d.slice(1);return b?d==i||a.id!=e:d!=i&&a.id==e}k(j,"hashchange",function(){g(a,d,c())});return c()};break}return!1;case "checked":c=function(a){J.test(a.type)&&k(a,"propertychange",function(){event.propertyName=="checked"&&g(a,d,a.checked!==b)});return a.checked!==b};break;case "disabled":b=!b;case "enabled":c=function(c){if(K.test(c.tagName))return k(c,"propertychange",function(){event.propertyName=="$disabled"&&g(c,d,c.a===b)}),q.push(c),c.a=c.disabled,c.disabled===b;return a==":enabled"?b:!b};break;case "focus":e="focus",f="blur";case "hover":e||(e="mouseenter",f="mouseleave");c=function(a){k(a,b?f:e,function(){g(a,d,!0)});k(a,b?e:f,function(){g(a,d,!1)});return b};break;default:if(!L.test(a))return!1}return{className:d,b:c}}function w(a){return M+"-"+(m==6&&N?O++:a.replace(P,function(a){return a.charCodeAt(0)}))}function D(a){return a.replace(x,h).replace(Q,o)}function g(a,c,d){var b=a.className,c=u(b,c,d);if(c!=b)a.className=c,a.parentNode.className+=i}function u(a,c,d){var b=RegExp("(^|\\s)"+c+"(\\s|$)"),e=b.test(a);return d?e?a:a+o+c:e?a.replace(b,h).replace(x,h):a}function k(a,c,d){a.attachEvent("on"+c,d)}function r(a,c){if(/^https?:\/\//i.test(a))return c.substring(0,c.indexOf("/",8))==a.substring(0,a.indexOf("/",8))?a:null;if(a.charAt(0)=="/")return c.substring(0,c.indexOf("/",8))+a;var d=c.split(/[?#]/)[0];a.charAt(0)!="?"&&d.charAt(d.length-1)!="/"&&(d=d.substring(0,d.lastIndexOf("/")+1));return d+a}function y(a){if(a)return n.open("GET",a,!1),n.send(),(n.status==200?n.responseText:i).replace(R,i).replace(S,function(c,d,b,e,f){return y(r(b||f,a))}).replace(T,function(c,d,b){d=d||i;return" url("+d+r(b,a)+d+") "});return i}function U(){var a,c;a=f.getElementsByTagName("BASE");for(var d=a.length>0?a[0].href:f.location.href,b=0;b<f.styleSheets.length;b++)if(c=f.styleSheets[b],c.href!=i&&(a=r(c.href,d)))c.cssText=A(y(a));q.length>0&&setInterval(function(){for(var a=0,c=q.length;a<c;a++){var b=q[a];if(b.disabled!==b.a)b.disabled?(b.disabled=!1,b.a=!0,b.disabled=!0):b.a=b.disabled}},250)}if(!/*@cc_on!@*/true){var f=document,p=f.documentElement,n=function(){if(j.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){return null}}(),m=/MSIE (\d+)/.exec(navigator.userAgent)[1];if(!(f.compatMode!="CSS1Compat"||m<6||m>8||!n)){var z={NW:"*.Dom.select",MooTools:"$$",DOMAssistant:"*.$",Prototype:"$$",YAHOO:"*.util.Selector.query",Sizzle:"*",jQuery:"*",dojo:"*.query"},t,q=[],O=0,N=!0,M="slvzr",R=/(\/\*[^*]*\*+([^\/][^*]*\*+)*\/)\s*/g,S=/@import\s*(?:(?:(?:url\(\s*(['"]?)(.*)\1)\s*\))|(?:(['"])(.*)\3))[^;]*;/g,T=/\burl\(\s*(["']?)(?!data:)([^"')]+)\1\s*\)/g,L=/^:(empty|(first|last|only|nth(-last)?)-(child|of-type))$/,B=/:(:first-(?:line|letter))/g,C=/(^|})\s*([^\{]*?[\[:][^{]+)/g,G=/([ +~>])|(:[a-z-]+(?:\(.*?\)+)?)|(\[.*?\])/g,H=/(:not\()?:(hover|enabled|disabled|focus|checked|target|active|visited|first-line|first-letter)\)?/g,P=/[^\w-]/g,K=/^(INPUT|SELECT|TEXTAREA|BUTTON)$/,J=/^(checkbox|radio)$/,v=m>6?/[\$\^*]=(['"])\1/:null,E=/([(\[+~])\s+/g,F=/\s+([)\]+~])/g,Q=/\s+/g,x=/^\s*((?:[\S\s]*\S)?)\s*$/,i="",o=" ",h="$1";(function(a,c){function d(){try{p.doScroll("left")}catch(a){setTimeout(d,50);return}b("poll")}function b(d){if(!(d.type=="readystatechange"&&f.readyState!="complete")&&((d.type=="load"?a:f).detachEvent("on"+d.type,b,!1),!e&&(e=!0)))c.call(a,d.type||d)}var e=!1,g=!0;if(f.readyState=="complete")c.call(a,i);else{if(f.createEventObject&&p.doScroll){try{g=!a.frameElement}catch(h){}g&&d()}k(f,"readystatechange",b);k(a,"load",b)}})(j,function(){for(var a in z){var c,d,b=j;if(j[a]){for(c=z[a].replace("*",a).split(".");(d=c.shift())&&(b=b[d]););if(typeof b=="function"){t=b;U();break}}}})}}})(this);

(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(jQuery)}})(function(e){"use strict";var t={},n=Math.max,r=Math.min;t.c={};t.c.d=e(document);t.c.t=function(e){return e.originalEvent.touches.length-1};t.o=function(){var n=this;this.o=null;this.$=null;this.i=null;this.g=null;this.v=null;this.cv=null;this.x=0;this.y=0;this.w=0;this.h=0;this.$c=null;this.c=null;this.t=0;this.isInit=false;this.fgColor=null;this.pColor=null;this.dH=null;this.cH=null;this.eH=null;this.rH=null;this.scale=1;this.relative=false;this.relativeWidth=false;this.relativeHeight=false;this.$div=null;this.run=function(){var t=function(e,t){var r;for(r in t){n.o[r]=t[r]}n._carve().init();n._configure()._draw()};if(this.$.data("kontroled"))return;this.$.data("kontroled",true);this.extend();this.o=e.extend({min:this.$.data("min")!==undefined?this.$.data("min"):0,max:this.$.data("max")!==undefined?this.$.data("max"):100,stopper:true,readOnly:this.$.data("readonly")||this.$.attr("readonly")==="readonly",cursor:this.$.data("cursor")===true&&30||this.$.data("cursor")||0,thickness:this.$.data("thickness")&&Math.max(Math.min(this.$.data("thickness"),1),.01)||.35,lineCap:this.$.data("linecap")||"butt",width:this.$.data("width")||200,height:this.$.data("height")||200,displayInput:this.$.data("displayinput")==null||this.$.data("displayinput"),displayPrevious:this.$.data("displayprevious"),fgColor:this.$.data("fgcolor")||"#87CEEB",inputColor:this.$.data("inputcolor"),font:this.$.data("font")||"Arial",fontWeight:this.$.data("font-weight")||"bold",inline:false,step:this.$.data("step")||1,rotation:this.$.data("rotation"),draw:null,change:null,cancel:null,release:null,format:function(e){return e},parse:function(e){return parseFloat(e)}},this.o);this.o.flip=this.o.rotation==="anticlockwise"||this.o.rotation==="acw";if(!this.o.inputColor){this.o.inputColor=this.o.fgColor}if(this.$.is("fieldset")){this.v={};this.i=this.$.find("input");this.i.each(function(t){var r=e(this);n.i[t]=r;n.v[t]=n.o.parse(r.val());r.bind("change blur",function(){var e={};e[t]=r.val();n.val(n._validate(e))})});this.$.find("legend").remove()}else{this.i=this.$;this.v=this.o.parse(this.$.val());this.v===""&&(this.v=this.o.min);this.$.bind("change blur",function(){n.val(n._validate(n.o.parse(n.$.val())))})}!this.o.displayInput&&this.$.hide();this.$c=e(document.createElement("canvas")).attr({width:this.o.width,height:this.o.height});this.$div=e('<div style="'+(this.o.inline?"display:inline;":"")+"width:"+this.o.width+"px;height:"+this.o.height+"px;"+'"></div>');this.$.wrap(this.$div).before(this.$c);this.$div=this.$.parent();if(typeof G_vmlCanvasManager!=="undefined"){G_vmlCanvasManager.initElement(this.$c[0])}this.c=this.$c[0].getContext?this.$c[0].getContext("2d"):null;if(!this.c){throw{name:"CanvasNotSupportedException",message:"Canvas not supported. Please use excanvas on IE8.0.",toString:function(){return this.name+": "+this.message}}}this.scale=(window.devicePixelRatio||1)/(this.c.webkitBackingStorePixelRatio||this.c.mozBackingStorePixelRatio||this.c.msBackingStorePixelRatio||this.c.oBackingStorePixelRatio||this.c.backingStorePixelRatio||1);this.relativeWidth=this.o.width%1!==0&&this.o.width.indexOf("%");this.relativeHeight=this.o.height%1!==0&&this.o.height.indexOf("%");this.relative=this.relativeWidth||this.relativeHeight;this._carve();if(this.v instanceof Object){this.cv={};this.copy(this.v,this.cv)}else{this.cv=this.v}this.$.bind("configure",t).parent().bind("configure",t);this._listen()._configure()._xy().init();this.isInit=true;this.$.val(this.o.format(this.v));this._draw();return this};this._carve=function(){if(this.relative){var e=this.relativeWidth?this.$div.parent().width()*parseInt(this.o.width)/100:this.$div.parent().width(),t=this.relativeHeight?this.$div.parent().height()*parseInt(this.o.height)/100:this.$div.parent().height();this.w=this.h=Math.min(e,t)}else{this.w=this.o.width;this.h=this.o.height}this.$div.css({width:this.w+"px",height:this.h+"px"});this.$c.attr({width:this.w,height:this.h});if(this.scale!==1){this.$c[0].width=this.$c[0].width*this.scale;this.$c[0].height=this.$c[0].height*this.scale;this.$c.width(this.w);this.$c.height(this.h)}return this};this._draw=function(){var e=true;n.g=n.c;n.clear();n.dH&&(e=n.dH());e!==false&&n.draw()};this._touch=function(e){var r=function(e){var t=n.xy2val(e.originalEvent.touches[n.t].pageX,e.originalEvent.touches[n.t].pageY);if(t==n.cv)return;if(n.cH&&n.cH(t)===false)return;n.change(n._validate(t));n._draw()};this.t=t.c.t(e);r(e);t.c.d.bind("touchmove.k",r).bind("touchend.k",function(){t.c.d.unbind("touchmove.k touchend.k");n.val(n.cv)});return this};this._mouse=function(e){var r=function(e){var t=n.xy2val(e.pageX,e.pageY);if(t==n.cv)return;if(n.cH&&n.cH(t)===false)return;n.change(n._validate(t));n._draw()};r(e);t.c.d.bind("mousemove.k",r).bind("keyup.k",function(e){if(e.keyCode===27){t.c.d.unbind("mouseup.k mousemove.k keyup.k");if(n.eH&&n.eH()===false)return;n.cancel()}}).bind("mouseup.k",function(e){t.c.d.unbind("mousemove.k mouseup.k keyup.k");n.val(n.cv)});return this};this._xy=function(){var e=this.$c.offset();this.x=e.left;this.y=e.top;return this};this._listen=function(){if(!this.o.readOnly){this.$c.bind("mousedown",function(e){e.preventDefault();n._xy()._mouse(e)}).bind("touchstart",function(e){e.preventDefault();n._xy()._touch(e)});this.listen()}else{this.$.attr("readonly","readonly")}if(this.relative){e(window).resize(function(){n._carve().init();n._draw()})}return this};this._configure=function(){if(this.o.draw)this.dH=this.o.draw;if(this.o.change)this.cH=this.o.change;if(this.o.cancel)this.eH=this.o.cancel;if(this.o.release)this.rH=this.o.release;if(this.o.displayPrevious){this.pColor=this.h2rgba(this.o.fgColor,"0.4");this.fgColor=this.h2rgba(this.o.fgColor,"0.6")}else{this.fgColor=this.o.fgColor}return this};this._clear=function(){this.$c[0].width=this.$c[0].width};this._validate=function(e){var t=~~((e<0?-.5:.5)+e/this.o.step)*this.o.step;return Math.round(t*100)/100};this.listen=function(){};this.extend=function(){};this.init=function(){};this.change=function(e){};this.val=function(e){};this.xy2val=function(e,t){};this.draw=function(){};this.clear=function(){this._clear()};this.h2rgba=function(e,t){var n;e=e.substring(1,7);n=[parseInt(e.substring(0,2),16),parseInt(e.substring(2,4),16),parseInt(e.substring(4,6),16)];return"rgba("+n[0]+","+n[1]+","+n[2]+","+t+")"};this.copy=function(e,t){for(var n in e){t[n]=e[n]}}};t.Dial=function(){t.o.call(this);this.startAngle=null;this.xy=null;this.radius=null;this.lineWidth=null;this.cursorExt=null;this.w2=null;this.PI2=2*Math.PI;this.extend=function(){this.o=e.extend({bgColor:this.$.data("bgcolor")||"#EEEEEE",angleOffset:this.$.data("angleoffset")||0,angleArc:this.$.data("anglearc")||360,inline:true},this.o)};this.val=function(e,t){if(null!=e){e=this.o.parse(e);if(t!==false&&e!=this.v&&this.rH&&this.rH(e)===false){return}this.cv=this.o.stopper?n(r(e,this.o.max),this.o.min):e;this.v=this.cv;this.$.val(this.o.format(this.v));this._draw()}else{return this.v}};this.xy2val=function(e,t){var i,s;i=Math.atan2(e-(this.x+this.w2),-(t-this.y-this.w2))-this.angleOffset;if(this.o.flip){i=this.angleArc-i-this.PI2}if(this.angleArc!=this.PI2&&i<0&&i>-.5){i=0}else if(i<0){i+=this.PI2}s=i*(this.o.max-this.o.min)/this.angleArc+this.o.min;this.o.stopper&&(s=n(r(s,this.o.max),this.o.min));return s};this.listen=function(){var t=this,i,s,o=function(e){e.preventDefault();var o=e.originalEvent,u=o.detail||o.wheelDeltaX,a=o.detail||o.wheelDeltaY,f=t._validate(t.o.parse(t.$.val()))+(u>0||a>0?t.o.step:u<0||a<0?-t.o.step:0);f=n(r(f,t.o.max),t.o.min);t.val(f,false);if(t.rH){clearTimeout(i);i=setTimeout(function(){t.rH(f);i=null},100);if(!s){s=setTimeout(function(){if(i)t.rH(f);s=null},200)}}},u,a,f=1,l={37:-t.o.step,38:t.o.step,39:t.o.step,40:-t.o.step};this.$.bind("keydown",function(i){var s=i.keyCode;if(s>=96&&s<=105){s=i.keyCode=s-48}u=parseInt(String.fromCharCode(s));if(isNaN(u)){s!==13&&s!==8&&s!==9&&s!==189&&(s!==190||t.$.val().match(/\./))&&i.preventDefault();if(e.inArray(s,[37,38,39,40])>-1){i.preventDefault();var o=t.o.parse(t.$.val())+l[s]*f;t.o.stopper&&(o=n(r(o,t.o.max),t.o.min));t.change(t._validate(o));t._draw();a=window.setTimeout(function(){f*=2},30)}}}).bind("keyup",function(e){if(isNaN(u)){if(a){window.clearTimeout(a);a=null;f=1;t.val(t.$.val())}}else{t.$.val()>t.o.max&&t.$.val(t.o.max)||t.$.val()<t.o.min&&t.$.val(t.o.min)}});this.$c.bind("mousewheel DOMMouseScroll",o);this.$.bind("mousewheel DOMMouseScroll",o)};this.init=function(){if(this.v<this.o.min||this.v>this.o.max){this.v=this.o.min}this.$.val(this.v);this.w2=this.w/2;this.cursorExt=this.o.cursor/100;this.xy=this.w2*this.scale;this.lineWidth=this.xy*this.o.thickness;this.lineCap=this.o.lineCap;this.radius=this.xy-this.lineWidth/2;this.o.angleOffset&&(this.o.angleOffset=isNaN(this.o.angleOffset)?0:this.o.angleOffset);this.o.angleArc&&(this.o.angleArc=isNaN(this.o.angleArc)?this.PI2:this.o.angleArc);this.angleOffset=this.o.angleOffset*Math.PI/180;this.angleArc=this.o.angleArc*Math.PI/180;this.startAngle=1.5*Math.PI+this.angleOffset;this.endAngle=1.5*Math.PI+this.angleOffset+this.angleArc;var e=n(String(Math.abs(this.o.max)).length,String(Math.abs(this.o.min)).length,2)+2;this.o.displayInput&&this.i.css({width:(this.w/2+4>>0)+"px",height:(this.w/3>>0)+"px",position:"absolute","vertical-align":"middle","margin-top":(this.w/3>>0)+"px","margin-left":"-"+(this.w*3/4+2>>0)+"px",border:0,background:"none",font:this.o.fontWeight+" "+(this.w/e>>0)+"px "+this.o.font,"text-align":"center",color:this.o.inputColor||this.o.fgColor,padding:"0px","-webkit-appearance":"none"})||this.i.css({width:"0px",visibility:"hidden"})};this.change=function(e){this.cv=e;this.$.val(this.o.format(e))};this.angle=function(e){return(e-this.o.min)*this.angleArc/(this.o.max-this.o.min)};this.arc=function(e){var t,n;e=this.angle(e);if(this.o.flip){t=this.endAngle+1e-5;n=t-e-1e-5}else{t=this.startAngle-1e-5;n=t+e+1e-5}this.o.cursor&&(t=n-this.cursorExt)&&(n=n+this.cursorExt);return{s:t,e:n,d:this.o.flip&&!this.o.cursor}};this.draw=function(){var e=this.g,t=this.arc(this.cv),n,r=1;e.lineWidth=this.lineWidth;e.lineCap=this.lineCap;if(this.o.bgColor!=="none"){e.beginPath();e.strokeStyle=this.o.bgColor;e.arc(this.xy,this.xy,this.radius,this.endAngle-1e-5,this.startAngle+1e-5,true);e.stroke()}if(this.o.displayPrevious){n=this.arc(this.v);e.beginPath();e.strokeStyle=this.pColor;e.arc(this.xy,this.xy,this.radius,n.s,n.e,n.d);e.stroke();r=this.cv==this.v}e.beginPath();e.strokeStyle=r?this.o.fgColor:this.fgColor;e.arc(this.xy,this.xy,this.radius,t.s,t.e,t.d);e.stroke()};this.cancel=function(){this.val(this.v)}};e.fn.dial=e.fn.knob=function(n){return this.each(function(){var r=new t.Dial;r.o=n;r.$=e(this);r.run()}).parent()}})












;
